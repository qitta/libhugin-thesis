

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3 Design &mdash; Projektarbeit</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'../../',
        VERSION:'0.1',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="Projektarbeit" href="../../index.html"/>
        <link rel="next" title="4 Implementierung" href="../IV/index.html"/>
        <link rel="prev" title="2 Einstieg" href="../II/index.html"/>

<link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
<link rel="stylesheet" type="text/css" href="../../_static/colorbox/colorbox.css" />

<script type="text/javascript" src="../../_static/colorbox/jquery.colorbox-min.js" />
<script type="text/javascript">
	function endsWith(str, suffix) {
	    return str.indexOf(suffix, str.length - suffix.length) !== -1;
	}

    $(document).ready(function() {
    	var im, imsrc;
    	$('img').each(function() {
    		im = $(this);
    		imsrc = im.attr('src');
    		imalt = im.attr('alt');
    		if (endsWith(imsrc, 'svg')) {
    			im.wrap($('<a>').attr({'href': imsrc, 'title': imalt}).addClass('svglink'));
    		}
    	});

    	$('a.svglink').colorbox({
    		'width': '95%',
    		'height': '95%',
    		'photo': true});
    });
</script>


  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="icon icon-home"> Projektarbeit</a>
        <form class="wy-form" action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../abstract.html">Abstract</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acknowledgements.html">Danksagung</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dedication.html">Widmung</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../I/index.html">1 Einleitung</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../I/index.html#motivation">1.1 Motivation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../I/index.html#namensgebung">1.2 Namensgebung</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../II/index.html">2 Einstieg</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../II/index.html#einsatzszenarien">2.1 Einsatzszenarien</a></li>
<li class="toctree-l2"><a class="reference internal" href="../II/index.html#vorhandene-alternativen">2.2 Vorhandene Alternativen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../II/index.html#vorhandene-arbeiten">2.3 Vorhandene Arbeiten</a></li>
<li class="toctree-l2"><a class="reference internal" href="../II/index.html#schlussfolgerungen">2.4 Schlussfolgerungen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../II/index.html#anforderungen">2.5 Anforderungen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../II/index.html#zielgruppe">2.6 Zielgruppe</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">3 Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#architektur">3.1 Architektur</a></li>
<li class="toctree-l2"><a class="reference internal" href="#algorithmik">3.2 Algorithmik</a></li>
<li class="toctree-l2"><a class="reference internal" href="#integration-von-libmunin-in-die-umwelt">3.3 Integration von libmunin in die Umwelt</a></li>
<li class="toctree-l2"><a class="reference internal" href="#periphere-komponenten">3.4 Periphere Komponenten</a></li>
<li class="toctree-l2"><a class="reference internal" href="#entwurf-der-software">3.5 Entwurf der Software</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../IV/index.html">4 Implementierung</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../IV/index.html#entwicklungsumgebung">4.1 Entwicklungsumgebung</a></li>
<li class="toctree-l2"><a class="reference internal" href="../IV/index.html#kurze-implementierungshistorie">4.2 Kurze Implementierungshistorie</a></li>
<li class="toctree-l2"><a class="reference internal" href="../IV/index.html#liste-verfugbarer-provider-und-distanzfunktionen">4.3 Liste verfügbarer Provider und Distanzfunktionen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../IV/index.html#paketubersicht">4.4 Paketübersicht</a></li>
<li class="toctree-l2"><a class="reference internal" href="../IV/index.html#anwendungsbeispiel">4.5 Anwendungsbeispiel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../IV/index.html#statistiken">4.6 Statistiken</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../V/index.html">5 Test</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../V/index.html#erfullung-der-anforderungen">5.1 Erfüllung der Anforderungen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../V/index.html#verifizierung">5.2 Verifizierung</a></li>
<li class="toctree-l2"><a class="reference internal" href="../V/index.html#validierung">5.3 Validierung</a></li>
<li class="toctree-l2"><a class="reference internal" href="../V/index.html#demonanwendung-als-debugger">5.4 Demonanwendung als Debugger</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../VI/index.html">6 Zusammenfassung</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../VI/index.html#ausblick">6.1 Ausblick</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VI/index.html#mogliche-weiterentwicklungen">6.2 Mögliche Weiterentwicklungen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VI/index.html#fazit">6.3 Fazit</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Abkürzungsverzeichnis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html#glossar">Glossar</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html#online-ressourcen">Online Ressourcen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">Bibliography</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">Projektarbeit</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="../index.html">Docs</a> &raquo;</li>
  <li><a href="">3 Design</a></li>
  
</ul>
<hr/>

          
  <div class="section" id="design">
<h1>3 Design<a class="headerlink" href="#design" title="Permalink to this headline">¶</a></h1>
<blockquote class="epigraph">
<div><div class="line-block">
<div class="line"><em>If the implementation is hard to explain, it's a bad idea.</em></div>
<div class="line"><em>If the implementation is easy to explain, it</em> may <em>be a good idea.</em></div>
</div>
<p class="attribution">&mdash;<em>Zen of Python</em>, <tt class="docutils literal"><span class="pre">import</span> <span class="pre">this</span></tt></p>
</div></blockquote>
<div class="section" id="architektur">
<h2>3.1 Architektur<a class="headerlink" href="#architektur" title="Permalink to this headline">¶</a></h2>
<p>Baukastenprinzip</p>
</div>
<div class="section" id="algorithmik">
<h2>3.2 Algorithmik<a class="headerlink" href="#algorithmik" title="Permalink to this headline">¶</a></h2>
<p>Die genaue Beschreibung der Algorithmik wird in der Bachelorarbeit detailliert
besprochen. Hier nur ein kurzer Überblick was mit welchem Ziel implementiert
wird.</p>
<div class="section" id="grunduberlegungen">
<h3>3.2.1 Grundüberlegungen<a class="headerlink" href="#grunduberlegungen" title="Permalink to this headline">¶</a></h3>
<p>Um die Distanzen zu speichern wird bei vielen Datamining-Projekten eine
Distanzmatrix genutzt - also eine quadratische Dreiecksmatrix in der
die Distanzen von jedem Dokument zu jedem anderen gespeichert werden.</p>
<p>Da das System auch für eine sehr hohe Anzahl von Songs funktionieren soll
schließt sich die Benutzung einer Distanzmatrix allerdings von alleine aus.
Nehmen wir an ein Benutzer möchte seine Musiksammlung mit 40.000 Liedern
importieren, so bräuchten wir soviele Felder in der Matrix:</p>
<div class="math">
\[\frac{(40.000^2 - 40.0000)}{2} = 799.980.000\]</div>
<p>Nimmt man für jedes Feld einen günstig geschätzten Speicherverbrauch von 4 Byte
an, so bräuchte man allein für die Distanzmatrix hier aufgerundet 3 Gigabyte
Hauptspeicher - was selbst für diesen günstig geschätzten Fall unakzeptabel
wäre. Auch eine Sparsematrix wäre hier kaum sinnvoll da in allen Fällen ja etwas
weniger als die Hälfte aller Felder befüllt ist.</p>
<p>Man muss also versuchen nur eine bestimmte Anzahl von Distanzen für einen Song
zu speichern - vorzugsweise eine Menge von Songs mit der kleinsten
<a class="reference internal" href="../appendix.html#term-distanz"><em class="xref std std-term">Distanz</em></a>. Als geeignete Datenstruktur erscheint hier ein Graph - die
Knoten desselben sind die Songs und die Kanten dazwischen die Distanzen.</p>
<p>TODO: Erläuterung: kNN Graph</p>
</div>
<div class="section" id="graphenoperationen">
<h3>3.2.2 Graphenoperationen<a class="headerlink" href="#graphenoperationen" title="Permalink to this headline">¶</a></h3>
<p>Angenommen jeder <a class="reference internal" href="../appendix.html#term-song"><em class="xref std std-term">Song</em></a> ist eine Mapping von Attributen zu Werten, so
können wir für jedes Attribut eine <a class="reference internal" href="../appendix.html#term-distanzfunktion"><em class="xref std std-term">Distanzfunktion</em></a> definieren. Nach
einer bestimmten Gewichtung können wir dann die einzelnen Distanzen
zusammenrechnen und zu einer gemeinsamen <a class="reference internal" href="../appendix.html#term-distanz"><em class="xref std std-term">Distanz</em></a> zusammenschmelzen.</p>
<p>Um mit unseren Graphen arbeiten zu können müssen wir einige Operationen auf ihm
definieren:</p>
<div class="section" id="rebuild">
<h4>3.2.2.1 <tt class="docutils literal"><span class="pre">rebuild</span></tt><a class="headerlink" href="#rebuild" title="Permalink to this headline">¶</a></h4>
<p>Bevor der Graph benutzt werden kann muss er natürlich erstmal aufgebaut werden.
Der naive Ansatz wäre dabei für jeden Song die Distanzen zu jedem anderen Song
zu berechnen - dies hätte einen Aufwand von <span class="math">\(O(n^2)\)</span> zur Folge. Dies ist
aus oben genannten Gründen ebenfalls kaum wünschenswert.</p>
<p>Deshalb kann die <tt class="docutils literal"><span class="pre">rebuild</span></tt> keinen <em>perfekten</em> Graph erzeugen sondern muss für
hinreichend große Datenmengen auf eine Approximation zurückgreifen.</p>
<p>Nach dem Aufbau sollte ein ungerichteter Graph dabei herauskommen im dem
idealerweise jeder Knoten vom jedem anderen Knoten erreichbar ist - es sollten
also keine <em>Inseln</em> dabei entstehen. Es gibt keine maximale Anzahl von Nachbarn
die ein Song haben darf - lediglich einen <em>Richtwert</em>.</p>
</div>
<div class="section" id="add">
<h4>3.2.2.2 <tt class="docutils literal"><span class="pre">add</span></tt><a class="headerlink" href="#add" title="Permalink to this headline">¶</a></h4>
<p>Füge einen einzelnen Song zu dem Graphen hinzu, verbinde ihn aber noch nicht.
Dies ist die bevorzugte Operation um viele Songs dem Graphen hinzuzufügen -
beispielsweise am Anfang - da das Verbinden später in einem <tt class="docutils literal"><span class="pre">rebuild</span></tt>-Schritt
erledigt werden kann.</p>
</div>
<div class="section" id="insert">
<h4>3.2.2.3 <tt class="docutils literal"><span class="pre">insert</span></tt><a class="headerlink" href="#insert" title="Permalink to this headline">¶</a></h4>
<p>Fügen einen einzelnen Song zu dem Graphen hinzu und verbinde ihn. Suche dazu
erst eine passende Stelle in der er eingepasst wird.</p>
</div>
<div class="section" id="remove">
<h4>3.2.2.4 <tt class="docutils literal"><span class="pre">remove</span></tt><a class="headerlink" href="#remove" title="Permalink to this headline">¶</a></h4>
<p>Entferne einen einzelnen Song aus dem Graphen und versuche das entstandene
<em>Loch</em> zu flicken indem die Nachbarn des entfernte Songs untereinander
verkuppelt werden.</p>
</div>
<div class="section" id="modify">
<h4>3.2.2.5 <tt class="docutils literal"><span class="pre">modify</span></tt><a class="headerlink" href="#modify" title="Permalink to this headline">¶</a></h4>
<p>Manchmal ist es nötig das Attribut eines einzelnen Songs - wie beispielsweise
das stark vom Benutzer abhängige <strong>Rating</strong> - zu ändern. Dabei wird der Song
erst mittels <tt class="docutils literal"><span class="pre">remove</span></tt> entfernt, die Attribute werden angepasst und er wird
mittels <tt class="docutils literal"><span class="pre">insert</span></tt> wieder eingefügt.</p>
</div>
<div class="section" id="fixing">
<h4>3.2.2.6 <tt class="docutils literal"><span class="pre">fixing</span></tt><a class="headerlink" href="#fixing" title="Permalink to this headline">¶</a></h4>
<p>Durch das Löschen und Hinzufügen von Songs können <em>Einbahnstraßen</em> im Graphen
entstehen. Durch dem nachgelagerten <em>fixing</em> Schritt werden diese, nach
bestimmten Regeln, entweder entfernt oder in bidirektionale Verbindungen
umgebaut.</p>
</div>
</div>
<div class="section" id="ausstellen-von-empfehlungen">
<h3>3.2.3 Ausstellen von Empfehlungen<a class="headerlink" href="#ausstellen-von-empfehlungen" title="Permalink to this headline">¶</a></h3>
<p>Das Ausstellen von Empfehlungen wird durch das Traversieren des Graphen
mittelseiner Breitensuche erledigt. Dabei wird der Ursprung durch ein
sogenannten <a class="reference internal" href="../appendix.html#term-seedsong"><em class="xref std std-term">Seedsong</em></a> bestimmt. Anschaulich wäre der Seedsong bei einer
Anfrage wie ,,10 ähnliche Songs zu <em>The Beatles - Yellow Submarine</em> `` eben
dieser Song.</p>
<p>Aus der funktionalen Programmierung wurde dabei das Konzept der <em>Infinite
Iterators</em> übernommen: Anstatt eine bestimmte Anzahl von Empfehlungen als Liste
wird ein Versprechen herauzugeben die Empfehlungen genau dann zu berechnen wenn
sie gebraucht werden (<em>Layz Evaluation</em>). Dadurch ist auch die Zahl der
zu gebenden Empfehlungen variabel - was sehr nützlich beim Erstellen einer
dynamischen Playlist ist.</p>
<p>Es können auch mehrere Seedsongs verwendet werden - dann werden die einzelnen
<em>Iteratoren</em> im Reißschlußverfahren verwebt.</p>
</div>
<div class="section" id="filtern-von-empfehlungen">
<h3>3.2.4 Filtern von Empfehlungen<a class="headerlink" href="#filtern-von-empfehlungen" title="Permalink to this headline">¶</a></h3>
<p>Oft es nötig die gegebenen Empfehlungen noch zusätzlich zu filtern. Das hat den
simplen Grund das im Graphen einzelne Alben einzelne <em>Cluster</em> bilden - die
Lieder auf einem Album sind unter sich sehr ähnlich. Da man aber vermeiden
möchte dass zu einem Seed-Song ein Lied vom selben Album oder gar selben
Künstler empfohlen wird müssen diese beim Iterieren über den Graphen ausgesiebt
werden.</p>
<p>Dazu werden die zuletzt gegebenen Empfehlunge betrachtet - ist beispielsweise in
den letzten 5 Empfehlungen der gleiche Artist bereits vorhanden so wird die
Empefhlunge gesiebt.</p>
</div>
<div class="section" id="lernen-durch-die-history">
<h3>3.2.5 Lernen durch die History<a class="headerlink" href="#lernen-durch-die-history" title="Permalink to this headline">¶</a></h3>
<p>Nur eine bestimmte Anzahl von Regeln wird gespeichert - zuviele Regeln würden
<em>historische Altlasten</em> immer weiter mitschleppen und der aktuelle Geschmack des
Benutzers würde nicht widergespiegelt werden.</p>
</div>
</div>
<div class="section" id="integration-von-libmunin-in-die-umwelt">
<h2>3.3 Integration von libmunin in die Umwelt<a class="headerlink" href="#integration-von-libmunin-in-die-umwelt" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/integration.svg"><img alt="Integrationsübersicht" src="../../_images/integration.svg" width="100%" /></a>
<p class="caption">Wie fügt sich libmunin in seine Umgebung ein?</p>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/munin_startup.svg"><img alt="Allgemeine Benutzung" src="../../_images/munin_startup.svg" width="75%" /></a>
<p class="caption">Allgemeine Benutzung von libmunin</p>
</div>
</div>
<div class="section" id="periphere-komponenten">
<h2>3.4 Periphere Komponenten<a class="headerlink" href="#periphere-komponenten" title="Permalink to this headline">¶</a></h2>
<p>Jetzt wissen wir wie unsere interne Datenstruktur aussieht und wie diese sich in
die Umwelt einfügen muss. Wie also kann man die Schnittstellen zwischen beiden
bilden?</p>
<ul class="simple">
<li>Musikdaten müssen importiert werden</li>
<li>...</li>
</ul>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/arch.svg"><img alt="Architekturübersicht." src="../../_images/arch.svg" width="100%" /></a>
<p class="caption">Grobe Übersicht über die Architektur.</p>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/provider_process.svg"><img alt="Der Werdegang eines Attributes" src="../../_images/provider_process.svg" width="75%" /></a>
<p class="caption">Wie wird ein einzelnes Attribut verarbeitet?</p>
</div>
</div>
<div class="section" id="entwurf-der-software">
<h2>3.5 Entwurf der Software<a class="headerlink" href="#entwurf-der-software" title="Permalink to this headline">¶</a></h2>
<p>Da wir jetzt wissen aus welchen Komponenten unsere Software besteht können wir uns
Gedanken darüber machen wie diese einzelnen Teile konkret aussehen.
Im folgenden werden die ,, <em>Hauptakteure</em> '' der Software vorgestellt:</p>
<div class="section" id="maske">
<h3>3.5.1 Maske<a class="headerlink" href="#maske" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Beschreibung der Musikdatenbank die von außen reinkommt.</li>
<li>Besteht aus einem Mapping, bei dem die keys den Namen eines Attributes
festlegt das ein einzelner Song haben wird, das zugehörige Value legt
den dafür zuständigen Provider, die zuständige Distanzfunktion und
wie stark dieses Attribut des Songs gewichtet werden soll.</li>
</ul>
</div>
<div class="section" id="session">
<h3>3.5.2 Session<a class="headerlink" href="#session" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>API Entry für alle Funktionen</li>
<li>Speichert songs ab</li>
<li>Speichert die Maske</li>
</ul>
</div>
<div class="section" id="song">
<h3>3.5.3 Song<a class="headerlink" href="#song" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Speichert nur values, keine keys.</li>
</ul>
</div>
<div class="section" id="distance">
<h3>3.5.4 Distance<a class="headerlink" href="#distance" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Speichert alle Teildistanzen, statt einzelne weighted Distanz.</li>
<li>Macht 'explanations' leicht.</li>
</ul>
</div>
</div>
</div>


          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="../IV/index.html" class="btn btn-neutral float-right" title="4 Implementierung"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../II/index.html" class="btn btn-neutral" title="2 Einstieg"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <p>
      &copy; Copyright by Christopher Pahl, 2013-2014..
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>