

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>7 Demoanwendungen &mdash; Projektarbeit</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Projektarbeit" href="../../index.html"/>
        <link rel="next" title="8 Zusammenfassung" href="../VIII/index.html"/>
        <link rel="prev" title="6 Implementierung" href="../VI/index.html"/>

<!-- Include all CSS and JS files, let's you use your own theme. -->

<link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
<script type="text/javascript">
	function endsWith(str, suffix) {
	    return str.indexOf(suffix, str.length - suffix.length) !== -1;
	}

    $(document).ready(function() {
    	var im, imsrc;
    	$('img').each(function() {
    		im = $(this);
    		imsrc = im.attr('src');
    		imalt = im.attr('alt');
    		if (endsWith(imsrc, 'svg')) {
    			im.wrap($('<a>').attr({'href': imsrc, 'title': imalt}).addClass('svglink'));
    		}
    	});

    	$('a.svglink').colorbox({
    		'width': '95%',
    		'height': '95%',
    		'photo': true});
    });
</script>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> Projektarbeit</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../abstract.html">Abstract</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acknowledgements.html">Danksagung</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dedication.html">Widmung</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../I/index.html">1 Einleitung</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../I/index.html#motivation">1.1 Motivation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../I/index.html#projektziel">1.2 Projektziel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../I/index.html#projektlizenz">1.3 Projektlizenz</a></li>
<li class="toctree-l2"><a class="reference internal" href="../I/index.html#namensgebung">1.4 Namensgebung</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../II/index.html">2 Begriffsdefinitionen</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../II/index.html#fachbegriffe">2.1 Fachbegriffe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../II/index.html#kontextspezifische-fachbegriffe">2.2 Kontextspezifische Fachbegriffe</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../III/index.html">3 Stand der Metadatenpflege</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../III/index.html#metadatenarten-und-quellen">3.1 Metadatenarten und Quellen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../III/index.html#software-und-metadatenformate">3.2 Software und Metadatenformate</a></li>
<li class="toctree-l2"><a class="reference internal" href="../III/index.html#probleme-bei-der-metadatenpflege">3.3 Probleme bei der Metadatenpflege</a></li>
<li class="toctree-l2"><a class="reference internal" href="../III/index.html#probleme-bei-der-metadatensuche">3.4 Probleme bei der Metadatensuche</a></li>
<li class="toctree-l2"><a class="reference internal" href="../III/index.html#anforderungen-an-das-projekt">3.5 Anforderungen an das Projekt</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../IV/index.html">4 Softwarespezifikation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../IV/index.html#anforderungen-an-die-bibliothek">4.1 Anforderungen an die Bibliothek</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../V/index.html">5 Entwurf</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../V/index.html#grunduberlegungen">5.1 Grundüberlegungen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../V/index.html#libhugin-architektur-uberblick">5.2 Libhugin Architektur&ndash;Überblick</a></li>
<li class="toctree-l2"><a class="reference internal" href="../V/index.html#bibliothek-dateistruktur">5.3 Bibliothek Dateistruktur</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../VI/index.html">6 Implementierung</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../VI/index.html#libhugin-harvest-api">6.1 Libhugin&ndash;harvest API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VI/index.html#libhugin-harvest-plugins">6.2 Libhugin&ndash;harvest Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VI/index.html#libhugin-analyze-api">6.3 Libhugin&ndash;analyze API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VI/index.html#libhugin-analyze-plugins">6.4 Libhugin&ndash;analyze Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VI/index.html#verschiedenes">6.5 Verschiedenes</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">7 Demoanwendungen</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#libhugin-harvest-cli-tool-geri">7.1 Libhugin&ndash;harvest CLI&ndash;Tool Geri</a></li>
<li class="toctree-l2"><a class="reference internal" href="#libhugin-analyze-cli-tool-freki">7.2 Libhugin&ndash;analyze CLI&ndash;Tool Freki</a></li>
<li class="toctree-l2"><a class="reference internal" href="#xbmc-plugin-integration">7.3 XBMC Plugin Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#weitere-einsatzmoglichkeiten">7.4 Weitere Einsatzmöglichkeiten</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../VIII/index.html">8 Zusammenfassung</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../VIII/index.html#aktueller-stand">8.1 Aktueller Stand</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VIII/index.html#erfullung-der-gesetzten-anforderungen">8.2 Erfüllung der gesetzten Anforderungen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VIII/index.html#defizite-und-verbesserungen">8.3 Defizite und Verbesserungen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VIII/index.html#denkbare-weiterentwicklungen">8.4 Denkbare Weiterentwicklungen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VIII/index.html#abschlieszendes-fazit">8.5 Abschließendes Fazit</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Helferfunktion für NFO&ndash;Dateien</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html#xbmc-scraper-plugin">XBMC&ndash;Scraper&ndash;Plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html#libhugin-xbmc-proxy">Libhugin XBMC Proxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html#projektstatistik-cloc">Projektstatistik (<em>cloc</em>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zzz_bibliography.html">Bibliographie</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zzz_bibliography.html#weblink-verzeichnis">Weblink Verzeichnis</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Projektarbeit</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>7 Demoanwendungen</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../../_sources/rst/VII/index.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="demoanwendungen">
<h1>7 Demoanwendungen<a class="headerlink" href="#demoanwendungen" title="Permalink to this headline">¶</a></h1>
<p>Die vorgestellten CLI&ndash;Tools stellen nur einen kleinen Ausschnitt der
Fähigkeiten der Bibliothek dar. Die Bibliothek selbst ist um fast jede denkbare
Funktionalität der Metadatenaufbereitung erweiterbar. Die Algorithmik der
verwendeten Plugins und Funktionen ist Bestandteil der Bachelorarbeit.</p>
<div class="section" id="libhugin-harvest-cli-tool-geri">
<h2>7.1 Libhugin&ndash;harvest CLI&ndash;Tool Geri<a class="headerlink" href="#libhugin-harvest-cli-tool-geri" title="Permalink to this headline">¶</a></h2>
<p>Geri ist eine CLI&ndash;Anwendung, die zu Demozwecken, aber auch als Testwerkzeug für
die <em>libhugin&ndash;harvest</em> Bibliothek verwendet werden kann.</p>
<div class="section" id="ubersicht-der-optionen">
<h3>7.1.1 Übersicht der Optionen<a class="headerlink" href="#ubersicht-der-optionen" title="Permalink to this headline">¶</a></h3>
<p>Ein Überblick über die Funktionalität und die möglichen Optionen zeigt die Hilfe
des Tools:</p>
<div class="highlight-python"><div class="highlight"><pre>$ geri -h
Libhugin commandline tool.

Usage:
  geri (-t &lt;title&gt;) [-y &lt;year&gt;] [-a &lt;amount&gt;] [-p &lt;providers&gt;...] [-c &lt;converter&gt;] \
       [-o &lt;path&gt;] [-l &lt;lang&gt;] [-P &lt;pm&gt;]  [-r &lt;processor&gt;] [-f &lt;pfile&gt;] [-L]
  geri (-i &lt;imdbid&gt;) [-p &lt;providers&gt;...] [-c &lt;converter&gt;] [-o &lt;path&gt;] [-l &lt;lang&gt;] \
       [-r &lt;processor&gt;] [-f &lt;pfile&gt;] [-L]
  geri (-n &lt;name&gt;) [--items &lt;num&gt;] [-p &lt;providers&gt;...] [-c &lt;converter&gt;] [-o &lt;path&gt;]
  geri list-provider
  geri list-converter
  geri list-postprocessor
  geri -h | --help
  geri --version

 Options:
   -t, --title=&lt;title&gt;               Movie title.
   -y, --year=&lt;year&gt;                 Year of movie release date.
   -n, --name=&lt;name&gt;                 Person name.
   -i, --imdbid=&lt;imdbid&gt;             A imdbid prefixed with tt.
   -p, --providers=&lt;providers&gt;       Providers to be used.
   -c, --convert=&lt;converter&gt;         Converter to be used.
   -r, --postprocess=&lt;processor&gt;     Postprocessor to be used.
   -o, --output=&lt;path&gt;               Output folder for converter result [default: /tmp].
   -a, --amount=&lt;amount&gt;             Amount of items to retrieve.
   -l, --language=&lt;lang&gt;             Language in ISO 639-1 [default: de]
   -P, --predator-mode               The magic &#39;fuzzy search&#39; mode.
   -L, --lookup-mode                 Does a title -&gt; imdbid lookup.
   -f, --profile-file=&lt;pfile&gt;        User specified profile.
   -v, --version                     Show version.
   -h, --help                        Show this screen.
</pre></div>
</div>
<p>Das Tool eignet sich neben dem Einsatz als Testwerkzeug für die Bibliothek
auch gut für Skripte und somit für automatische Verarbeitung großer
Datenmengen, siehe auch <em>Scripting Tasks</em> <a class="reference internal" href="#ref-scripting-tasks">7.4</a>.</p>
</div>
<div class="section" id="filmsuche">
<h3>7.1.2 Filmsuche<a class="headerlink" href="#filmsuche" title="Permalink to this headline">¶</a></h3>
<p>Ein Film kann über den Titel oder über die <em>IMDb&ndash;ID</em> gesucht werden. Hier gibt
es die Möglichkeit, <em>Geri</em> auch bestimmte Provider, Converter, Sprache und
Postprocessor&ndash;Plugins anzugeben.</p>
<p>Um das Ausgabeformat zu konfigurieren, gibt es im <em>Geri</em>&ndash;Ordner eine
<tt class="docutils literal"><span class="pre">movie.mask</span></tt>&ndash; und <tt class="docutils literal"><span class="pre">person.mask</span></tt>&ndash;Datei. Über diese Dateien kann das
Ausgabeformat definiert werden. Die Syntax ist einfach. Um Attribute
darzustellen, werden diese einfach in geschweifte Klammern geschrieben. Das
<em>num</em>&ndash;Attribut gibt Geri die Möglichkeit, die Resultate durchzunummerieren.</p>
<p>Folgend die Definition vom Ausgabeformat für die <tt class="docutils literal"><span class="pre">movie.mask</span></tt>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">echo</span> <span class="s2">&quot;{num}) {title} ({year}), IMDBid: {imdbid} Provider: {provider} \</span>
<span class="s2">\nInhalt: {plot}&quot;</span> &gt; tools/geri/movie.mask
</pre></div>
</div>
<p>Standardsuche nach Titel mit der Begrenzung auf fünf Ergebnisse:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>geri --title <span class="s2">&quot;sin city&quot;</span> --amount<span class="o">=</span>5
1<span class="o">)</span> Sin City <span class="o">(</span>2005<span class="o">)</span>, IMDBid: tt0401792, Provider: TMDBMovie &lt;picture, movie&gt;
Inhalt: Basin City, genannt Sin City, ist ein düsteres Metropolis, in dem nichts
und niemand wirklich sicher ist, in dem die Gewalt allgegenwärtig ist <span class="o">[</span>...<span class="o">]</span>

2<span class="o">)</span> Sin City <span class="o">(</span>2005<span class="o">)</span>, IMDBid: tt0401792, Provider: OFDBMovie &lt;movie&gt;
Inhalt: Basin City, genannt Sin City, ist ein düsteres Metropolis, in dem nichts
und niemand wirklich sicher ist, in dem die Gewalt allgegenwärtig ist <span class="o">[</span>...<span class="o">]</span>

3<span class="o">)</span> Sin City <span class="o">(</span>2005<span class="o">)</span>, IMDBid: None, Provider: VIDEOBUSTERMovie &lt;movie&gt;
Inhalt: Willkommen in Sin City.  Diese Stadt begrüßt die Harten, die Korrupten,
die mit den gebrochenen Herzen.  Einer von ihnen ist Marv <span class="o">[</span>...<span class="o">]</span>

4<span class="o">)</span> Sin City <span class="o">(</span>2005<span class="o">)</span>, IMDBid: tt0401792, Provider: OMDBMovie &lt;movie&gt;
Inhalt: Four tales of crime adapted from Frank Millers popular comics focusing
around a muscular brute whos looking <span class="k">for </span>the person responsible <span class="k">for </span>the <span class="o">[</span>...<span class="o">]</span>

5<span class="o">)</span> Sin City <span class="o">(</span>2005<span class="o">)</span>, IMDBid: None, Provider: FILMSTARTSMovie &lt;movie&gt;
Inhalt: <span class="s2">&quot;Sin City&quot;</span> enthält drei lose verbundene und ineinander verschachtelt
erzählte Episoden: Los geht es mit Hartigan <span class="o">(</span>Bruce Willis<span class="o">)</span> - einem Cop <span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<p>Die Suche kann, wie die Optionen des Tools zeigen, feingranularer konfiguriert
werden.  Es würde jedoch den Rahmen sprengen alle Optionen zu zeigen.</p>
<p><strong>Unschärfesuche:</strong>
Ein weiteres nennenswertes Feature ist die Unschärfesuche.  Die getesteten Tools
(siehe Abbildung <a href="../III/index.html#table-movietools">3.7</a>) sind nicht in der Lage, Filme zu
finden, wenn der Titel nicht exakt geschrieben ist. Das trifft auch in der
Standardkonfiguration für <em>libhugin</em> zu, weil hier die Onlinequellen, auf die
zugegriffen wird, exakte Suchbegriffe erwarten.</p>
<p>Folgendes findet keine Ergebnisse, weil hier ,,Matrix&quot; falsch geschrieben ist:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>geri --title <span class="s2">&quot;the marix&quot;</span> --amount<span class="o">=</span>2
</pre></div>
</div>
<p>Mit dem aktivierten <em>Predator&ndash;Mode</em> findet <em>Geri</em> ,,providerübergreifend&quot; den
gesuchten Film.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>geri --title <span class="s2">&quot;the marix&quot;</span> --amount<span class="o">=</span>2 --predator-mode
1<span class="o">)</span> Matrix <span class="o">(</span>1999<span class="o">)</span>, IMDBid: tt0133093, Provider: TMDBMovie &lt;movie, picture&gt;
Inhalt: Der Hacker Neo wird übers Internet von einer geheimnisvollen Untergrund-
Organisation kontaktiert.  Der Kopf der Gruppe - der gesuchte Terrorist <span class="o">[</span>...<span class="o">]</span>

2<span class="o">)</span> Matrix <span class="o">(</span>1999<span class="o">)</span>, IMDBid: tt0133093, Provider: OFDBMovie &lt;movie&gt;
Inhalt: Was ist die Matrix?  Diese Frage quält den Hacker Neo seit Jahren.  Er
führt ein Doppelleben - tagsüber ist er Thomas Anderson und arbeitet in <span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<p><strong>Suche über IMDb&ndash;ID:</strong>
Normalerweise kann nur über die <em>IMDb&ndash;ID</em> gesucht werden, wenn es die jeweilige
Onlinequelle unterstützt. Deswegen funktioniert standardmäßig die Suche bei
Providern wie <em>Filmstarts</em> oder <em>Videobuster</em> nicht. <em>Libhugin</em> schafft hier
Abhilfe mit einer providerübergreifenden <em>IMDb&ndash;ID</em>&ndash;Suche.</p>
<p>Im folgenden Beispiel findet der Provider <em>videobustermovie</em> keine Ergebnisse,
weil die Onlinequelle die Suche über <em>IMDb&ndash;ID</em> nicht unterstützt:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>geri --imdbid <span class="s2">&quot;tt0133093&quot;</span> -p videobustermovie
</pre></div>
</div>
<p>Mit dem <em>Lookup&ndash;Mode</em> funktioniert auch die Suche über <em>IMDb&ndash;ID</em> bei
Onlinequellen, die eine Suche über die <em>IMDb&ndash;ID</em> nicht unterstützen:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>geri --imdbid <span class="s2">&quot;tt0133093&quot;</span> -p videobustermovie --lookup-mode
1<span class="o">)</span> Matrix <span class="o">(</span>1999<span class="o">)</span>, IMDBid: None, Provider: VIDEOBUSTERMovie &lt;movie&gt;

Inhalt: Der Hacker Neo <span class="o">(</span>Keanu Reeves<span class="o">)</span> wird übers Internet von einer
geheimnisvollen Untergrund--Organisation kontaktiert.  Der Kopf der <span class="o">[</span>...<span class="o">]</span>

<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="einsatz-von-plugins">
<h3>7.1.3 Einsatz von Plugins<a class="headerlink" href="#einsatz-von-plugins" title="Permalink to this headline">¶</a></h3>
<p><strong>Einsatz von Postprocessor&ndash;Plugins:</strong>
Das <em>Compose</em>&ndash;Plugin ermöglicht dem Benutzer, das Ergebnis nach seinen
Bedürfnissen zu komponieren und besitzt die Fähigkeit, das normalisierte Genre
mehrerer Provider zusammenzuführen.</p>
<p>Zuerst wird die <tt class="docutils literal"><span class="pre">movie.mask</span></tt> angepasst, damit das Genre und das normalisierte
Genre zu sehen ist:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">echo</span> <span class="s2">&quot;{num}) {title} ({year}), IMDBid: {imdbid}, Provider: {provider}\</span>
<span class="s2">\nGenre: {genre}\nGenre normalisiert: {genre_norm} \nInhalt: {plot}&quot;</span> &gt; movie.mask
</pre></div>
</div>
<p>Des Weiteren wird ein benutzerdefiniertes <em>userprofile</em> erstellt, welches dem
<em>Compose</em>&ndash;Plugin mitteilt, wie das Ergebnis zusammengebaut werden soll. In
unserem Beispiel wird ein Profil erstellt, welches standardmäßig den TMDb
Provider nimmt und die Inhaltsbeschreibung durch die vom OFDb&ndash;Provider
austauscht.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">echo</span> <span class="s2">&quot;{&#39;default&#39;:[&#39;tmdbmovie&#39;], &#39;plot&#39;:[&#39;ofdbmovie&#39;]}&quot;</span> &gt; userprofile
</pre></div>
</div>
<p>Suche nach dem Film <em>,,Feuchgebiete (2013)&quot;</em> mit Einsatz vom <em>Compose</em>&ndash;Plugin
und Beschränkung auf die zwei Provider TMDb und OFDb:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>geri --title <span class="s2">&quot;feuchtgebiete&quot;</span> -r compose -f userprofile -p tmdbmovie,ofdbmovie -a2
1<span class="o">)</span> Feuchtgebiete <span class="o">(</span>2013<span class="o">)</span>, IMDBid: tt2524674, Provider: TMDBMovie &lt;movie, picture&gt;
Genre: <span class="o">[</span><span class="s1">&#39;Komödie&#39;</span>, <span class="s1">&#39;Drama&#39;</span><span class="o">]</span>
Genre normalisiert: <span class="o">[</span><span class="s1">&#39;Komödie&#39;</span>, <span class="s1">&#39;Drama&#39;</span><span class="o">]</span>
Inhalt: Helen ist eine Herausforderung für ihre Mutter und ihren Vater, die
getrennt leben und geschieden sind.  Trotzdem wünscht sich Helen nichts <span class="o">[</span>...<span class="o">]</span>

2<span class="o">)</span> Feuchtgebiete <span class="o">(</span>2013<span class="o">)</span>, IMDBid: tt2524674, Provider: OFDBMovie &lt;movie&gt;
Genre: <span class="o">[</span><span class="s1">&#39;Erotik&#39;</span><span class="o">]</span>
Genre normalisiert: <span class="o">[</span><span class="s1">&#39;Erotik&#39;</span><span class="o">]</span>
Inhalt: Die 18jährige Helen <span class="o">(</span>Carla Juri<span class="o">)</span> hat schon seit ihrer Kindheit
Hämorrhoiden, hat diesen Fakt aber immer verheimlicht, da sie glaubte <span class="o">[</span>...<span class="o">]</span>

3<span class="o">)</span> Feuchtgebiete <span class="o">(</span>2013<span class="o">)</span>, IMDBid: tt2524674, Provider: Compose
Genre: <span class="o">[</span><span class="s1">&#39;Komödie&#39;</span>, <span class="s1">&#39;Drama&#39;</span><span class="o">]</span>
Genre normalisiert: <span class="o">{</span><span class="s1">&#39;Erotik&#39;</span>, <span class="s1">&#39;Drama&#39;</span>, <span class="s1">&#39;Komödie&#39;</span><span class="o">}</span>
Inhalt: Die 18jährige Helen <span class="o">(</span>Carla Juri<span class="o">)</span> hat schon seit ihrer Kindheit
Hämorrhoiden, hat diesen Fakt aber immer verheimlicht, da sie glaubte <span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<p>Das dritte Resultat in der Ausgabe wurde vom Provider ,,Compose&quot; generiert,
dies ist das komponierte Ergebnis. Hier wurde das normalisierte Genre
verschmolzen. Dieses Feature macht das gepflegte Genre in den Metadaten
feingranularer und lässt im Beispiel auch besser vermuten, ob ein Film für
Kinder geeignet ist oder nicht.</p>
</div>
</div>
<div class="section" id="libhugin-analyze-cli-tool-freki">
<span id="ref-freki"></span><h2>7.2 Libhugin&ndash;analyze CLI&ndash;Tool Freki<a class="headerlink" href="#libhugin-analyze-cli-tool-freki" title="Permalink to this headline">¶</a></h2>
<p>Freki ist für Demonstrationszwecke und das Testen der <em>libhugin&ndash;analyze</em>
Bibliothek entwickelt worden.</p>
<div class="section" id="id1">
<h3>7.2.1 Übersicht der Optionen<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Folgend zum Überblick der Funktionalität die Hilfe des Tools Freki:</p>
<div class="highlight-python"><div class="highlight"><pre>$ freki -h
Libhugin--analyzer commandline testtool.

Usage:
  freki create &lt;database&gt; &lt;datapath&gt;
  freki list &lt;database&gt;
  freki list &lt;database&gt; attr &lt;attr&gt;
  freki list &lt;database&gt; analyzerdata
  freki list-modifier | list-analyzer
  freki (analyze | modify) plugin &lt;plugin&gt; &lt;database&gt;
  freki (analyze | modify) plugin &lt;plugin&gt; pluginattrs &lt;pluginattrs&gt; &lt;database&gt;
  freki export &lt;database&gt;
  freki -h | --help
  freki --version

Options:
  -v, --version                     Show version.
  -h, --help                        Show this screen.
</pre></div>
</div>
</div>
<div class="section" id="erstellen-einer-datenbank">
<h3>7.2.2 Erstellen einer Datenbank<a class="headerlink" href="#erstellen-einer-datenbank" title="Permalink to this headline">¶</a></h3>
<p>Freki erlaubt dem Benutzer, eine <em>Datenbank</em> aus externen Metadaten zu
generieren. Auf dieser Datenbank kann man folgend mit den Analyzer- und
Modifier&ndash;Plugins , die <em>libhugin&ndash;analyze</em> anbietet, arbeiten, um
beispielsweise seine Metadaten zu säubern. Nach der Bearbeitung können die
<em>neuen</em> Metadaten in die externen Metadaten&ndash;Dateien exportiert werden.</p>
<p>Folgend eine kurze Demonstration des CLI&ndash;Tools.</p>
<p><strong>Erstellen einer Datenbank:</strong>
Hierzu wird die Helferfunktion (siehe Anhang <a class="reference internal" href="../appendix.html#ref-attachment-a"><em>Helferfunktion für NFO&ndash;Dateien</em></a>) verwendet.
Im Ordner <em>movies</em> befinden sich zwei Filme, die mit dem XBMC mit Metadaten
versorgt wurden.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>freki create mydb.db ./movies
</pre></div>
</div>
<p><strong>Datenbank anzeigen:</strong>
Mit <em>list</em> kann der Inhalt der Datenbank angezeigt werden. Die
Inhaltsbeschreibung wurde hier wegen der Übersichtlichkeit gekürzt.  Wie die
Ausgabe zeigt, wurden die Attribute <em>title</em>, <em>originaltitle</em>, <em>genre</em>,
<em>director</em>, <em>year</em> und <em>plot</em> eingelesen.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>freki list mydb.db
0<span class="o">)</span> All Good Things <span class="o">(</span>2010<span class="o">)</span>
<span class="o">{</span><span class="s1">&#39;director&#39;</span>: <span class="s1">&#39;Andrew Jarecki&#39;</span>,
 <span class="s1">&#39;genre&#39;</span>: <span class="o">[</span><span class="s1">&#39;Drama&#39;</span>, <span class="s1">&#39;Mystery&#39;</span>, <span class="s1">&#39;Suspense&#39;</span>, <span class="s1">&#39;Thriller&#39;</span><span class="o">]</span>,
 <span class="s1">&#39;originaltitle&#39;</span>: <span class="s1">&#39;All Good Things&#39;</span>,
 <span class="s1">&#39;plot&#39;</span>: <span class="s1">&#39;Historia ambientada en los años 80 y centrada en un heredero de</span>
<span class="s1"> una dinastía de Nueva York que se enamora de una chica de otra clase</span>
<span class="s1"> [..]&#39;</span>,
 <span class="s1">&#39;title&#39;</span>: <span class="s1">&#39;All Beauty Must Die&#39;</span>,
 <span class="s1">&#39;year&#39;</span>: <span class="s1">&#39;2010&#39;</span><span class="o">}</span>

1<span class="o">)</span> Alien³ <span class="o">(</span>1992<span class="o">)</span>
<span class="o">{</span><span class="s1">&#39;director&#39;</span>: <span class="s1">&#39;David Fincher&#39;</span>,
 <span class="s1">&#39;genre&#39;</span>: <span class="o">[</span><span class="s1">&#39;Action&#39;</span>, <span class="s1">&#39;Horror&#39;</span>, <span class="s1">&#39;Science Fiction&#39;</span><span class="o">]</span>,
 <span class="s1">&#39;originaltitle&#39;</span>: <span class="s1">&#39;Alien³&#39;</span>,
 <span class="s1">&#39;plot&#39;</span>: <span class="s1">&#39;Después de huir con Newt y Bishop del planeta Alien, Ripley se</span>
<span class="s1"> estrella con su nave en Fiorina 161, un planeta prisión. Desgraciadamente</span>
<span class="s1"> [...]&#39;</span>,
 <span class="s1">&#39;title&#39;</span>: <span class="s1">&#39;Alien 3&#39;</span>,
 <span class="s1">&#39;year&#39;</span>: <span class="s1">&#39;1992&#39;</span><span class="o">}</span>
</pre></div>
</div>
<p><strong>Analyzer&ndash;Data anzeigen:</strong>
Auflisten der Analysedaten aller sich in der Datenbank befindlichen Filme:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>freki list mydb.db analyzerdata
0<span class="o">)</span> All Good Things <span class="o">(</span>2010<span class="o">)</span>
<span class="o">{}</span>
1<span class="o">)</span> Alien³ <span class="o">(</span>1992<span class="o">)</span>
<span class="o">{}</span>
</pre></div>
</div>
<p>Da noch nichts weiter analysiert wurde, sieht man hier nur leere Klammern.</p>
<p><strong>Analyzer und Modifier anzeigen:</strong>
Anzeigen der vorhandenen Analyzer:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>freki list-analyzer
Name:           MovieFileAnalyzer
Description:    Analayze movie files, extract video or audio information.
Parameters:     <span class="o">{}</span>

Name:           LangIdentify
Description:    Analyzes the language of a given plot.
Parameters:     <span class="o">{</span><span class="s1">&#39;attr_name&#39;</span>: &lt;class <span class="s1">&#39;str&#39;</span>&gt;<span class="o">}</span>
</pre></div>
</div>
<p>Anzeigen der vorhandenen Modifier:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>freki list-modifier
Name:           PlotLangChange
Description:    Allows to exchange plot to given language.
Parameters:     <span class="o">{</span><span class="s1">&#39;attr_name&#39;</span>: &lt;class <span class="s1">&#39;str&#39;</span>&gt;, <span class="s1">&#39;change_to&#39;</span>: &lt;class <span class="s1">&#39;str&#39;</span>&gt;<span class="o">}</span>

Name:           BracketCleaner
Description:    Removes brackets e.g. brakets with actor name from plot.
Parameters:     <span class="o">{</span><span class="s1">&#39;attr_name&#39;</span>: &lt;class <span class="s1">&#39;str&#39;</span>&gt;<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3>7.2.3 Einsatz von Plugins<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p><strong>Anwenden von Analyzern:</strong>
Anwendung des <em>LangIdentify</em> Plugins auf der <em>mydb.db</em>&ndash;Datenbank:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>freki analyze plugin LangIdentify mydb.db
</pre></div>
</div>
<p>Betrachten der Analyzerdaten nach der Analyse:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>freki list mydb.db analyzerdata
0<span class="o">)</span> All Good Things <span class="o">(</span>2010<span class="o">)</span>
<span class="o">{</span><span class="s1">&#39;LangIdentify&#39;</span>: <span class="s1">&#39;es&#39;</span><span class="o">}</span>
1<span class="o">)</span> Alien³ <span class="o">(</span>1992<span class="o">)</span>
<span class="o">{</span><span class="s1">&#39;LangIdentify&#39;</span>: <span class="s1">&#39;es&#39;</span><span class="o">}</span>
</pre></div>
</div>
<p>Wie man sieht, wurde hier die verwendete Sprache der Plots analysiert. Das
Plugin hat sich in das Analysedaten&ndash;Array mit seinem ermittelten Ergebnis
eingetragen. In unserem Beispiel <em>es (espanol)</em> für eine spanische
Inhaltsbeschreibung.</p>
<p><strong>Anwenden von Modifiern:</strong>
Anwendung des PlotLangChange Modifier&ndash;Plugins um die Sprache der
Inhaltsbeschreibung von Spanisch auf Deutsch zu ändern:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>freki modify plugin PlotLangChange pluginattrs <span class="nv">attr_name</span><span class="o">=</span><span class="s1">&#39;plot&#39;</span>,change_to<span class="o">=</span>de mydb.db
</pre></div>
</div>
<p>Betrachten der Metadaten nach Einsatz des Plugins:</p>
<div class="highlight-bash"><div class="highlight"><pre>$ freki list mydb.db
0) All Good Things (2010)
{&#39;director&#39;: &#39;Andrew Jarecki&#39;,
 &#39;genre&#39;: [&#39;Drama&#39;, &#39;Mystery&#39;, &#39;Suspense&#39;, &#39;Thriller&#39;],
 &#39;originaltitle&#39;: &#39;All Good Things&#39;,
 &#39;plot&#39;: &#39;David Marks, Sohn einer reichen New Yorker Familie, verliebt sich
 in die junge Katie McCarthy, die nicht zu seinen Kreisen gehört. Doch dann [...]&#39;,
 &#39;title&#39;: &#39;All Beauty Must Die&#39;,
 &#39;year&#39;: &#39;2010&#39;}

1) Alien³ (1992)
{&#39;director&#39;: &#39;David Fincher&#39;,
 &#39;genre&#39;: [&#39;Action&#39;, &#39;Horror&#39;, &#39;Science Fiction&#39;],
 &#39;originaltitle&#39;: &#39;Alien³&#39;,
 &#39;plot&#39;: &#39;Nachdem Ellen Ripley, die kleine Newt, Soldat Hicks und der
 Android Bishop von LV 426 entkommen sind und sich mit dem Raumschiff USS [...]&#39;,&#39;
 &#39;title&#39;: &#39;Alien 3&#39;,
 &#39;year&#39;: &#39;1992&#39;}
</pre></div>
</div>
<p>Wie in dem Beispiel zu sehen ist, wurde die Inhaltsbeschreibung bei den Filmen
von der spanischen Version auf eine deutsche Version geändert.</p>
</div>
<div class="section" id="exportieren-der-daten">
<h3>7.2.4 Exportieren der Daten<a class="headerlink" href="#exportieren-der-daten" title="Permalink to this headline">¶</a></h3>
<p>Die modifizierten Metadaten können nun ins Produktivsystem zurückgespielt
werden.  Dies geht bei Freki über die <em>export</em>&ndash;Funktion, hier wird wieder im
Hintergrund die <em>Helferfunktion</em> (siehe Anhang <a class="reference internal" href="../appendix.html#ref-attachment-a"><em>Helferfunktion für NFO&ndash;Dateien</em></a>) verwendet.</p>
<p>Betrachten der Inhaltsbeschreibung der <em>nfo</em>&ndash;Dateien vor dem Export
(Ausgabe gekürzt):</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>cat <span class="s2">&quot;movies/All Good Things (2010)/movie.nfo&quot;</span> | grep <span class="s1">&#39;plot&#39;</span>
&lt;plot&gt;Historia ambientada en los años 80 y centrada en un heredero de una
dinastía de Nueva York que se enamora de una chica de otra clase social. <span class="o">[</span>...<span class="o">]</span>&lt;/plot&gt;
</pre></div>
</div>
<p>Export der modifizierten Datenbank:</p>
<div class="highlight-python"><div class="highlight"><pre>$ freki export mydb.db
./movies/All Good Things (2010)/movie.nfo
./movies/Alien³ (1992)/movie.nfo
</pre></div>
</div>
<p>Betrachten der Inhaltsbeschreibung der <em>nfo</em>-Dateien nach dem Export (gekürzt):</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>cat <span class="s2">&quot;movies/All Good Things (2010)/movie.nfo&quot;</span> | grep <span class="s1">&#39;plot&#39;</span>
&lt;plot&gt;David Marks, Sohn einer reichen New Yorker Familie, verliebt sich in
die junge Katie McCarthy, die nicht zu seinen Kreisen gehört. <span class="o">[</span>...<span class="o">]</span>&lt;/plot&gt;
</pre></div>
</div>
<p>Betrachtet man nun die <em>nfo</em>&ndash;Dateien der jeweiligen Filme, so sieht man, dass
sich hier die Sprache von Spanisch auf Deutsch geändert hat.</p>
</div>
</div>
<div class="section" id="xbmc-plugin-integration">
<span id="xbmcplugin"></span><h2>7.3 XBMC Plugin Integration<a class="headerlink" href="#xbmc-plugin-integration" title="Permalink to this headline">¶</a></h2>
<p>Neben den Kommandozeilentools Geri und Freki wurde konzeptionell ein Plugin für
das XBMC (siehe Abbildung: <a href="#fig-xbmcscreenshot-hugin">7.1</a>) geschrieben,
welches <em>libhugin</em> als Metadatenquelle nutzen kann.</p>
<p>Das XBMC erlaubt es, sogenannte <a class="reference internal" href="../II/index.html#term-scraper"><em class="xref std std-term">Scraper</em></a> zu schreiben.
Diese arbeiten vom Grundprinzip ähnlich wie die Provider von <em>libhugin</em>. Das
Problem bei dessen Scrapern ist, dass diese vollständig mittels <em>Regulärer
Ausdrücke</em> innerhalb von <em>XML</em>&ndash;Dateien geschrieben sind. Dies ist nach Meinung
des Autors fehleranfällig, aufwändig und nur schwer lesbar. Des Weiteren sind
hier die Möglichkeiten des Postprocessings nur begrenzt umsetzbar.</p>
<p>Die Referenzimplementierung des offiziellen XBMC TMDb&ndash;Scrapers hat insgesamt
über 600 <em>lines of code</em>, recht kryptischer regulärer Ausdrücke (siehe
<a class="reference internal" href="../zzz_bibliography.html#tmdbscraper1" id="id3">[Link&ndash;45]</a> und <a class="reference internal" href="../zzz_bibliography.html#tmdbscraper2" id="id4">[Link&ndash;46]</a>).</p>
<p>Die Implementierung des <em>libhugin</em> Plugins in das XBMC hat an dieser Stelle nur
23 <em>lines of code</em> (siehe <a class="reference internal" href="../appendix.html#ref-xbmc-libhugin"><em>XBMC&ndash;Scraper&ndash;Plugin</em></a>). Das liegt daran, dass der
<em>libhugin</em>&ndash;Proxy hier dem XBMC die Daten bereits im benötigten Format über das
<em>Nfo</em>&ndash;Converter&ndash;Plugin liefern kann.</p>
<div class="section" id="libhugin-proxy">
<span id="libhuginproxy"></span><h3>7.3.1 Libhugin&ndash;Proxy<a class="headerlink" href="#libhugin-proxy" title="Permalink to this headline">¶</a></h3>
<p>Da die direkte Integration in das XBMC aufgrund der begrenzten Zeit der
Projektarbeit nicht möglich ist, wurde hier der Ansatz eines ,,Proxy&ndash;Dienstes&quot;
angewandt. Für <em>libhugin</em> wurde mittels dem Microwebframework Flask (siehe
<a class="reference internal" href="../zzz_bibliography.html#flask" id="id5">[Link&ndash;47]</a>) ein minimaler <a class="reference internal" href="../II/index.html#term-restful"><em class="xref std std-term">RESTful</em></a> Webservice geschrieben (siehe
<a class="reference internal" href="../appendix.html#ref-flaskproxy"><em>Libhugin XBMC Proxy</em></a>), welcher über eine eigens definierte API Metadaten an das
XBMC liefert.</p>
<p><strong>Libhugin RESTful&ndash;API:</strong>
Der <em>Libhugin</em>&ndash;Proxy zeigt konzeptionell die Integration von <em>libhugin</em> als
Netzwerkdienst, welcher eine RESTful&ndash;API bereitstellt. Nach dem der
<em>libhugin</em>&ndash;Proxy gestartet wurde, ist es möglich über den Webbrowser auf die
RESTful&ndash;API über Port 5000 zuzugreifen.</p>
<p>Folgende Bash&ndash;Sitzung zeigt die Suche des Films <em>,,Prometheus (2012)&quot;</em> über den
<em>libhugin</em>&ndash;Proxy. Der Proxy liefert ein für das XBMC formatiertes <em>XML</em> zurück:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>curl http://127.0.0.1:5000/search/prometheus
&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">&quot;1.0&quot;</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">&quot;iso-8859-1&quot;</span> <span class="nv">standalone</span><span class="o">=</span><span class="s2">&quot;yes&quot;</span>?&gt;
&lt;results&gt;
    &lt;entity&gt;
        &lt;title&gt;
            Prometheus - Dunkle Zeichen <span class="o">(</span>2012<span class="o">)</span>, <span class="o">[</span>tt1446714<span class="o">]</span>, Source: TMDBMovie
        &lt;/title&gt;
        &lt;url&gt;http://localhost:5000/movie/0&lt;/url&gt;
    &lt;/entity&gt;
&lt;/results&gt;
</pre></div>
</div>
<p>Die implementierte Test&ndash;API bietet die folgenden Schnittstellen:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">/search/&lt;titlename</span> <span class="pre">or</span> <span class="pre">imdbid&gt;:</span></tt> Suche nach Film über Titel oder <em>IMDb&ndash;ID</em>.</li>
<li><tt class="docutils literal"><span class="pre">/movie/&lt;position&gt;:</span></tt> Zugriff auf einen bestimmten Film im Proxy Cache.</li>
<li><tt class="docutils literal"><span class="pre">/info:</span></tt> Server Information, welche zeigt ob Postprocessing aktiviert ist.</li>
<li><tt class="docutils literal"><span class="pre">/toggle_pp:</span></tt> Postprocessing aktivieren oder deaktivieren.</li>
<li><tt class="docutils literal"><span class="pre">/shutdown:</span></tt> Server herunterfahren.</li>
</ul>
</div></blockquote>
<p>Die Implementierung des Proxy zeigt, dass es mit relativ wenig Aufwand möglich
ist, <em>libhugin</em> als ,,neuen Dienst&quot; für Multimedia&ndash;Anwendungen oder auch
Movie&ndash;Metadaten&ndash;Manager zu verwenden.</p>
<p>Hierbei kommt die Flexibilität und Anpassbarkeit des Systems den bisherigen
Tools zu Gute. Auf diese Art und Weise lassen sich alle Features, die <em>libhugin</em>
bietet, in bereits existierende Tools integrieren.</p>
<div class="figure align-center" id="fig-xbmcscreenshot-hugin">
<a class="reference internal image-reference" href="../../_images/hugin_xbmc.png"><img alt="Libhugin Scraper--Plugin im XBMC Scraper Menü" src="../../_images/hugin_xbmc.png" style="width: 60%;" /></a>
<p class="caption"><strong>Figure 7.1:</strong> Libhugin Scraper&ndash;Plugin im XBMC&ndash;Scraper&ndash;Menü.</p>
</div>
</div>
<div class="section" id="unterschiede-tmdb-xbmc-und-tmdb-libhugin">
<h3>7.3.2 Unterschiede TMDb XBMC und TMDb libhugin<a class="headerlink" href="#unterschiede-tmdb-xbmc-und-tmdb-libhugin" title="Permalink to this headline">¶</a></h3>
<p>Im Vergleich zum XBMC TMDb&ndash;Scraper bietet der XBMC <em>libhugin</em>&ndash;Scraper
(<em>libhugin</em>&ndash;Provider wurde zum Testen auf TMDb beschränkt) zusätzliche
Features.</p>
<blockquote>
<div><ul class="simple">
<li>Suche über <em>IMDb&ndash;ID</em> möglich.</li>
<li>Unschärfesuche möglich, dadurch auch erhöhte Trefferquote.</li>
<li>Postprocessing, je nach dazugeschalteten Plugin möglich.</li>
</ul>
</div></blockquote>
<p>Beim Nutzen weiterer Provider sowie Plugins, wie dem Compose Plugin eröffnen
sich hier für das XBMC ganz neue Möglichkeiten, seine Metadaten nach den eigenen
Wünschen zusammen zu bauen, ohne dabei auf externe Movie&ndash;Manager zugreifen zu
müssen. Im Prinzip kann <em>libhugin</em> hier das komplette Metadatensystem vom XBMC
ersetzen.</p>
</div>
</div>
<div class="section" id="weitere-einsatzmoglichkeiten">
<span id="ref-scripting-tasks"></span><h2>7.4 Weitere Einsatzmöglichkeiten<a class="headerlink" href="#weitere-einsatzmoglichkeiten" title="Permalink to this headline">¶</a></h2>
<p><strong>Scripting Tasks:</strong>
Die Einsatzmöglichkeiten sind je nach Szenario anpassbar. Für einfache
Anwendungen lassen sich Geri und Freki bereits direkt verwenden.</p>
<p>Ein schönes Beispiel für einen <em>Scripting&ndash;Task</em> ist das Normalisieren der
Ordnerstruktur/Benennung von großen Filmsammlungen.</p>
<p>Hierzu reicht es einfach, die <tt class="docutils literal"><span class="pre">movie.mask</span></tt> von Geri anzupassen und ein kleines
Bash&ndash;Skript zu schreiben. Anpassen der <tt class="docutils literal"><span class="pre">movie.mask</span></tt> auf das gewünschte
Format:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">echo</span> <span class="s2">&quot;{title} ({year}), [{imdbid}]&quot;</span> &gt; tools/geri/movie.mask
</pre></div>
</div>
<p>So schaut das minimalistische rename&ndash;Skript aus:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#!/bin/bash</span>

<span class="k">for </span>movie in <span class="nv">$1</span>/*; <span class="k">do</span>
<span class="k">    </span><span class="nv">old_name</span><span class="o">=</span><span class="k">$(</span>basename <span class="s2">&quot;$movie&quot;</span><span class="k">)</span>
    <span class="nv">new_name</span><span class="o">=</span><span class="k">$(</span>geri -t <span class="s2">&quot;$old_name&quot;</span> -P --language<span class="o">=</span>en --amount 1 -providers tmdbmovie<span class="k">)</span>;
    mv -v <span class="s2">&quot;$movie&quot;</span> <span class="s2">&quot;$1/$new_name&quot;</span>;
<span class="k">done</span>
</pre></div>
</div>
<p>Um eine schlampig gepflegte Filmsammlung zu ,,simulieren&quot;, werden Ordner mit
Filmen, die falsch geschrieben sind, erstellt:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>mkdir movies/<span class="o">{</span><span class="s2">&quot;alien1&quot;</span>,<span class="s2">&quot;alien 2&quot;</span>,<span class="s2">&quot;geständnisse&quot;</span>,<span class="s2">&quot;ironman2&quot;</span>,<span class="s2">&quot;iron man3&quot;</span>,<span class="s2">&quot;iron men 1&quot;</span>,<span class="se">\</span>
<span class="s2">&quot;jung unt schon&quot;</span>,<span class="s2">&quot;marix&quot;</span>,<span class="s2">&quot;oonly good forgives&quot;</span>,<span class="s2">&quot;teh marix 2&quot;</span><span class="o">}</span>
</pre></div>
</div>
<p>Anschließend wird das Skript auf die schlampig gepflegte Ordnerstruktur
angewandt:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>./rename.sh movies
‘movies/alien1’ -&gt; ‘movies/Alien <span class="o">(</span>1979<span class="o">)</span>, <span class="o">[</span>tt0078748<span class="o">]</span>’
‘movies/alien 2’ -&gt; ‘movies/Aliens <span class="o">(</span>1986<span class="o">)</span>, <span class="o">[</span>tt0090605<span class="o">]</span>’
‘movies/geständnisse’ -&gt; ‘movies/Confessions <span class="o">(</span>2010<span class="o">)</span>, <span class="o">[</span>tt1590089<span class="o">]</span>’
‘movies/ironman2’ -&gt; ‘movies/Iron Man 2 <span class="o">(</span>2010<span class="o">)</span>, <span class="o">[</span>tt1228705<span class="o">]</span>’
‘movies/iron man3’ -&gt; ‘movies/Iron Man 3 <span class="o">(</span>2013<span class="o">)</span>, <span class="o">[</span>tt1300854<span class="o">]</span>’
‘movies/iron men 1’ -&gt; ‘movies/Iron Man <span class="o">(</span>2008<span class="o">)</span>, <span class="o">[</span>tt0371746<span class="o">]</span>’
‘movies/jung unt schon’ -&gt; ‘movies/Young &amp; Beautiful <span class="o">(</span>2013<span class="o">)</span>, <span class="o">[</span>tt2752200<span class="o">]</span>’
‘movies/marix’ -&gt; ‘movies/The Matrix <span class="o">(</span>1999<span class="o">)</span>, <span class="o">[</span>tt0133093<span class="o">]</span>’
‘movies/oonly good forgives’ -&gt; ‘movies/Only God Forgives <span class="o">(</span>2013<span class="o">)</span>, <span class="o">[</span>tt1602613<span class="o">]</span>’
‘movies/teh marix 2’ -&gt; ‘movies/The Matrix Reloaded <span class="o">(</span>2003<span class="o">)</span>, <span class="o">[</span>tt0234215<span class="o">]</span>’
</pre></div>
</div>
<p>An diesem Beispiel sieht man, wie gut die Unschärfesuche funktionieren kann.
Bei diesem kleinem <em>Testsample</em> haben wir eine Trefferwahrscheinlichkeit von 100%.</p>
<p><strong>D&ndash;Bus:</strong>
Eine weitere Möglichkeit, neben dem ,,Proxyserver&ndash;Ansatz&quot;, wäre <em>D&ndash;Bus</em> zu
verwenden. <em>D&ndash;Bus</em> ist ein Framework, das unter Linux zur
Interprozesskommunikation verwendet wird. Man kann hier beispielsweise
<em>libhugin</em> als <em>D&ndash;Bus</em>&ndash;Service laufen lassen und jede andere beliebige
Anwendung hätte die Möglichkeit, programmiersprachenunabhängig mit <em>libhugin</em> zu
kommunizieren.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../VIII/index.html" class="btn btn-neutral float-right" title="8 Zusammenfassung"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../VI/index.html" class="btn btn-neutral" title="6 Implementierung"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright by Christoph Piechula, 2013-2014..
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>