

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5 Entwurf &mdash; Projektarbeit</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Projektarbeit" href="../../index.html"/>
        <link rel="next" title="6 Implementierung" href="../VI/index.html"/>
        <link rel="prev" title="4 Softwarespezifikation" href="../IV/index.html"/>

<!-- Include all CSS and JS files, let's you use your own theme. -->

<link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
<script type="text/javascript">
	function endsWith(str, suffix) {
	    return str.indexOf(suffix, str.length - suffix.length) !== -1;
	}

    $(document).ready(function() {
    	var im, imsrc;
    	$('img').each(function() {
    		im = $(this);
    		imsrc = im.attr('src');
    		imalt = im.attr('alt');
    		if (endsWith(imsrc, 'svg')) {
    			im.wrap($('<a>').attr({'href': imsrc, 'title': imalt}).addClass('svglink'));
    		}
    	});

    	$('a.svglink').colorbox({
    		'width': '95%',
    		'height': '95%',
    		'photo': true});
    });
</script>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> Projektarbeit</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../abstract.html">Abstract</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acknowledgements.html">Danksagung</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dedication.html">Widmung</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../I/index.html">1 Einleitung</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../I/index.html#motivation">1.1 Motivation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../I/index.html#projektziel">1.2 Projektziel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../I/index.html#projektlizenz">1.3 Projektlizenz</a></li>
<li class="toctree-l2"><a class="reference internal" href="../I/index.html#namensgebung">1.4 Namensgebung</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../II/index.html">2 Begriffsdefinitionen</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../II/index.html#fachbegriffe">2.1 Fachbegriffe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../II/index.html#kontextspezifische-fachbegriffe">2.2 Kontextspezifische Fachbegriffe</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../III/index.html">3 Stand der Metadatenpflege</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../III/index.html#metadatenarten-und-quellen">3.1 Metadatenarten und Quellen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../III/index.html#software-und-metadatenformate">3.2 Software und Metadatenformate</a></li>
<li class="toctree-l2"><a class="reference internal" href="../III/index.html#probleme-bei-der-metadatenpflege">3.3 Probleme bei der Metadatenpflege</a></li>
<li class="toctree-l2"><a class="reference internal" href="../III/index.html#probleme-bei-der-metadatensuche">3.4 Probleme bei der Metadatensuche</a></li>
<li class="toctree-l2"><a class="reference internal" href="../III/index.html#anforderungen-an-das-projekt">3.5 Anforderungen an das Projekt</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../IV/index.html">4 Softwarespezifikation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../IV/index.html#anforderungen-an-die-bibliothek">4.1 Anforderungen an die Bibliothek</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">5 Entwurf</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#grunduberlegungen">5.1 Grundüberlegungen</a></li>
<li class="toctree-l2"><a class="reference internal" href="#libhugin-architektur-uberblick">5.2 Libhugin Architektur&ndash;Überblick</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bibliothek-dateistruktur">5.3 Bibliothek Dateistruktur</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../VI/index.html">6 Implementierung</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../VI/index.html#libhugin-harvest-api">6.1 Libhugin&ndash;harvest API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VI/index.html#libhugin-harvest-plugins">6.2 Libhugin&ndash;harvest Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VI/index.html#libhugin-analyze-api">6.3 Libhugin&ndash;analyze API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VI/index.html#libhugin-analyze-plugins">6.4 Libhugin&ndash;analyze Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VI/index.html#verschiedenes">6.5 Verschiedenes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../VII/index.html">7 Demoanwendungen</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../VII/index.html#libhugin-harvest-cli-tool-geri">7.1 Libhugin&ndash;harvest CLI&ndash;Tool Geri</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VII/index.html#libhugin-analyze-cli-tool-freki">7.2 Libhugin&ndash;analyze CLI&ndash;Tool Freki</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VII/index.html#xbmc-plugin-integration">7.3 XBMC Plugin Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VII/index.html#weitere-einsatzmoglichkeiten">7.4 Weitere Einsatzmöglichkeiten</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../VIII/index.html">8 Zusammenfassung</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../VIII/index.html#aktueller-stand">8.1 Aktueller Stand</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VIII/index.html#erfullung-der-gesetzten-anforderungen">8.2 Erfüllung der gesetzten Anforderungen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VIII/index.html#defizite-und-verbesserungen">8.3 Defizite und Verbesserungen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VIII/index.html#denkbare-weiterentwicklungen">8.4 Denkbare Weiterentwicklungen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VIII/index.html#abschlieszendes-fazit">8.5 Abschließendes Fazit</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Helferfunktion für NFO&ndash;Dateien</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html#xbmc-scraper-plugin">XBMC&ndash;Scraper&ndash;Plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html#libhugin-xbmc-proxy">Libhugin XBMC Proxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html#projektstatistik-cloc">Projektstatistik (<em>cloc</em>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zzz_bibliography.html">Bibliographie</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zzz_bibliography.html#weblink-verzeichnis">Weblink Verzeichnis</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Projektarbeit</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>5 Entwurf</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../../_sources/rst/V/index.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="entwurf">
<h1>5 Entwurf<a class="headerlink" href="#entwurf" title="Permalink to this headline">¶</a></h1>
<p>Im Folgenden wird der systematische Entwurf der Software aufgezeigt. Die
verwendeten Algorithmen, Probleme, sowie Möglichkeiten der technischen
Umsetzung werden in der Bachelorarbeit genauer beleuchtet und diskutiert.</p>
<div class="section" id="grunduberlegungen">
<h2>5.1 Grundüberlegungen<a class="headerlink" href="#grunduberlegungen" title="Permalink to this headline">¶</a></h2>
<p>Metadaten werden über verschiedene Onlinequellen bezogen. Hier wird
grundsätzlich zwischen Onlinequellen mit API und ohne API unterschieden.
Onlinequellen mit API bieten dem Entwickler direkt eine Schnittstelle, über
welche die interne Datenbank des Metadatenanbieters abgefragt werden kann. Die
Onlinequellen mit API unterteilen sich in die zwei Technologien RESTful (vgl.
<a class="reference internal" href="../zzz_bibliography.html#fielding2000architectural" id="id1">[1]</a>) und SOAP (vgl. <a class="reference internal" href="../zzz_bibliography.html#snell2002webservice" id="id2">[3]</a>).</p>
<p>Folgende Shellsitzung demonstriert einen Zugriff mit dem Webtransfer&ndash;Tool
<em>cURL</em> (siehe <a class="reference internal" href="../zzz_bibliography.html#curl" id="id3">[Link&ndash;26]</a>) auf die API der OMDb&ndash;Onlinequelle (siehe
<a class="reference internal" href="../zzz_bibliography.html#omdb" id="id4">[Link&ndash;27]</a>), es wird nach dem Film ,,The Matrix&quot; gesucht (Ausgabe gekürzt):</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>curl http://www.omdbapi.com/?t<span class="o">=</span>The+Matrix
<span class="o">{</span><span class="s2">&quot;Title&quot;</span>:<span class="s2">&quot;The Matrix&quot;</span>,
<span class="s2">&quot;Year&quot;</span>:<span class="s2">&quot;1999&quot;</span>,
<span class="s2">&quot;Runtime&quot;</span>:<span class="s2">&quot;136 min&quot;</span>,
<span class="s2">&quot;Genre&quot;</span>:<span class="s2">&quot;Action, Sci--Fi&quot;</span>,
<span class="s2">&quot;Director&quot;</span>:<span class="s2">&quot;Andy Wachowski, Lana Wachowski&quot;</span>,
<span class="s2">&quot;Actors&quot;</span>:<span class="s2">&quot;Keanu Reeves, Laurence Fishburne, Carrie--Anne Moss, Hugo Weaving&quot;</span>,
<span class="s2">&quot;Plot&quot;</span>:<span class="s2">&quot;A computer hacker learns from mysterious [...]&quot;</span>,
<span class="s2">&quot;Country&quot;</span>:<span class="s2">&quot;USA, Australia&quot;</span>,
<span class="s2">&quot;Poster&quot;</span>:<span class="s2">&quot;http://ia.media-imdb.com/images/M/SX300.jpg&quot;</span>,
<span class="s2">&quot;imdbRating&quot;</span>:<span class="s2">&quot;8.7&quot;</span>,
<span class="s2">&quot;imdbID&quot;</span>:<span class="s2">&quot;tt0133093&quot;</span>,
<span class="o">[</span>...<span class="o">]</span>
<span class="s2">&quot;Type&quot;</span>:<span class="s2">&quot;movie&quot;</span>,
<span class="s2">&quot;Response&quot;</span>:<span class="s2">&quot;True&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Die <em>Such&ndash;URL</em> bekommt den Titel als Query&ndash;Parameter (<tt class="docutils literal"><span class="pre">t=The+Matrix</span></tt>)
übergeben, zurück kommt ein in <em>JSON</em> formatiertes Response. Dieses kann nun vom
Aufrufer der API beliebig verarbeitet werden.</p>
<p>Bietet eine Webseite wie beispielsweise <em>filmstarts.de</em> (siehe
<a class="reference internal" href="../zzz_bibliography.html#filmstarts" id="id5">[Link&ndash;28]</a>) keine API an, so muss der ,,normale Weg&quot; wie über den
Webbrowser erfolgen. Hierzu muss man herausfinden, aus welchen Parametern sich
die <em>Such&ndash;URL</em> zusammensetzt, die im Hintergrund an den Webserver geschickt
wird, sobald die Suchanfrage losgeschickt wird. Bei <em>filmstarts.de</em> setzt sich
die <em>Such</em>&ndash;URL wie folgt zusammen:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">http://www.filmstarts.de/suche/?q=Filmtitel</span></tt></div></blockquote>
<p>Wird nun mit <em>cURL</em> die URL mit dem oben genannten Film als Query&ndash;Parameter
aufgerufen, so kommt als Antwort ein HTML&ndash;Dokument zurück, welches auch der
Webbrowser erhalten würde. Folgende Shellsitzung demonstriert den Aufruf
(Ausgabe gekürzt):</p>
<div class="highlight-html"><div class="highlight"><pre>$ curl  http://www.filmstarts.de/suche/?q=The+Matrix
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;&lt;title&gt;</span>The Matrix – Suchen auf FILMSTARTS.de<span class="nt">&lt;/title&gt;&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span><span class="c">&lt;!-- Weiterer Content --&gt;</span><span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Man bekommt als Aufrufer der URL die Webseite zurückgeliefert und muss nun die
Daten aus dem Dokument extrahieren. Dies ist in der Regel mühsamer als der
Zugriff über eine API, welche die Daten sauber im <em>JSON</em>&ndash; oder <em>XML</em>&ndash;Format
zurückliefert.</p>
<div class="section" id="ubertragung-vom-grundprinzip-auf-das-pluginsystem">
<h3>5.1.1 Übertragung vom Grundprinzip auf das Pluginsystem<a class="headerlink" href="#ubertragung-vom-grundprinzip-auf-das-pluginsystem" title="Permalink to this headline">¶</a></h3>
<p>Ein Ziel bei der Entwicklung der Plugin&ndash;Spezifikation ist, den Aufwand für das
Implementieren eines Plugins so gering wie möglich zu halten, um
Programmierfehler beziehungsweise Fehlverhalten durch Plugins zu minimieren,
aber auch um Entwickler zu motivieren, Plugins zu schreiben.</p>
<p>Das oben genannte Prinzip beim Beschaffen von Metadaten ist immer gleich und
lässt sich somit gut auf das Pluginsystem übertragen. Die Provider&ndash;Plugins
müssen im Prinzip nur folgende zwei Punkte können (siehe Abbildung
<a href="#fig-provider-concept">5.1</a>):</p>
<blockquote>
<div><ul class="simple">
<li>Aus den Suchparametern die <em>Such&ndash;URL</em> zusammenbauen.</li>
<li>Extrahieren der Daten aus dem zurückgelieferten <em>HTTP&ndash;Response</em>.</li>
</ul>
</div></blockquote>
<p>Um den Download selbst muss sich das Provider&ndash;Plugin bei diesem Ansatz nicht
kümmern. Das entlastet den Pluginentwickler und gibt <em>libhugin</em> die
Kontrolle über das Downloadmanagement.</p>
<div class="figure align-center" id="fig-provider-concept">
<a class="reference internal image-reference" href="../../_images/provider-concept-svg.pdf"><img alt="Grundprinzip Kommunikationsablauf mit Provider--Plugin" src="../../_images/provider-concept-svg.pdf" style="width: 90%;" /></a>
<p class="caption"><strong>Figure 5.1:</strong> Grundprinzip Kommunikationsablauf mit Provider&ndash;Plugin.</p>
</div>
<p>Damit der Provider weiß, welche <em>Roh&ndash;Daten</em> er zurückliefern soll, muss
hierfür noch eine Struktur mit Attributen festgelegt werden, an welche sich alle
Provider&ndash;Plugins halten müssen.</p>
<p>Für den Prototypen richten sich die möglichen Attribute nach der
TMDb&ndash;Onlinequelle (siehe <em>libhugin</em>&ndash;API <a class="reference internal" href="../zzz_bibliography.html#movieprovider" id="id6">[Link&ndash;29]</a>).</p>
</div>
</div>
<div class="section" id="libhugin-architektur-uberblick">
<h2>5.2 Libhugin Architektur&ndash;Überblick<a class="headerlink" href="#libhugin-architektur-uberblick" title="Permalink to this headline">¶</a></h2>
<p>Die Bibliothek soll über die Metadatenbeschaffung hinaus Werkzeuge zur
Metadatenanalyse bereitstellen. Um eine saubere Trennung zwischen
den beiden zu schaffen, wird die Bibliothek in die zwei Teile
<em>libhugin&ndash;harvest</em> und <em>libhugin&ndash;analyze</em> aufgeteilt (siehe Abbildung
<a href="#fig-harvest-arch">5.2</a>).</p>
<p><strong>libhugin&ndash;harvest:</strong>
Dieser Teil soll für die Metadatenbeschaffung zuständig sein und Schnittstellen
für die folgenden Pluginarten bereitstellen:</p>
<blockquote>
<div><ul class="simple">
<li>Provider</li>
<li>Postprocessor</li>
<li>Converter</li>
</ul>
</div></blockquote>
<div class="figure align-center" id="fig-harvest-arch">
<a class="reference internal image-reference" href="../../_images/arch-overview-svg.pdf"><img alt="Architekturübersicht von libhugin" src="../../_images/arch-overview-svg.pdf" style="width: 80%;" /></a>
<p class="caption"><strong>Figure 5.2:</strong> Die Grafik zeigt eine Architekturübersicht der <em>libhugin</em>&ndash;Bibliothek welche
sich in die zwei Teile <em>libhugin&ndash;harvest</em> und <em>libhugin&ndash;analyze</em> aufteilt.</p>
</div>
<p><strong>libhugin&ndash;analyze:</strong>
Dieser Teil soll für die nachträgliche Metadatenanalyse zuständig sein und
Schnittstellen für folgende Pluginarten bereitstellen:</p>
<blockquote>
<div><ul class="simple">
<li>Modifier</li>
<li>Analyzer</li>
<li>Comparator</li>
</ul>
</div></blockquote>
<p>Der Analyze&ndash;Teil der Bibliothek soll über eine interne Datenbank verfügen, in welche
externe Metadaten zur Analyse importiert werden. So können alle Plugins auf
einem definierten Zustand arbeiten.</p>
<div class="section" id="klassenubersicht-von-libhugin-harvest">
<h3>5.2.1 Klassenübersicht von <em>libhugin&ndash;harvest</em><a class="headerlink" href="#klassenubersicht-von-libhugin-harvest" title="Permalink to this headline">¶</a></h3>
<p>Die Architektur von <em>libhugin</em> ist objektorientiert. Aus der Architekturübersicht
und den Anforderungen an das System wurden die folgenden Klassen und Schnittstellen
abgeleitet. Abbildung <a href="#fig-klassenuebersicht-harvest">5.3</a> zeigt eine
Klassenübersicht von <em>libhugin&ndash;harvest</em>, samt Interaktion mit den Schnittstellen.</p>
<p>Im Folgenden werden die grundlegenden Objekte und Schnittstellen
erläutert.</p>
<div class="figure align-center" id="fig-klassenuebersicht-harvest">
<a class="reference internal image-reference" href="../../_images/klassenuebersicht-harvest-svg.pdf"><img alt="Libhugin--harvest Klassenübersicht mit Klasseninteraktion" src="../../_images/klassenuebersicht-harvest-svg.pdf" style="width: 100%;" /></a>
<p class="caption"><strong>Figure 5.3:</strong> &lt;emphasis&gt;Libhugin&ndash;harvest&lt;/emphasis&gt; Klassenübersicht mit Klasseninteraktion.</p>
</div>
<p><strong>Session:</strong>
Diese Klasse bildet den Grundstein für <em>libhugin&ndash;harvest</em>. Über eine Sitzung
konfiguriert der Benutzer das System und hat Zugriff auf die verschiedenen
Plugins.
Von der Session werden folgende Methoden bereitgestellt:</p>
<p><tt class="docutils literal"><span class="pre">create_query(**kwargs):</span></tt> Schnittstelle zur Konfiguration der Suchanfrage. Die
Methode gibt ein Query&ndash;Objekt zurück, das einem Python&ndash;Dictionary (Hashtabelle)
entspricht.  Diese Methode dient als Hilfestellung für den Benutzer der API.
Theoretisch kann der Benutzer die Query auch manuell zusammenbauen. <tt class="docutils literal"><span class="pre">Kwargs</span></tt>
ist eine optionale Liste aus Key&ndash;Value&ndash;Paaren. Für weitere Informationen und
Konfigurationsparameter siehe <em>libhugin</em>&ndash;API <a class="reference internal" href="../zzz_bibliography.html#queryapi" id="id7">[Link&ndash;30]</a>.</p>
<p><tt class="docutils literal"><span class="pre">submit(query):</span></tt> Schnittstelle um eine Suchanfrage zu starten. Die Methode
gibt eine Liste mit gefundenen Metadaten als <em>Ergebnisobjekte</em> zurück.</p>
<p>Die Methode initialisiert eine Downloadqueue und einen Zwischenspeicher (Cache),
falls dieser vom Benutzer über die Query nicht deaktiviert wurde. Anschließend
generiert sie für jeden Provider eine sogenannte <em>Job</em>&ndash;Struktur. Diese
<em>Job</em>&ndash;Struktur kapselt jeweils einen Provider, die Suchanfrage und die
Zwischenergebnisse, die während der Suchanfrage generiert werden.</p>
<p>Zur Veranschaulichung wird eine leere <em>Job</em>&ndash;Struktur in Python&ndash;Notation
gezeigt:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">job_structure</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;url&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>          <span class="c"># URL die als nächstes von Downloadqueue geladen werden soll</span>
    <span class="s">&#39;provider&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>     <span class="c"># Referenz auf Provider--Plugin</span>
    <span class="s">&#39;future&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>       <span class="c"># Referenz auf Future Objekt bei async. Ausführung</span>
    <span class="s">&#39;response&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>     <span class="c"># Ergebnis des Downloads, Http Response</span>
    <span class="s">&#39;return_code&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>  <span class="c"># Return Code der Http Anfrage</span>
    <span class="s">&#39;retries_left&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span> <span class="c"># Anzahl der noch übrigen Versuche</span>
    <span class="s">&#39;done&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>         <span class="c"># Flag das gesetzt wird wenn Job fertig ist</span>
    <span class="s">&#39;result&#39;</span><span class="p">:</span> <span class="bp">None</span>        <span class="c"># Ergebnis der Suchanfrage</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Nachdem ein Job fertiggestellt wurde, wird er in ein <em>Ergebnisobjekt</em> gekapselt.
Am Ende der <tt class="docutils literal"><span class="pre">submit()</span></tt>&ndash;Methode wird eine Liste mit <em>Ergebnisobjekten</em>
an den Aufrufer zurückgegeben. Das <em>Ergebnisobjekt</em> kapselt die folgenden
Informationen:</p>
<blockquote>
<div><ul class="simple">
<li>Provider, welcher das Ergebnis geliefert hat.</li>
<li>Suchparemeter, welche für die Suchanfrage verwendet wurden.</li>
<li>Metadatenart, Movie oder Person.</li>
<li>Anzahl der Downloadversuche.</li>
<li>Das eigentliche Ergebnis als Hashtabelle.</li>
</ul>
</div></blockquote>
<p>Der prinzipielle Ablauf der <tt class="docutils literal"><span class="pre">submit()</span></tt>&ndash;Methode wird in Abbildung
<a href="#fig-submit">5.4</a> dargestellt.</p>
<div class="figure align-center" id="fig-submit">
<a class="reference internal image-reference" href="../../_images/submit.pdf"><img alt="Prinzipieller Ablauf der Submit--Methode" src="../../_images/submit.pdf" style="width: 50%;" /></a>
<p class="caption"><strong>Figure 5.4:</strong> Prinzipieller Ablauf der Submit&ndash;Methode.</p>
</div>
<p><tt class="docutils literal"><span class="pre">submit_async()</span></tt>: Methode für eine asynchrone Nutzung der API. Diese führt
<tt class="docutils literal"><span class="pre">submit()</span></tt> asynchron aus und gibt ein Python&ndash;<em>Future&ndash;Objekt</em> zurück,
welches die Anfrage kapselt. Durch Aufrufen der <tt class="docutils literal"><span class="pre">done()</span></tt>&ndash;Methode auf dem
<em>Future&ndash;Objekt</em>, kann festgestellt werden ob die Suchanfrage bereits fertig ist.
Ein Aufruf der <tt class="docutils literal"><span class="pre">result()</span></tt>&ndash;Methode auf dem <em>Future&ndash;Objekt</em> liefert das
eigentliche <em>Ergebnisobjekt</em> zurück. Für mehr Informationen siehe Python API
<a class="reference internal" href="../zzz_bibliography.html#futures" id="id8">[Link&ndash;31]</a>.</p>
<p><tt class="docutils literal"><span class="pre">provider_plugins(pluginname=None)</span></tt>: Diese Methode gibt eine Liste mit den
Provider&ndash;Plugins zurück oder bei Angabe eines Plugins, dieses direkt. Mit
<tt class="docutils literal"><span class="pre">pluginname=None</span></tt> wird der Standardwert gesetzt, falls kein Wert übergeben
wird.</p>
<p><tt class="docutils literal"><span class="pre">postprocessor_plugins(pluginname=None)</span></tt>: Analog zu <tt class="docutils literal"><span class="pre">provider_plugins()</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">converter_plugins(pluginname=None)</span></tt>: Analog zu <tt class="docutils literal"><span class="pre">provider_plugins()</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">cancel()</span></tt>: Diese Methode dient zum Abbrechen einer asynchronen Suchanfrage.
Hier sollte anschließend noch die <tt class="docutils literal"><span class="pre">clean_up()</span></tt>&ndash;Methode aufgerufen werden um
alle Ressourcen wieder freizugeben.</p>
<p><tt class="docutils literal"><span class="pre">clean_up()</span></tt>: Methode zum Aufräumen nach dem Abbrechen einer asynchronen
Suchanfrage. Die Methode blockt solange noch nicht alle Ressourcen freigegeben
wurden.</p>
<p><strong>Queue:</strong>
Die Queue kapselt die Parameter der Suchanfrage. Sie wird direkt mit
den Parametern der Suchanfrage instanziiert, hierbei werden bestimmte Werte, die
übergeben werden, validiert und es werden <em>Standardwerte</em> gesetzt.</p>
<p><strong>Cache:</strong>
Der Cache wird intern verwendet, um erfolgreiche Suchanfragen persistent
zwischenzuspeichern. So können die Daten bei wiederholter Anfrage aus dem Cache
geladen werden. Dadurch gewinnt man Geschwindigkeit und der Metadatenanbieter
wird entlastet. Zum persistenten Speichern wird ein Python&ndash;Shelve (siehe
<a class="reference internal" href="../zzz_bibliography.html#shelve" id="id9">[Link&ndash;32]</a>) verwendet.</p>
<p><tt class="docutils literal"><span class="pre">open(path,</span> <span class="pre">cache_name)</span></tt>: Öffnet den übergebenen Cache.</p>
<p><tt class="docutils literal"><span class="pre">read(key)</span></tt>: Liest Element an Position <em>key</em> aus dem Cache.</p>
<p><tt class="docutils literal"><span class="pre">write(key,</span> <span class="pre">value)</span></tt>: Schreibt das Element <tt class="docutils literal"><span class="pre">value</span></tt> an Position <tt class="docutils literal"><span class="pre">key</span></tt> in den
Cache.</p>
<p><tt class="docutils literal"><span class="pre">close()</span></tt>: Schließt den Cache.</p>
<p><strong>Downloadqueue:</strong>
Die Downloadqueue ist für den eigentlichen Download der Daten zuständig. Sie
arbeitet mit den oben genannten <em>Job</em>&ndash;Strukturen. Die Provider&ndash;Plugins müssen
so keine eigene Downloadqueue implementieren.</p>
<p><tt class="docutils literal"><span class="pre">push(job)</span></tt>: Fügt einen <tt class="docutils literal"><span class="pre">Job</span></tt> der Downloadqueue hinzu.</p>
<p><tt class="docutils literal"><span class="pre">pop()</span></tt>: Holt den nächsten fertigen <tt class="docutils literal"><span class="pre">Job</span></tt> aus der Downloadqueue.</p>
<p><tt class="docutils literal"><span class="pre">running_jobs()</span></tt>: Gibt die Anzahl der <tt class="docutils literal"><span class="pre">Jobs</span></tt> die in Verarbeitung sind zurück.</p>
<p><strong>GenreNormalize:</strong>
GenreNormalize kann von den Provider&ndash;Plugins verwendet werden, um das Genre zu
normalisieren. Hierzu müssen die Provider eine Genre&ndash;Mapping&ndash;Datei erstellen.
Für mehr Informationen siehe auch API <a class="reference internal" href="../zzz_bibliography.html#movieprovider" id="id10">[Link&ndash;29]</a>.</p>
<p><tt class="docutils literal"><span class="pre">normalize_genre(genre)</span></tt>: Normalisiert ein Genre anhand einer festgelegten
Abbildungstabelle.</p>
<p><tt class="docutils literal"><span class="pre">normalize_genre_list(genrelist)</span></tt>: Normalisiert eine Liste aus Genres jeweils
mittels der <tt class="docutils literal"><span class="pre">normalize_genre()</span></tt> Funktion.</p>
<p>Die Problematik der Genrenormalisierung ist Bestandteil der Bachelorarbeit.</p>
<p><strong>PluginHandler:</strong>
Das Pluginsystem wurde mit Hilfe der <em>Yapsy</em>&ndash;Bibliothek (siehe
<a class="reference internal" href="../zzz_bibliography.html#yapsy" id="id11">[Link&ndash;33]</a>) umgesetzt. Es bietet folgende Schnittstellen nach außen:</p>
<p><tt class="docutils literal"><span class="pre">activate_plugin_by_category(category)</span></tt>: Aktiviert Plugins einer bestimmten
Kategorie.</p>
<p><tt class="docutils literal"><span class="pre">deactivate_plugin_by_category(category)</span></tt>: Deaktiviert Plugins einer bestimmten
Kategorie.</p>
<p><tt class="docutils literal"><span class="pre">get_plugins_from_category(category)</span></tt>: Liefert Plugins einer bestimmten
Kategorie zurück.</p>
<p><tt class="docutils literal"><span class="pre">is_activated(category)</span></tt>: Gibt einen Wahrheitswert zurück, wenn eine Kategorie
bereits aktiviert ist.</p>
</div>
<div class="section" id="plugininterface-libhugin-harvest">
<h3>5.2.2 Plugininterface libhugin&ndash;harvest<a class="headerlink" href="#plugininterface-libhugin-harvest" title="Permalink to this headline">¶</a></h3>
<p><em>Libhugin&ndash;harvest</em> bietet für jeden Plugintyp eine bestimmte Schnittstelle an,
die vom jeweiligen Plugintyp implementiert werden muss (siehe Abbildung <a href="#fig-harvest">5.5</a>).</p>
<div class="figure align-center" id="fig-harvest">
<a class="reference internal image-reference" href="../../_images/harvest-plugin-interface.pdf"><img alt="Libhugin--harvest Plugin Schnittstellenbeschreibung" src="../../_images/harvest-plugin-interface.pdf" style="width: 100%;" /></a>
<p class="caption"><strong>Figure 5.5:</strong> Libhugin&ndash;harvest Plugin Schnittstellenbeschreibung.</p>
</div>
<p>Diese <em>libhugin&ndash;harvest</em> Plugins haben die Möglichkeiten von verschiedenen
Oberklassen abzuleiten (siehe Abbildung <a href="#table-harvest-plugins">5.6</a>).
Mehrfachvererbung ist unter Python möglich.</p>
<div class="figure align-center" id="table-harvest-plugins">
<center><table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="17%" />
<col width="17%" />
<col width="45%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="headalign-center"><em>Schnittstellenname</em></th>
<th class="headalign-center"><em>text</em></th>
<th class="headalign-center"><em>grafisch</em></th>
<th class="headalign-center"><em>Beschreibung</em></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td class="align-center"><em>IMovieProvider</em></td>
<td class="align-center"><span class="math">\(\checkmark\)</span></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Provider&ndash;Plugins, liefert Filmmetadaten</td>
</tr>
<tr class="row-odd"><td class="align-center"><em>IMoviePictureProvider</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center"><span class="math">\(\checkmark\)</span></td>
<td class="align-center">Provider&ndash;Plugins, liefert Filmmetadaten</td>
</tr>
<tr class="row-even"><td class="align-center"><em>IPersonProvider</em></td>
<td class="align-center"><span class="math">\(\checkmark\)</span></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Provider&ndash;Plugins, liefert Personenmetadaten</td>
</tr>
<tr class="row-odd"><td class="align-center"><em>IPersonPictureProvider</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center"><span class="math">\(\checkmark\)</span></td>
<td class="align-center">Provider&ndash;Plugins, liefert Personenmetadaten</td>
</tr>
<tr class="row-even"><td class="align-center"><em>IPostProcessor</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Postprocessor&ndash;Plugins für Metadatennachbearbeitung</td>
</tr>
<tr class="row-odd"><td class="align-center"><em>IConverter</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Converter&ndash;Plugins für verschiedene Metadatenformate</td>
</tr>
</tbody>
</table>
<p class="caption"><strong>Figure 5.6:</strong> Libhugin Plugininterfaces für die verschiedenen libhugin&ndash;harvest Plugins.</p>
</center></div><p id="table-harvest-plugins">Plugins, die für die Metadatenbeschaffung zuständig sind, müssen von den
Providerklassen ableiten (siehe Abbildung <a href="#table-harvest-plugins">5.6</a>). Des
Weiteren müssen diese Plugins die folgenden Methoden implementieren:</p>
<p><tt class="docutils literal"><span class="pre">build_url(search_params)</span></tt>: Diese Methode bekommt die <em>Such&ndash;Parameter</em>
übergeben und baut aus diesen die <em>Such&ndash;URL</em> zusammen.
Für weitere Informationen siehe auch API <a class="reference internal" href="../zzz_bibliography.html#buildurl" id="id12">[Link&ndash;34]</a>.</p>
<p><tt class="docutils literal"><span class="pre">parse_response(response,</span> <span class="pre">search_params)</span></tt>: Diese Methode bekommt die
HTTP&ndash;Response zu der vorher von <tt class="docutils literal"><span class="pre">build_url(search_params)</span></tt> erstellten
<em>Anfrage&ndash;URL</em>. Die Methode ist für das Extrahieren der Attribute aus dem Response
zuständig. Sie gibt entweder eine neue URL zurück, die angefordert werden soll,
oder befüllt eine Hashtabelle mit gefundenen Attributen und gibt diese zurück.
Für weitere Informationen siehe auch <em>libhugin</em>&ndash;API <a class="reference internal" href="../zzz_bibliography.html#parseresponse" id="id13">[Link&ndash;35]</a>.</p>
<p><tt class="docutils literal"><span class="pre">supported_attrs()</span></tt>: Diese Methode gibt eine Liste mit Attributen zurück die
vom Provider befüllt werden.</p>
<p>Plugins, die für die Metadatennachbearbeitung zuständig sind, müssen von
<em>IPostProcessor</em> ableiten (siehe Abbildung <a href="#table-harvest-plugins">5.6</a>).
Des Weiteren müssen diese Plugins die folgenden Methoden implementieren:</p>
<p><tt class="docutils literal"><span class="pre">process(results,</span> <span class="pre">**kwargs)</span></tt>: Diese Methode bekommt ein Liste mit
<em>Ergebnisobjekten</em> übergeben und manipuliert dieses nach bestimmten Kriterien
oder gibt eine neue Liste mit <em>Ergebnisobjekten</em> zurück.</p>
<p><tt class="docutils literal"><span class="pre">parameters()</span></tt>: Die Methode listet die Keyword&ndash;Argumente für ein
<em>Postprocessor</em>&ndash;Plugin.</p>
<p>Plugins, die für das Konvertieren der Ergebnisse in bestimmte Metadatenformate
zuständig sind, müssen von <em>IConverter</em> ableiten (siehe Abbildung
<a href="#table-harvest-plugins">5.6</a>).  Des Weiteren müssen diese Plugins die folgenden
Methoden implementieren:</p>
<p><tt class="docutils literal"><span class="pre">convert(results,</span> <span class="pre">**kwargs)</span></tt>: Diese Methode bekommt ein <em>Ergebnisobjekt</em>
übergeben und gibt die String&ndash;Repräsentation von diesem in einem spezifischen
Metadatenformat wieder.</p>
<p><tt class="docutils literal"><span class="pre">parameters()</span></tt>: Die Methode listet die Keyword&ndash;Argumente für ein
Converter&ndash;Plugin.</p>
</div>
<div class="section" id="klassenubersicht-libhugin-analyze">
<h3>5.2.3 Klassenübersicht <em>libhugin&ndash;analyze</em><a class="headerlink" href="#klassenubersicht-libhugin-analyze" title="Permalink to this headline">¶</a></h3>
<p>Dieser Teil der <em>libhugin</em>&ndash;Bibliothek ist für die nachträgliche Metadatenaufbereitung
zuständig (siehe Abbildung <a href="#fig-klassenuebersicht-analyze">5.7</a>).</p>
<div class="figure align-center" id="fig-klassenuebersicht-analyze">
<a class="reference internal image-reference" href="../../_images/klassenuebersicht-analyze-svg.pdf"><img alt="Libhugin--analyze Klassenübersicht und Interaktion" src="../../_images/klassenuebersicht-analyze-svg.pdf" style="width: 100%;" /></a>
<p class="caption"><strong>Figure 5.7:</strong> &lt;emphasis&gt;Libhugin&ndash;analyze&lt;/emphasis&gt; Klassenübersicht mit Klasseninteraktion.</p>
</div>
<p><strong>Session:</strong>
Diese Klasse bildet den Grundstein für <em>libhugin&ndash;analyze</em>. Sie stellt analog
zur <em>libhugin&ndash;harvest</em> Session die API bereit.</p>
<p><tt class="docutils literal"><span class="pre">add(metadata_file,</span> <span class="pre">helper)</span></tt>: Diese Methode dient zum Importieren externer
Metadaten. Sie erwartet eine Datei mit Metadaten (<tt class="docutils literal"><span class="pre">metadata_file</span></tt>) und als
Callback&ndash;Funktion eine <em>Helferfunktion</em> welche weiß, wie die Metadaten zu
extrahieren sind.</p>
<p>Kurzer Exkurs zur <em>Helferfunktion</em>. Die <em>Helferfunktion</em> hat folgende
Schnittstelle:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">helper_func(metadata,</span> <span class="pre">attr_mask)</span></tt></div></blockquote>
<p>Der <tt class="docutils literal"><span class="pre">attr_mask</span></tt> Parameter gibt die Abbildungen der Attribute zwischen der
<em>externen</em> und <em>internen</em> Datenbank an.</p>
<p>Wir nehmen an unsere Metadaten sind im <em>JSON</em>&ndash;Format gespeichert, beim Einlesen
der <em>JSON&ndash;Datei</em> wird diese zu einer <a class="reference internal" href="../II/index.html#term-hashtabelle"><em class="xref std std-term">Hashtabelle</em></a> konvertiert, die wie
folgt aussieht:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">metadata_the_movie</span> <span class="o">=</span> <span class="o">{</span>
    <span class="s1">&#39;Filmtitel&#39;</span> <span class="o">=</span> <span class="s1">&#39;The Movie&#39;</span>,
    <span class="s1">&#39;Erscheinungsjahr&#39;</span> <span class="o">=</span> <span class="s1">&#39;2025&#39;</span>,
    <span class="s1">&#39;Inhaltsbeschreibung&#39;</span> <span class="o">=</span> <span class="s1">&#39;Es war einmal vor langer langer Zeit...&#39;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Folgendes Python&ndash;Snippet zeigt nun die Funktionalität der <em>Helferfunktion</em>,
welche die Abbildung von externer Quelle auf die interne Datenbank verdeutlicht:</p>
<div class="highlight-python"><div class="highlight"><pre> <span class="n">attr_mask</span> <span class="o">=</span> <span class="p">{</span>
     <span class="s">&#39;Filmtitel&#39;</span><span class="p">:</span> <span class="s">&#39;title&#39;</span><span class="p">,</span>
     <span class="c"># Filmtitel = Attributname unter welchem der Filmtitel</span>
     <span class="c"># in der externen Metadatendatei hinterlegt ist</span>
     <span class="c"># title = Attributname unter dem der Titel</span>
     <span class="c"># in der internen Datenbank abgelegt werden soll</span>
     <span class="c">#</span>
     <span class="c"># folgenden zwei Attribute analog zum Filmtitel</span>
     <span class="s">&#39;Erscheinungsjahr&#39;</span> <span class="o">=</span> <span class="s">&#39;year&#39;</span><span class="p">,</span>
     <span class="s">&#39;Inhaltsbeschreibung&#39;</span><span class="p">:</span> <span class="s">&#39;plot&#39;</span>
 <span class="p">}</span>

<span class="k">def</span> <span class="nf">helper</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="n">attr_mask</span><span class="p">):</span>
    <span class="n">internal_repr</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">metadata_key</span><span class="p">,</span> <span class="n">internal_db_key</span> <span class="ow">in</span> <span class="n">attr_mask</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">internal_repr</span><span class="p">[</span><span class="n">internal_db_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="n">metadata_key</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">internal_repr</span>
</pre></div>
</div>
<p>Weitere Methoden der Session&ndash;Klasse:</p>
<p><tt class="docutils literal"><span class="pre">analyzer_plugins(pluginname=None)</span></tt>: Liefert eine Liste mit den vorhandenen
Analyzer&ndash;Plugins zurück. Bei Angabe eines bestimmten Pluginnamen, wird dieses
Plugin direkt zurückgeliefert.</p>
<p><tt class="docutils literal"><span class="pre">modifier_plugins(pluginname=None)</span></tt>: Analog zu <tt class="docutils literal"><span class="pre">analyzer_plugins()</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">comparator_plugins(pluginname=None)</span></tt>: Analog zu <tt class="docutils literal"><span class="pre">analyzer_plugins()</span></tt>.</p>
<p>Folgende weitere Methoden erlauben es, die <em>libhugin&ndash;analyze</em> Plugins auf <em>externe</em>
Daten anzuwenden:</p>
<p><tt class="docutils literal"><span class="pre">analyze_raw(plugin,</span> <span class="pre">attr,</span> <span class="pre">data)</span></tt>: Wrapper Methode, welche es erlaubt die
Analyzer&ndash;Plugins auf <em>externen</em> Daten auszuführen.</p>
<p><tt class="docutils literal"><span class="pre">modify_raw(plugin,</span> <span class="pre">attr,</span> <span class="pre">data)</span></tt>: Analog zu <tt class="docutils literal"><span class="pre">analyze_raw(plugin,</span> <span class="pre">attr,</span> <span class="pre">data)</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">compare_raw(plugin,</span> <span class="pre">attr,</span> <span class="pre">data)</span></tt>: Analog zu <tt class="docutils literal"><span class="pre">analyze_raw(plugin,</span> <span class="pre">attr,</span> <span class="pre">data)</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">get_database()</span></tt>: Liefert die interne Datenbank (Python&ndash;Dictionary) zurück.</p>
<p>Für das Öffnen und Schließen der internen Datenbank der Session gibt es folgende
zwei Methoden:</p>
<p><tt class="docutils literal"><span class="pre">database_open(databasename)</span></tt>: Lädt die angegebene Datenbank.</p>
<p><tt class="docutils literal"><span class="pre">database_close()</span></tt>: Schließt und schreibt die aktuelle Datenbank persistent auf
die Festplatte.</p>
<p><strong>Movie:</strong>
Die Movie Klasse repräsentiert ein Metadatenobjekt welches in der internen
Datenbank zur Analyse gespeichert wird. Es enthält folgende Attribute:</p>
<blockquote>
<div><ul class="simple">
<li>Schlüssel, über den die Metadaten eindeutig zugeordnet werden können.</li>
<li>Pfad zur Metadatendatei.</li>
<li>Hashtabelle mit den Metadaten.</li>
<li>Hashtabelle mit Analyzer&ndash;Analysedaten.</li>
<li>Hashtabelle mit Comparator&ndash;Analysedaten.</li>
</ul>
</div></blockquote>
<p><strong>PluginHandler:</strong>
Die PluginHandler&ndash;Klasse hat analog zum <em>libhugin&ndash;harvest</em> die folgenden
Schnittstellen:</p>
<p><tt class="docutils literal"><span class="pre">activate_plugin_by_category(category)</span></tt>: Aktiviert Plugins einer bestimmten
Kategorie.</p>
<p><tt class="docutils literal"><span class="pre">deactivate_plugin_by_category(category)</span></tt>: Deaktiviert Plugins einer bestimmten
Kategorie.</p>
<p><tt class="docutils literal"><span class="pre">get_plugins_from_category(category)</span></tt>: Liefert Plugins einer bestimmten
Kategorie zurück.</p>
<p><tt class="docutils literal"><span class="pre">is_activated(category)</span></tt>: Gibt einen Wahrheitswert zurück, wenn eine Kategorie
bereits aktiviert ist.</p>
</div>
<div class="section" id="plugininterface-libhugin-analyze">
<h3>5.2.4 Plugininterface libhugin&ndash;analyze<a class="headerlink" href="#plugininterface-libhugin-analyze" title="Permalink to this headline">¶</a></h3>
<p><em>Libhugin&ndash;analyze</em> bietet für jeden Plugintyp eine bestimmte Schnittstelle an,
die vom jeweiligen Plugintyp implementiert werden muss (siehe Abbildung <a href="#fig-analyze">5.8</a>).</p>
<div class="figure align-center" id="fig-analyze">
<a class="reference internal image-reference" href="../../_images/analyze-plugin-interface.pdf"><img alt="Libhugin--analyze Plugin Schnittstellenbeschreibung" src="../../_images/analyze-plugin-interface.pdf" style="width: 100%;" /></a>
<p class="caption"><strong>Figure 5.8:</strong> Libhugin&ndash;analyze Plugin Schnittstellenbeschreibung.</p>
</div>
<p>Die <em>libhugin&ndash;analyze</em> Plugins haben die Möglichkeiten, von den folgenden
Oberklassen abzuleiten:</p>
<div class="figure align-center" id="table-analyze-plugins">
<center><table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="headalign-center"><em>Schnittstellenname</em></th>
<th class="headalign-center"><em>Beschreibung</em></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td class="align-center"><em>IModifier</em></td>
<td class="align-center">Modifier&ndash;Plugins, die Metadaten direkt modifizieren.</td>
</tr>
<tr class="row-odd"><td class="align-center"><em>IAnalyzer</em></td>
<td class="align-center">Analyzer&ndash;Plugins, die für die Analyse der Metadaten zuständig sind.</td>
</tr>
<tr class="row-even"><td class="align-center"><em>IComparator</em></td>
<td class="align-center">Comparator&ndash;Plugins, die Metadaten für statistische Zwecke vergleichen.</td>
</tr>
</tbody>
</table>
<p class="caption"><strong>Figure 5.9:</strong> Libhugin Plugininterfaces für die verschiedenen libhugin&ndash;analyze Plugins.</p>
</center></div><p id="table-analyze-plugins">Plugins, die Metadaten modifizieren, müssen von <em>IModifier</em> ableiten (siehe
Abbildung <a href="#table-analyze-plugins">5.9</a>). Diese Plugins müssen folgende Methoden
implementieren:</p>
<p><tt class="docutils literal"><span class="pre">modify(movie,</span> <span class="pre">**kwargs)</span></tt>: Die Standardmethode für Modifierplugins. Die
Methode bekommt ein <em>Movie&ndash;Objekt</em> und optional Keyword&ndash;Argumente übergeben.
Die nötigen Keyword&ndash;Argumente können über die <tt class="docutils literal"><span class="pre">parameters()</span></tt>&ndash;Methode abgefragt
werden.</p>
<p><tt class="docutils literal"><span class="pre">modify_all(database,</span> <span class="pre">**kwargs)</span></tt>: Analog zur <tt class="docutils literal"><span class="pre">modify(movie,</span>
<span class="pre">kwagrs)</span></tt>&ndash;Methode. Diese Methode arbeitet jedoch nicht mit nur einem Movie
Objekt sondern mit der ganzen ,,Datenbank&quot;.</p>
<p><tt class="docutils literal"><span class="pre">parameters()</span></tt>: Die Methode listet die Keyword&ndash;Argumente für ein Modifierplugin.</p>
<p>Plugins, die für die Analyse der Metadaten zuständig sind, müssen von <em>IAnalyzer</em>
ableiten (siehe Abbildung <a href="#table-analyze-plugins">5.9</a>). Diese Plugins schreiben
ihre Analysedaten in das <em>Analyzerdata</em>&ndash;Attribut des <em>Movie&ndash;Objekts</em>.  Sie
müssen folgende Methoden implementieren:</p>
<p><tt class="docutils literal"><span class="pre">analyze(movie,</span> <span class="pre">**kwargs)</span></tt>: Die Standardmethode für Analyzerplugins. Die
Anwendung hier ist analog den Modifierplugins.</p>
<p><tt class="docutils literal"><span class="pre">analyze_all(database,</span> <span class="pre">**kwargs)</span></tt>: Analog Modifierplugins.</p>
<p><tt class="docutils literal"><span class="pre">parameters()</span></tt>: Analog zu Modifierplugins.</p>
<p>Plugins, die Metadaten für statistische Zwecke analysieren und vergleichen
können, müssen von <em>IComparator</em> ableiten (siehe Abbildung
<a href="#table-analyze-plugins">5.9</a>). Des Weiteren müssen diese Plugins folgende
Methoden implementieren:</p>
<p><tt class="docutils literal"><span class="pre">compare(movie_a,</span> <span class="pre">movie_b,</span> <span class="pre">**kwargs)</span></tt>: Die Standardmethode für
Comparatorplugins. Diese erwartet als Parameter zwei <em>Movie&ndash;Objekte</em>, die
verglichen werden sollen. Die Keyword&ndash;Argumente können analog den Modifier&ndash;
und Analyzerplugins verwendet werden.</p>
<p><tt class="docutils literal"><span class="pre">compare_all(database,</span> <span class="pre">**kwargs)</span></tt>: Diese Methode vergleicht alle
<em>Movie&ndash;Objekt</em> Kombinationen aus der Datenbank.</p>
<p><tt class="docutils literal"><span class="pre">parameters()</span></tt>: Analog zu Modifier- und Analyzerplugins.</p>
</div>
</div>
<div class="section" id="bibliothek-dateistruktur">
<h2>5.3 Bibliothek Dateistruktur<a class="headerlink" href="#bibliothek-dateistruktur" title="Permalink to this headline">¶</a></h2>
<p>Die folgende Auflistung zeigt die Ordnerstruktur der Bibliothek.  Normalerweise
enthält unter Python jeder Ordner eine <cite>__init__.py&ndash;Datei</cite> welche diesen Ordner
dann als Modul erscheinen lässt. Diese wurden wegen der Übersichtlichkeit
weggelassen.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">hugin</span>
<span class="o">|--</span> <span class="n">harvest</span><span class="o">/</span>                           <span class="c"># libhugin--harvest Ordner</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="n">session</span><span class="o">.</span><span class="n">py</span>                     <span class="c"># Implementierungen der Session</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="n">query</span><span class="o">.</span><span class="n">py</span>                       <span class="c"># Implementierungen der Query</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="n">cache</span><span class="o">.</span><span class="n">py</span>                       <span class="c"># Implementierungen vom Cache</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="n">downloadqueue</span><span class="o">.</span><span class="n">py</span>               <span class="c"># Implementierungen der Downloadqueue</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="n">pluginhandler</span><span class="o">.</span><span class="n">py</span>               <span class="c"># Implementierungen vom PluginHandler</span>
<span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="n">converter</span><span class="o">/</span>                      <span class="c"># Ordner für Converter--Plugins</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="n">postprocessor</span><span class="o">/</span>                  <span class="c"># Ordner für Postprocessor--Plugins</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="n">provider</span><span class="o">/</span>                       <span class="c"># Ordner für Provider--Plugins</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="n">genrefiles</span><span class="o">/</span>                 <span class="c"># Genre Dateien für ,,Normalisierung&quot;</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="n">normalized_genre</span><span class="o">.</span><span class="n">dat</span>    <span class="c"># Globale Normalisierungstabelle Genre</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="n">result</span><span class="o">.</span><span class="n">py</span>                   <span class="c"># Implementierung ,,ErgebnisObjekt&quot;</span>
<span class="o">|</span>   <span class="o">|</span>   <span class="o">|--</span> <span class="n">genrenorm</span><span class="o">.</span><span class="n">py</span>                <span class="c"># Implementierung Genrenormalisierung</span>
<span class="o">|--</span> <span class="n">utils</span><span class="o">/</span>                              <span class="c"># Gemeinsame Hilfsfunktionen</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="n">logutil</span><span class="o">.</span><span class="n">py</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="n">stringcompare</span><span class="o">.</span><span class="n">py</span>
<span class="o">|</span>
<span class="o">|--</span> <span class="n">analyze</span><span class="o">/</span>                            <span class="c"># libhugin--analyze Ordner</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="n">session</span><span class="o">.</span><span class="n">py</span>                      <span class="c"># Implementierungen der o.g. Klassen</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="n">movie</span><span class="o">.</span><span class="n">py</span>                        <span class="c"># Implementierung des ,,Movie&quot; Objektes</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="n">pluginhandler</span><span class="o">.</span><span class="n">py</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="n">rake</span><span class="o">.</span><span class="n">py</span>                         <span class="c"># Implementierung Rake Algorithmus</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="n">analyzer</span><span class="o">/</span>                       <span class="c"># Ordner für Analyzer--Plugins</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="n">comparator</span><span class="o">/</span>                     <span class="c"># Ordner für Comparator--Plugins</span>
<span class="o">|</span>   <span class="o">|--</span> <span class="n">modifier</span><span class="o">/</span>                       <span class="c"># Ordner für Modifier--Plugins</span>
<span class="o">|--</span> <span class="n">filewalk</span><span class="o">.</span><span class="n">py</span>                         <span class="c"># Helferfunktion für Import/Export</span>
</pre></div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../VI/index.html" class="btn btn-neutral float-right" title="6 Implementierung"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../IV/index.html" class="btn btn-neutral" title="4 Softwarespezifikation"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright by Christoph Piechula, 2013-2014..
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>