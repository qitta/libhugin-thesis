

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Projektarbeit</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'../',
        VERSION:'0.1',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="None" href="../index.html"/>

<!-- Include all CSS and JS files, let's you use your own theme. -->

<link rel="stylesheet" type="text/css" href="../_static/custom.css" />
<script type="text/javascript">
	function endsWith(str, suffix) {
	    return str.indexOf(suffix, str.length - suffix.length) !== -1;
	}

    $(document).ready(function() {
    	var im, imsrc;
    	$('img').each(function() {
    		im = $(this);
    		imsrc = im.attr('src');
    		imalt = im.attr('alt');
    		if (endsWith(imsrc, 'svg')) {
    			im.wrap($('<a>').attr({'href': imsrc, 'title': imalt}).addClass('svglink'));
    		}
    	});

    	$('a.svglink').colorbox({
    		'width': '95%',
    		'height': '95%',
    		'photo': true});
    });
</script>


  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html#document-rst/index" class="icon icon-home"> Projektarbeit</a>
        <form class="wy-form" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/abstract">Abstract</a></li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/acknowledgements">Danksagung</a></li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/dedication">Widmung</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/I/index">1 Einleitung</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/I/index#motivation">1.1 Motivation</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/I/index#namensgebung">1.2 Namensgebung</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/II/index">2 Einstieg</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/II/index#einsatzszenarien">2.1 Einsatzszenarien</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/II/index#vorhandene-alternativen">2.2 Vorhandene Alternativen</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/II/index#vorhandene-arbeiten">2.3 Vorhandene Arbeiten</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/II/index#schlussfolgerungen">2.4 Schlussfolgerungen</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/II/index#anforderungen">2.5 Anforderungen</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/II/index#zielgruppe">2.6 Zielgruppe</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/III/index">3 Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/III/index#algorithmik">3.1 Algorithmik</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/III/index#integration-von-libmunin-in-die-umwelt">3.2 Integration von <em>libmunin</em> in die Umwelt</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/III/index#entwurf-der-software">3.3 Entwurf der Software</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/IV/index">4 Implementierung</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/IV/index#anwendungsbeispiel">4.1 Anwendungsbeispiel</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/IV/index#kurze-implementierungshistorie">4.2 Kurze Implementierungshistorie</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/IV/index#liste-verfugbarer-empfehlungs-strategien">4.3 Liste verfügbarer Empfehlungs-Strategien</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/IV/index#liste-verfugbarer-provider-und-distanzfunktionen">4.4 Liste verfügbarer Provider und Distanzfunktionen</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/IV/index#modul-und-paketubersicht">4.5 Modul- und Paketübersicht</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/IV/index#trivia">4.6 Trivia</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/V/index">5 Demonstrationsanwendung</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/V/index#intro">5.1 Intro</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/V/index#anwendungsubersicht">5.2 Anwendungsübersicht</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/VI/index">6 Zusammenfassung</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/VI/index#was-wurde-erreicht">6.1 Was wurde erreicht?</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/VI/index#was-hatte-das-mit-data-mining-zu-tun">6.2 Was hatte das mit Data-Mining zu tun?</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/VI/index#welche-anforderungen-wurden-nicht-oder-unvollstandig-erfullt">6.3 Welche Anforderungen wurden nicht oder unvollständig erfüllt?</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/VI/index#implementierungsdefizite">6.4 Implementierungsdefizite</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/VI/index#denkbare-weiterentwicklungen">6.5 Denkbare Weiterentwicklungen</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/VI/index#abschlieszendes-fazit">6.6 Abschließendes Fazit</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/appendix">Abkürzungsverzeichnis</a></li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/appendix#glossar">Glossar</a></li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/appendix#coldstart-py"><tt class="docutils literal"><span class="pre">coldstart.py</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/appendix#ausfuhrliches-beispiel">Ausführliches Beispiel</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/appendix#ausgabe-nach-dem-ersten-lauf">Ausgabe nach dem ersten Lauf:</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/appendix#ausgabe-nach-dem-10ten-lauf">Ausgabe nach dem 10ten Lauf:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/zzz_bibliography">Bibliographie</a></li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/zzz_bibliography#weblink-verzeichnis">Weblink Verzeichnis</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">Projektarbeit</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="index.html#document-rst/index">Docs</a> &raquo;</li>
  <li><a href="">Projektarbeit</a></li>
  
</ul>
<hr/>

          
  <div class="section" id="libmunin-br-projektarbeit">
<span id="doc-title"></span><h1>libmunin: <br /> Projektarbeit<a class="headerlink" href="#libmunin-br-projektarbeit" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<span id="document-rst/abstract"></span><div class="section" id="abstract">
<h2>Abstract<a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
</div>
<p>This paper shows a way to build a music recommendation system based on
datamining algorithms and a nearest neighbor graph. A extensible python library
is developed, using a variety of inputs differing from music metadata like
lyrics or the genre to the analysis of the associated audio data. In order to
demonstrate and verify the results, a gtk based MPD client is developed that can
be used either as debugging tool or true media player. Various techniques are
shown to compare all possible attributes of a song with each other in an
efficient way.</p>
<p><em>Keywords:</em></p>
<blockquote>
<div><p><span class="math">\(\Theta\)</span> Music Information Retrieval (<em>MIR</em>)</p>
<p><span class="math">\(\Theta\)</span> Music Recommendation Engine</p>
<p><span class="math">\(\Theta\)</span> Data-Mining</p>
<p><span class="math">\(\Theta\)</span> Graph-Theory</p>
</div></blockquote>
<span id="document-rst/acknowledgements"></span><div class="section" id="danksagung">
<h2>Danksagung<a class="headerlink" href="#danksagung" title="Permalink to this headline">¶</a></h2>
</div>
<p>Danke an folgende Personen und Dinge: Katzen, Vögel aller Art, Teehersteller
alle Länder, Herrn Prof. Dr. Jörg Scheidt und meiner Familie sowie Freunden.</p>
<p>Ihr wisst warum.</p>
<span id="document-rst/dedication"></span><div class="section" id="widmung">
<h2>Widmung<a class="headerlink" href="#widmung" title="Permalink to this headline">¶</a></h2>
</div>
<p><em>Für meine Katzen.</em></p>
</div>
<div class="toctree-wrapper compound">
<span id="document-rst/I/index"></span><div class="section" id="einleitung">
<h2>1 Einleitung<a class="headerlink" href="#einleitung" title="Permalink to this headline">¶</a></h2>
<blockquote class="epigraph">
<div><p><em>,,Sei froh dass du du bist, und nicht dieser Doktorfisch.''</em></p>
<p class="attribution">&mdash;<em>Das Lied von der Makrele, Marc Uwe Kling</em></p>
</div></blockquote>
<div class="section" id="motivation">
<h3>1.1 Motivation<a class="headerlink" href="#motivation" title="Permalink to this headline">¶</a></h3>
<div class="section" id="stand-der-technik">
<h4>1.1.1 Stand der Technik<a class="headerlink" href="#stand-der-technik" title="Permalink to this headline">¶</a></h4>
<p>Empfehlungen sind allgegenwärtig. Ob in sozialen Netzwerken, ob in
Webshops oder gar im Supermarkt.  Besonders im weltweitem Netz gibt es eine
Vielzahl von Plattformen die Musik anbieten, entweder zum Kaufen (<em>Amazon</em>), zum
<em>Streamen</em> (<tt class="docutils literal"><span class="pre">Last.fm</span></tt>, <em>Spotify</em>, <em>Rhapsody</em>, <em>Pandora</em>, <em>u.v.m</em>) oder auch um
Menschen mit ähnlichem Musik Geschmack zu finden (<em>YouTube,</em> <em>Myspace</em>).</p>
<p>All diese Plattformen bieten neben der eigentlichen Musik auch immer
Empfehlungen zu anderen Songs die der Benutzer möglicherweise ebenfalls anhören
möchte - natürlich mit dem Hintergedanken, dass der Benutzer sich auch diese anhört
oder gar kauft. Kunden die neue Bands entdecken und später weitere Alben von
diesen bestellen sind natürlich ein wichtiger wirtschaftlicher Faktor.</p>
<p>Doch wie entstehen solche Empfehlungen eigentlich? Werden diese manuell
von den Betreibern gepflegt? Bei der großen Anzahl an <em>,,Waren''</em> wohl kaum.
Schaut sich ein System an was die Benutzer oft zusammen hören?
Kann es ein System geben, das komplett automatisch arbeitet?</p>
<p>Die oben genannten Plattformen lösen diese Probleme auf unterschiedliche Weise.
Amazon verlässt sich dabei auf die großen Mengen an gespeicherten Warenkörben -
aus diesen werden dann Alben abgeleitet, die oft zusammen gekauft werden.
<tt class="docutils literal"><span class="pre">Last.fm</span></tt> hingegen setzt auf mehrere Strategien indem es seine Nutzer die
gestreamten Lieder bewerten lässt und dann deren Hörverhalten analysiert -
Lieder die nur selten ganz angehört werden, werden auch selten empfohlen.
<em>Myspace</em> setzt auf die Annahme, dass befreundete Personen auch einen ähnlichen
Musikgeschmack haben. <em>Spotify's</em> Empfehlungen basieren teilweise auf Interviews
mit echten Personen.</p>
<p>Wie man sieht sind die Wege nahezu unendlich, das Ziel aber immer gleich:
Musikempfehlungen auszusprechen, die den Nutzer länger auf der Seite halten.</p>
<p>In letzter Zeit gibt es ein steigendes Interesse an <em>,,Music Recommendation
Engines</em> - das lässt sich auch an den wissenschaftlichen Arbeiten auf diesem
Gebiet feststellen:</p>
<div class="figure align-center">
<center><table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="19%" />
<col width="31%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="headalign-center">Jahre</th>
<th class="headalign-center">Anzahl</th>
<th class="headalign-center">Jahre</th>
<th class="headalign-center">Anzahl</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td class="align-center">1994-2000</td>
<td class="align-center">1</td>
<td class="align-center">2007-2008</td>
<td class="align-center">8</td>
</tr>
<tr class="row-odd"><td class="align-center">2001-2002</td>
<td class="align-center">4</td>
<td class="align-center">2009-2010</td>
<td class="align-center">9</td>
</tr>
<tr class="row-even"><td class="align-center">2003-2004</td>
<td class="align-center">3</td>
<td class="align-center">2011-2012</td>
<td class="align-center">6</td>
</tr>
<tr class="row-odd"><td class="align-center">2005-2006</td>
<td class="align-center">8</td>
<td class="align-center">2013-2014</td>
<td class="align-center">5+</td>
</tr>
</tbody>
</table>
<p class="caption">Anzahl der Arbeiten auf Google Scholar zum Suchbegriff
,,Music Recommendation'' aufgeteilt auf die Jahre 1994-2014.</p>
</center></div><p>Und mittlerweile gibt es mit <em>Music Recommendation and Discovery</em> sogar ein 200
Seiten starkes Buch zum Thema. <a class="reference internal" href="rst/index.html#celma2010music" id="id1">[1]</a>.</p>
</div>
<div class="section" id="was-fehlt-also">
<h4>1.1.2 Was fehlt also?<a class="headerlink" href="#was-fehlt-also" title="Permalink to this headline">¶</a></h4>
<p>Viele dieser Arbeiten präsentieren jeweils einen Weg um die Ähnlichkeit zweier
Musikstücke zu bestimmen - viele greifen dabei auf Audioanalyse zurück, also
beispielsweise die Bestimmung der Schnelligkeit und der Stimmung des Liedes,
oder nutzen vorhandene Metadaten um beispielsweise aus den Songtexten die Themen
zu extrahieren die im Lied behandelt werden.</p>
<p>Dabei sind heutzutage die Metadaten zu den Musikstücken dank Musikmetadatenbanken
wie <em>MusicBrainz</em> <a class="footnote-reference" href="#f1" id="id2"><sup>1</sup></a> leicht aufzufinden - lediglich die Audiodaten sind aus
verständlichen, legalen Gründen schwer zu besorgen.</p>
<p>Die nötigen Bauteile und das Wissen um ein allgemein einsetzbares, qualitatives
Musikempfehlungssystem zu schaffen sind also vorhanden - nur eine frei
verfügbare Umsetzung fehlt.</p>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[1]</a></td><td>eine frei verfügbare Musikmetadatendatenbank. <a class="reference internal" href="rst/index.html#a3" id="id3">[Link-1]</a></td></tr>
</tbody>
</table>
</div>
<div class="section" id="quo-vadis">
<h4>1.1.3 Quo vadis?<a class="headerlink" href="#quo-vadis" title="Permalink to this headline">¶</a></h4>
<p>Weit verbreitet sind bei Musicplayern <em>,,Intelligente Playlists''</em> <a class="footnote-reference" href="#f4" id="id4"><sup>4</sup></a>  die
allerdings bei den meisten Implementierungen bei vorhandenen Plattformen wie
<tt class="docutils literal"><span class="pre">Last.fm</span></tt> suchen, um Musikempfehlungen auszusprechen - was  keineswegs eine
schlechte Lösung ist, denn solche Dienste können sehr gute Resultate liefern.</p>
<p>Trotzdem ist die Abhängigkeit von externen Diensten und einer Internetverbindung
nicht immer möglich oder gar wünschenswert - eine Lösung welche rein auf
einem Rechner laufen kann wäre von Nöten - gewißermaßen das Backend von
<tt class="docutils literal"><span class="pre">Last.fm</span></tt> für den freien (frei wie in <em>Free Open Source Software</em>) Einsatz.</p>
<p>Ein zusätzlicher Vorteil: Man entgeht einerseits der Werbung, die bei den
meisten Diensten  zwischen allen paar Liedern gespielt wird, andererseits ist
man nicht einer Vorauswahl der Musiklabels unterworfen - denn meist wird nur die
momentan <em>populäre</em> Musik bei den oben genannten Plattformen gespielt. Zudem ist
diese Musik kommerzieller Natur - freie, <em>Creative Commons</em> lizenzierte Musik,
wie man sie beispielsweise auf Jamendo <a class="footnote-reference" href="#f3" id="id5"><sup>3</sup></a> findet, sucht man anderswo
vergebens.</p>
<p>Dadurch dass das entstehende System frei in den Quellen verfügbar sein soll, kann
jeder daran mitarbeiten und es selbst einsetzen. Im Gegensatz zu den
existierenden Backends, wie sie beispielsweise hinter <tt class="docutils literal"><span class="pre">Last.fm</span></tt> stehen, wäre
ein solches System auf Qualität optimiert - weniger auf Wirtschaftlichkeit,
sprich anstatt Empfehlungen die mehr Geld einbringen sollen nachvollziehbare
qualitative Empfehlungen möglich sein.</p>
<p>Die Tatsache, dass der Autor sich schon seit längerer Zeit ein <em>,,echtes''</em>
Feature für <em>,,Intelligente Playlisten''</em> für den MPD Client <a class="footnote-reference" href="#f4" id="id6"><sup>4</sup></a> den er
entwickelt wünscht, trägt natürlich auch zur Motivation bei - vor allem soll
deshalb auch nach dem Abschluss dieser Arbeit das Projekt weiterentwickelt
werden.</p>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="f2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td><em>Intelligente Playlisten</em> bezeichnen die automatisch nach bestimmten
Kriterien aus einen Pool von Songs fortlaufen generiert werden.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="f3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[3]</a></td><td>Eine Streaming Plattform für freie, <em>Creative Commons</em> lizensierte Musik. <a class="reference internal" href="rst/index.html#t" id="id7">[Link-2]</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="f4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[4]</td><td><em>(<a class="fn-backref" href="#id4">1</a>, <a class="fn-backref" href="#id6">2</a>)</em> Ein MPD Client ist eine <em>,,Fernbedienung''</em> für den unter Unix weit
vebreitenden MPD (MusicPlayerDaemon).</td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="namensgebung">
<h3>1.2 Namensgebung<a class="headerlink" href="#namensgebung" title="Permalink to this headline">¶</a></h3>
<p>Menschen neigen dazu Dingen einen Namen zu geben - im Folgenden wird unser
geplantes Musikempfehlungssystem <em>libmunin</em> genannt.</p>
<blockquote class="epigraph">
<div><p>In Norse mythology, Hugin (from Old Norse “thought”)
and Munin (Old Norse “memory” or “mind”)
are a pair of ravens that fly all over the world Midgard,
and bring information to the god Odin.</p>
<p class="attribution">&mdash;<a class="reference external" href="http://en.wikipedia.org/wiki/Huginn_and_Muninn">http://en.wikipedia.org/wiki/Huginn_and_Muninn</a> <a class="reference internal" href="rst/index.html#wiki2014hugin" id="id8">[8]</a></p>
</div></blockquote>
<p>Der Name <em>Munin</em> war bereits vergeben an ein Monitoring Tool, deswegen wurde die
Bibliothek <em>libmunin</em> benannt. Das hat den humorvollen Nebeneffekt dass eine
kommerzielle Bibliothek mit ähnlichem Namen (<em>mufin-audiogen</em> <a class="reference internal" href="rst/index.html#ikc" id="id9">[Link-3]</a>) eine
freie Alternative erhält.</p>
</div>
</div>
<span id="document-rst/II/index"></span><div class="section" id="einstieg">
<h2>2 Einstieg<a class="headerlink" href="#einstieg" title="Permalink to this headline">¶</a></h2>
<blockquote class="epigraph">
<div><p><em>,,Der Computer wurde zur Lösung von Problemen erfunden, die es früher nicht gab.''</em></p>
<p class="attribution">&mdash;<em>Bill Gates</em></p>
</div></blockquote>
<div class="section" id="einsatzszenarien">
<h3>2.1 Einsatzszenarien<a class="headerlink" href="#einsatzszenarien" title="Permalink to this headline">¶</a></h3>
<p>Wo ist also das konrekte Problem, dass <em>libmunin</em> nun lösen soll?
Das erklärte Ziel ist es eine Bibliothek zu schaffen, die
einen auf Musik spezialisierten <em>Empfehlungsdienst</em> implementiert.
In dieser Arbeit wird ein entsprechender Prototyp entwickelt.</p>
<blockquote class="epigraph">
<div><p><em>Ein Empfehlungsdienst (englisch Recommender System) ist ein automatisches
Verfahren, das ausgehend von vorhandenen Webseiten oder anderen Objekten
ähnliche Objekte ermittelt und empfiehlt. Zur Ermittlung der passenden
Empfehlungen verwendet ein Empfehlungsdienst Methoden des Data-Minings und
Information Retrieval. [...] darüber hinaus [werden] Informationen aus dem
konkreten Kontext (Webseiten-Zugriff) und zusätzliche Informationen wie z.
B. die Kauf-, Navigations- oder Klick-Historie herangezogen.</em></p>
<p class="attribution">&mdash;<a class="reference external" href="http://de.wikipedia.org/wiki/Empfehlungsdienst">http://de.wikipedia.org/wiki/Empfehlungsdienst</a> <a class="reference internal" href="rst/index.html#wiki2014empfehlungsdienst" id="id1">[7]</a></p>
</div></blockquote>
<p>Einsatzmöglichkeiten eines auf Musik spezialisierten <em>Empfehlungsdienstes</em>:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Einsatz in Mediaplayern für große, meist lokale Musiksammlungen.</li>
<li>Einsatz bei Music Streaming Plattformen als Backend für Empfehlungen.</li>
<li>Einsatz bei Music Shops, um ähnliche Artikel vorzuschlagen.</li>
<li>Einsatz bei Webradios als <em>DJ-Software</em> zur Erstellung einer automatischen,
intelligenten Playlist.</li>
<li>Einsatz in sozialen Netzwerken um Menschen mit ähnlichem Musikgeschmack
zu finden.</li>
</ol>
</div></blockquote>
<p>Weitere Einsatzmöglichkeiten sind natürlich denkbar, und sind bei kreativen
Nutzern zu erwarten.</p>
</div>
<div class="section" id="vorhandene-alternativen">
<h3>2.2 Vorhandene Alternativen<a class="headerlink" href="#vorhandene-alternativen" title="Permalink to this headline">¶</a></h3>
<p>Wenn man vermeiden will das Rad neu zu erfinden, ist es hilfreich sich vorhandene
Alternativen anzuschauen und deren Herangehensweise an das Problem. Es werden
einige ausgewählte Plattformen aller Couleur gezeigt und deren Funktionsweise
und Besonderheiten kurz erklärt.</p>
<div class="section" id="bekannte-plattformen">
<h4>2.2.1 Bekannte Plattformen<a class="headerlink" href="#bekannte-plattformen" title="Permalink to this headline">¶</a></h4>
<p>TODO: Nachweise!</p>
<ul>
<li><p class="first"><strong>last.fm</strong> <a class="reference internal" href="rst/index.html#nt" id="id2">[Link-4]</a></p>
<blockquote>
<div><p>Der wohl bekannteste Musik Empfehlungs-Service im Netz. Benutzer können sich
mit ihren Account ein personalisiertes Webradio (auch <em>Station</em> genannt,
siehe Abb. ) zusammenstellen. Dabei wählen sie ein
Lied auf der Seite aus und lassen sich darauf basierend dann weitere Lieder
oder Künstler (siehe Abb. ) vorschlagen,
die in eine ähnliche Richtung gehen. Für viele Musicplayer gibt es Plugins,
die die gespielten Lieder zu last.fm übermitteln. Diesen Vorgang nennen die
Betreiber <em>scrobbeln</em>. Durch diese Informationen werden dann spezialisierte
Empfehlungen getroffen - es handelt sich also um ein lernendes System.</p>
<div class="figure compound align-center" id="fig-lastfm">
<div style="width: 50%" class="subfigure align-center" id="fig-lastfm-similar-artists">
<a class="reference internal image-reference" href="../../_images/lastfm_similar_artists.png"><img alt="Ähnliche Künstler auf last.fm" src="../../_images/lastfm_similar_artists.png" style="width: 75%;" /></a>
<p class="caption">Anzeige ähnlicher Künstler auf last.fm</p>
</div>
<div style="width: 50%" class="subfigure align-center" id="fig-lastfm-webradio">
<a class="reference internal image-reference" href="../../_images/lastfm_spotify_radio.png"><img alt="Eine *Station* auf Spotify" src="../../_images/lastfm_spotify_radio.png" style="width: 100%;" /></a>
<p class="caption">Eine <em>Station</em> zu der Band Knorkator, auf Spotify (Empfehlungen von last.fm)</p>
</div>
<p class="caption">Screenshots von Last.fm.</p>
</div></div></blockquote>
</li>
<li id="fig-lastfm"><p class="first"><strong>YouTube</strong> <a class="reference internal" href="rst/index.html#wnn" id="id3">[Link-5]</a></p>
<blockquote>
<div><p>Youtube ist vorrangig als Video-Plattform bekannt, durch die enorme
Beliebtheit laden dort Nutzer allerdings auch Musik - verpackt als Video -
hoch. Interessant dabei ist, dass in der Sidebar stets Empfehlungen für
weitere Videos angezeigt (siehe Abb. ) werden - in den meisten
Fällen dann auch weitere Musikvideos. Dabei haben die (meisten) Videos auch
etwas mit dem Aktuellen zu tun.</p>
<p>Einige der Attribute die in die Empfehlung mit eingehen:</p>
<blockquote>
<div><ul class="simple">
<li>Videometadaten (Qualität, Beschreibung, Titel)</li>
<li>Upload-Datum</li>
<li>,,Plays'' und tatsächliche ,,Plays'' (also ob das Video lang genug
angeschaut wurde)</li>
</ul>
</div></blockquote>
<div class="figure align-center" id="fig-youtube">
<a class="reference internal image-reference" href="../../_images/youtube_sidebar.png"><img alt="Sidebar eines Youtube Videos" src="../../_images/youtube_sidebar.png" style="width: 80%;" /></a>
<p class="caption">Die Vorschläge zu einem Musikvideo auf YouTube</p>
</div>
</div></blockquote>
</li>
<li><p class="first"><strong>Myspace</strong></p>
<blockquote>
<div><p>Obwohl das soziale Netzwerk Myspace seine besten Tage hinter sich hat, haben
viele Bands noch auf der Seite ein Profil unter dem man sich oft kostenlos
Musik anhören kann (siehe Abb. ). Ähnlich wie bei anderen
populären sozialen Netzen kann man diese Seite <em>liken</em>. Diese Information
wird dann dafür genutzt einem Benutzer Bands vorzuschlagen, die auch seine
Freunde mögen - unter der Annahme dass die Freunde einen ähnlichen
Musikgeschmack haben.</p>
<div class="figure align-center" id="fig-myspace">
<a class="reference internal image-reference" href="../../_images/myspace_queue.png"><img alt="Die Playlist von MySpace" src="../../_images/myspace_queue.png" style="width: 50%;" /></a>
<p class="caption">Die Vorschläge die MySpace basierend auf den ersten Song macht.</p>
</div>
</div></blockquote>
</li>
<li><p class="first"><strong>Amazon</strong> <a class="reference internal" href="rst/index.html#xxx" id="id4">[Link-6]</a></p>
<blockquote>
<div><p>Den Grundstein für die Empfehlungen bei Amazon bildet die Warenkorbanalyse.
Dabei werden die Warenkörbe der Benutzer analysiert und es werden
Assoziationsregeln erstellt - bevorzugtermaßen Regeln die unerwartete
Zusammenhänge aufdecken. Ein Kauf ist auch eine klarere <em>Absichtserklärung</em>
als zB. ein Klick auf <em>YouTube</em>. Das typische Beispiel ist dabei: <em>,,Wer
Bier kauft, kauft auch Windeln''</em>. Diese Regeln werden dann genutzt um neue
Artikel für bestimmte Artikel vorzuschlagen (siehe Abb. ).
Natürlich fließt auch die personalisierte Shopping-Historie in die
Empfehlungen mit ein.</p>
<div class="figure align-center" id="fig-amazon">
<a class="reference internal image-reference" href="../../_images/amazon_recommendations.png"><img alt="Empfehlungen von Amazon.com" src="../../_images/amazon_recommendations.png" style="width: 100%;" /></a>
<p class="caption">Zu fast jedem Artikel erhält man Empfehlungen was man noch kaufen
könnte. Hier zu <em>Knorkator - The Schlechtest of</em></p>
</div>
</div></blockquote>
</li>
</ul>
<p><strong>Musicovery</strong> <a class="reference internal" href="rst/index.html#zmf" id="id5">[Link-7]</a></p>
<blockquote>
<div><p>Diese Seite kategorisiert eine große Anzahl von Musikstücken nach Stimmung
(<em>dunkel</em> bis <em>positiv</em>) und Tempo (<em>ruhig</em> bis <em>energiegeladen</em>). Diese zwei
Attribute werden an den Achsen eines Koordinatensystems aufgetragen. So
erhält der Benutzer eine Möglichkeit einen Punkt darin zu selektieren und
basierend auf diesen Eigenschaften sich Empfehlungen liefern zu lassen
(siehe Abb. ).</p>
<div class="figure align-center" id="fig-musicovery-moodmap">
<a class="reference internal image-reference" href="../../_images/musicovery_moodmap.png"><img alt="Die Moodmap auf Musicovery.com" src="../../_images/musicovery_moodmap.png" style="width: 60%;" /></a>
<p class="caption">Die Moodmap auf Musicovery.com</p>
</div>
<p>Der sonstige Hauptzweck der Seite besteht aus der <em>Music Discovery</em> (daher
auch das Kofferwort aus <em>Music</em> und <em>Discovery</em> als Name) - also dem
Entdecken neuer Musik.</p>
</div></blockquote>
</div>
<div class="section" id="software-bibliotheken">
<h4>2.2.2 Software-Bibliotheken<a class="headerlink" href="#software-bibliotheken" title="Permalink to this headline">¶</a></h4>
<p>Während die Anzahl der Plattformen noch ins Unermeßliche ging, so liefert eine
Suche nach <em>Music-Recommendation-(Library|System|Engine)</em> schon deutlich weniger
Resultate. Es scheint keine etablierte Bibliothek zu geben, die dieses Problem
angeht. Nach einiger Suche ließen sich zumindest zwei Projekte finden:</p>
<ul>
<li><p class="first"><strong>mirage</strong> <a class="reference internal" href="rst/index.html#ahx" id="id6">[Link-8]</a></p>
<blockquote>
<div><p>Eine freie in der Programmiersprache C# (mithilfe von Mono) implementierte
Bibliothek für Music Recommendations. Sie kommt den Zielen des Autors am
nähsten, ist aber wenig auf große Datenbanken ausgelegt und stützt sich
allein auf Audioanalyse - dazu wird während des <em>Kaltstartes</em> die gesamten
Audiodaten der Musiksammlung analysiert.</p>
<p>Sie ist momentan nur im freien Mediaplayer Banshee als Plugin nutzbar.
<em>Banshee</em> selbst ist ebenfalls in C# geschrieben - die Wahl der
Programmiersprache ist für die Bibliothek also von nicht geringer Bedeutung.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>mufin audiogen</strong> <a class="reference internal" href="rst/index.html#uzb" id="id7">[Link-9]</a></p>
<blockquote>
<div><p>Eine kommerzielle Bibliothek, in
<span class="math">\(\mathrm{C/C{\scriptstyle\overset{\!++}{\vphantom{\_}}}}\)</span> entwickelte
Bibliothek, die im (mittlerweile eingestellten) <em>Mufin-Audioplayer</em> verwendet
wurde. Sie bietet - laut der Website - enorm viele, teils fragwürdige
oder unklare, Features und hat nicht das Problem des <em>Kaltstartes</em>. Das
soll heißen: Die Musikdatenbank muss nicht erst aufwändig importiert werden,
sondern es können gleich Empfehlungen getroffen werden.</p>
<p>Zudem sind Visualisierungen und mobile Anwendungen mit der Bibliothek
möglich.</p>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="vorhandene-arbeiten">
<h3>2.3 Vorhandene Arbeiten<a class="headerlink" href="#vorhandene-arbeiten" title="Permalink to this headline">¶</a></h3>
<p>Wie bereits Eingangs erwähnt gibt es eine zwar noch überschaubare aber doch
schon recht umfangreiche Menge an Arbeiten zum Thema <em>Music Recommendation</em>.</p>
<p>Einige ausgesuchte Arbeiten werden  im folgenden aufgelistet und deren
Kernaussagen im Bezug auf dieses Projekt erläutert:</p>
<ul>
<li><p class="first"><em>A self-organizing map based knowledge discovery for music recommendation systems</em> <a class="reference internal" href="rst/index.html#vembu2005self" id="id8">[6]</a></p>
<blockquote>
<div><p>Statt den Computern die Ähnlichkeit zwischen zwei Liedern bestimmen zu
lassen verwendet diese Arbeit Reviews von <em>Amazon</em> um daraus Beziehungen
zwischen Künstlern abzuleiten.</p>
<p>Dieser Ansatz fällt unter <em>Social-based Recommendations</em> - man nutzt also
das Wissen vieler Menschen um Ähnlichkeiten abzubilden. Dies steht im
Gegensatz zu <em>Content-based Recommendations</em> - bei diesen wird die
Ähnlichkeit anhand von Audio- und Metadaten automatisch ermittelt.</p>
<p><em>Vorteil:</em> Elegant und oft sehr akkurat.</p>
<p><em>Nachteil:</em> Unvollständig, nicht für jeden Artist ist eine Empfehlung vorhanden.</p>
</div></blockquote>
</li>
<li><p class="first"><em>Smart radio-building music radio on the fly</em> <a class="reference internal" href="rst/index.html#hayes2001smart" id="id9">[2]</a></p>
<blockquote>
<div><p>Tendenziell steigt die Nutzung von Streamingdiensten immer mehr an - viele
Nutzer verwalten ihre Musik nicht mehr lokal, sondern streamen diese, meist
gegen einen bestimmten Betrag, aus dem Netz.</p>
<p>Daraus kann man ableiten dass es zukünftig noch mehr dieser
Streamingdienste geben wird - ein typisches Einsatzszenario für <em>libmunin</em>.</p>
</div></blockquote>
</li>
<li><p class="first"><em>A music search engine built upon audio-based and web-based similarity measures</em> <a class="reference internal" href="rst/index.html#knees2007music" id="id10">[4]</a></p>
<blockquote>
<div><p>Das in diesem Paper vorgestellte System kommt der Vorstellung von <em>libmunin</em>
am Nähestem. Die Audio- und Metadaten der einzelnen Lieder wird analysiert
und abgespeichert. Fehlende Metadaten werden automatisch aus dem Netz
bezogen (<em>Reviews</em> und <em>Lyrics</em>). Statt die Musikstücke aber zueinander in
Relation zu setzen, werden die Informationen für eine skalierbare
Suchmaschine benutzt, die basierend auf natürlicher Sprache (<em>rock with great
riffs</em>) passende Lieder findet.</p>
</div></blockquote>
</li>
<li><p class="first"><em>Music for my mood</em> <a class="reference internal" href="rst/index.html#lee2006music" id="id11">[5]</a></p>
<blockquote>
<div><p>Die Ähnlichkeit zwischen zwei Stücken wird über die <em>Stimmung</em>, welche durch
Audioanalyse bestimmt wird, in einem Lied definiert.</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="schlussfolgerungen">
<span id="id12"></span><h3>2.4 Schlussfolgerungen<a class="headerlink" href="#schlussfolgerungen" title="Permalink to this headline">¶</a></h3>
<p>Folgende Ideen erschienen übernehmenswert (<em>Quellen in Klammern</em>):</p>
<ul class="simple">
<li>Ein System welches von seinen Nutzern lernt <em>(last.fm)</em></li>
<li>Umfangreiche Einbeziehung von Metadaten <em>(YouTube)</em></li>
<li>Nutze zum Lernen die ,,Warenkorbanalyse'' um Assoziationsregeln abzuleiten. <em>(Amazon)</em></li>
<li>Nutze Audioanalyse <em>(mirage)</em> um Ähnlichkeiten festzustellen - beispielsweise
die Stimmung bzw. ,,Mood'' in einem Lied. (<em>Musicovery</em>)</li>
<li>Graphen als interne Datenstruktur (<em>mufin audiogen</em>)</li>
</ul>
<p>Es ist natürlich empfehlenswert aus den ,,Fehlern'' anderer zu lernen, daher
sollte man folgende Probleme beim Design und der Implementierung berücksichtigen:</p>
<ul class="simple">
<li><em>Kaltstart</em>, also die Verzögerung beim ersten Start, möglichst klein halten
<em>(mufin audiogen)</em></li>
<li>Verwaltung großer Datenmengen sollte möglich sein <em>(mirage)</em></li>
<li>Bibliothek Programmiersprachen unabhängig halten <em>(mirage)</em></li>
<li>Keine strikte Abhängigkeit von Audiodaten. Ein Betrieb nur mit Metadaten
sollte möglich sein <em>(mirage)</em></li>
<li>Libertäre Lizenz wählen um allgemeine Verfügbarkeit zu gewährleisten <em>(mufin
audiogen)</em></li>
</ul>
</div>
<div class="section" id="anforderungen">
<h3>2.5 Anforderungen<a class="headerlink" href="#anforderungen" title="Permalink to this headline">¶</a></h3>
<p>Nachdem man sich also das Umfeld angeschaut hat kann man versuchen
<em>Anforderungen</em> abzuleiten die eine gute Schnittmenge aus den obigen Plattformen
und Arbeiten bildet, welche dann das System erfüllen muss.</p>
<div class="section" id="performanz">
<span id="anf-performance"></span><h4>2.5.1 Performanz<a class="headerlink" href="#performanz" title="Permalink to this headline">¶</a></h4>
<p>Ausstellen von Empfehlungen muss performant möglich sein.</p>
<p>Da später sehr viele Anfragen, unter Umständen gleichzeitig, an das System
gestellt werden darf auch eine Abfrage von 100 Empfehlungen nicht länger
als eine Sekunde dauern.</p>
<p>Die eigentliche Arbeit muss daher in einem vorgelagerten Analyseschritt
erfolgen und die daraus gewonnenen Kenntnisse in einer geeigneten
Datenstruktur gespeichert werden.</p>
</div>
<div class="section" id="empfehlungen-bilden-eine-kette">
<span id="anf-chain"></span><h4>2.5.2 Empfehlungen bilden eine Kette<a class="headerlink" href="#empfehlungen-bilden-eine-kette" title="Permalink to this headline">¶</a></h4>
<p>Wird eine Anfrage an das System gestellt so wird ein Iterator zurückgegeben
der alle dem System bekannten Songs nach Relevanz absteigend sortiert ausgibt.</p>
</div>
<div class="section" id="handhabung-groszer-datenmengen">
<span id="anf-data"></span><h4>2.5.3 Handhabung großer Datenmengen.<a class="headerlink" href="#handhabung-groszer-datenmengen" title="Permalink to this headline">¶</a></h4>
<p>Groß definiert sich hierbei durch das Einsatzszenario. Bei privaten
Musiksammlungen beträgt die maximale Größe die problemlos unterstützt werden
soll bis zu 40.000 Lieder.</p>
<p>Größere Datenmengen, wie sie vlt. bei Webradios vorkommen, sollen auch unterstützt
werden. Hier ist allerdings dann ein höherer Rechenaufwand gerechtfertigt.</p>
</div>
<div class="section" id="lizenz">
<span id="anf-license"></span><h4>2.5.4 Lizenz<a class="headerlink" href="#lizenz" title="Permalink to this headline">¶</a></h4>
<p>Die Lizenz sollte einen libertären Einsatz ermöglichen und sicherstellen, dass
Weiterentwicklungen in das Projekt zurückfließen.</p>
<p>Die GPLv3 Lizenz erfüllt diese Bedingungen. Der kommerzielle Einsatz ist
erwünscht.</p>
</div>
<div class="section" id="begrundbarkeit">
<span id="anf-reasoning"></span><h4>2.5.5 Begründbarkeit<a class="headerlink" href="#begrundbarkeit" title="Permalink to this headline">¶</a></h4>
<p>Empfehlungen sollen begründbar sein.</p>
<p>Es muss möglich sein festzustellen welche Merkmale eines Songs zu der Empfehlung
geführt haben.</p>
</div>
<div class="section" id="anpassungsfahige-api">
<span id="anf-api"></span><h4>2.5.6 Anpassungsfähige API<a class="headerlink" href="#anpassungsfahige-api" title="Permalink to this headline">¶</a></h4>
<p>Die bereitgestellte API muss auf die stark variierende Qualität und Form von
Musiksammlungen eingestellt sein.</p>
<p>Viele existierende Musiksammlungen sind unterschiedlich gut mit Metadaten
(<em>Tags</em>) versorgt. So sind manche Tags gar nicht erst vorhanden oder sind
je nach Format und verwendeten Taggingtool/Datenbank anders benannt.</p>
<p>Das fertige System soll mit Szenarien zurecht kommen, wo lediglich die
Metadaten der zu untersuchenden Songs zur Verfügung stehen, aber nicht die
eigentlichen Audiodaten. Dies kann vorteilhaft sein wenn man keinen Zugriff auf
die Audiodaten hat aber die Metadaten bei Musikdatenbanken wie <em>MusicBrainz</em>
vervollständigen kann.</p>
</div>
<div class="section" id="programmiersprachen-agnostisch">
<span id="anf-agnostic"></span><h4>2.5.7 Programmiersprachen agnostisch<a class="headerlink" href="#programmiersprachen-agnostisch" title="Permalink to this headline">¶</a></h4>
<p>Das System soll von mehreren Programmiersprachen aus benutzbar sein.</p>
<p>Dieses Ziel könnte entweder durch verschiedene Languagebindings erreicht
werden, oder alternativ durch eine Server/Client Struktur mit einem
definierten Protokoll in der Mitte.</p>
<p>Portabilität ist für das erste zweitrangig.
Für den Prototypen sollen lediglich unixoide Betriebssysteme, im speziellen
<em>Arch Linux</em> <a class="reference internal" href="rst/index.html#jv6" id="id13">[Link-10]</a>, dem bevorzugten Betriebssystem des Autors, unterstützt werden.</p>
</div>
<div class="section" id="demonstrations-und-debuggeranwendung-inkludiert">
<span id="anf-demo"></span><h4>2.5.8 Demonstrations und Debuggeranwendung inkludiert<a class="headerlink" href="#demonstrations-und-debuggeranwendung-inkludiert" title="Permalink to this headline">¶</a></h4>
<p>Eine Demonstrationsanwendung soll entwickelt werden die zur
Fehlersuche, Verbesserung und als Einsatzbeispiel dient.</p>
<p>Als Demonstrationsanwendung eignet sich ein Musicplayer der dem Nutzer mithilfe des
zu entwickelnden System Musikstücke vorschlägt und optimalerweise diese
Empfehlung auch <em>begründen</em> kann. So kann die Anwendung auch als
<em>Debugger</em> dienen.</p>
<p>Die Demoanwendung sollte dabei auf dem freien MPD-Client <em>Moosecat</em> <a class="reference internal" href="rst/index.html#jh7" id="id14">[Link-11]</a>
aufsetzen.</p>
<div class="admonition-kurzer-exkurs-zu-moosecat admonition">
<p class="first admonition-title"><em>Kurzer Exkurs zu Moosecat:</em></p>
<p>Moosecat ist ein vom Autor seit 2012 entwickelter GPLv3 lizensierter
MPD-Client. Im Gegensatz zu den meisten, etablierten Clients hält er
eine Zwischendatenbank, die den Zustand des Servers spiegelt. Dadurch
wird die Netzwerklast und die Startzeit reduziert und interessante
Feature wie Volltextsuche wird möglich.</p>
<p class="last">Er wird in <em>Python,</em> <em>Cython</em> und <em>C</em> entwickelt und befindet sich noch im
Entwicklungsstadium.</p>
</div>
</div>
<div class="section" id="einfaches-information-retrieval">
<span id="anf-retrieval"></span><h4>2.5.9 Einfaches <em>Information Retrieval</em><a class="headerlink" href="#einfaches-information-retrieval" title="Permalink to this headline">¶</a></h4>
<p>Es sollte einfach sein fehlende Daten zu beschaffen.</p>
<p>In den meisten privaten Musiksammlungen sind die wichtigsten Attribute
<em>getaggt</em> - sprich in der Audiodatei sind Werte wie <em>Artist</em>, <em>Album</em> und
<em>Titel</em> hinterlegt. Manche Attribute sind allerdings schwerer zu bekommen,
wie beispielsweise die <em>Lyrics</em> zu einem bestimmten <em>Titel</em> oder auch das
<em>Genre</em> eines Albums.</p>
<p>Es sollte aus Komfortgründen auf einfache Art und Weise möglich sein externe
Bibliotheken zur Datenbeschaffung in <em>libmunin</em> einzubinden.
Für diesen Einsatz ist <em>libglyr</em> <a class="reference internal" href="rst/index.html#xu" id="id15">[Link-12]</a> gut geeignet.</p>
<div class="admonition-kurzer-exkurs-zu-libglyr admonition">
<p class="first admonition-title"><em>Kurzer Exkurs zu libglyr:</em></p>
<p><em>libglyr</em> ist eine vom Autor seit Ende 2010
entwickelte C-Bibliothek um Musikmetadatensuchmaschine um schwer zu
besorgende Daten wie Lyrics, Coverart und andere Metadaten im Internet zu
suchen und optional lokal zwischenzuspeichern.</p>
<p class="last">Sie ist GPLv3 lizensiert und wird unter anderem im
<em>GnomeMusicPlayerClient (gmpc)</em>, vielen Shellskripten und
natürlich in dem oben genannten <em>moosecat</em> eingesetzt.</p>
</div>
</div>
<div class="section" id="anpassungsfahigkeit-an-den-benutzer">
<span id="anf-learning"></span><h4>2.5.10 Anpassungsfähigkeit an den Benutzer<a class="headerlink" href="#anpassungsfahigkeit-an-den-benutzer" title="Permalink to this headline">¶</a></h4>
<p>Mit der Zeit muss das System sich dem Benutzer anpassen.</p>
<p>Mit der Zeit soll es <em>bessere</em> Empfehlungen liefern als am Anfang.
Es soll dabei auf explizite und auf implizite Weise lernen. Beim expliziten
Lernen gibt der Benutzer Tipps (beispielsweise kann er eine Empfehlung
bewerten), beim implizierten Lernen wird das Verhalten des Benutzers beobachtet
und daraus werden Schlussfolgerungen getroffen.</p>
</div>
<div class="section" id="nichtanforderungen">
<h4>2.5.11 Nichtanforderungen<a class="headerlink" href="#nichtanforderungen" title="Permalink to this headline">¶</a></h4>
<p>Folgendes sind keine Probleme die von <em>libmunin</em> gelöst werden müssen:</p>
<div class="section" id="einpflegen-manuell-erstellter-empfehlungen">
<h5>2.5.11.1 Einpflegen manuell erstellter Empfehlungen:<a class="headerlink" href="#einpflegen-manuell-erstellter-empfehlungen" title="Permalink to this headline">¶</a></h5>
<p>Dies ist per <em>,,Wrapper''</em> um die Bibliothek möglich.</p>
</div>
<div class="section" id="social-based-music-recommendation">
<h5>2.5.11.2 Social-based music recommendation:<a class="headerlink" href="#social-based-music-recommendation" title="Permalink to this headline">¶</a></h5>
<p><em>libmunin</em> soll eine rein <em>Content-based music recommendation Engine</em> werden.
Die Ähnlichkeit zweier Datensätze wird also algorithmisch ermittelt, anstatt auf
das Wissen von Menschen zurückzugreifen.</p>
</div>
</div>
</div>
<div class="section" id="zielgruppe">
<h3>2.6 Zielgruppe<a class="headerlink" href="#zielgruppe" title="Permalink to this headline">¶</a></h3>
<p><em>libmunin</em> soll eine Bibliothek für Entwickler sein. Es stellt also keine
einfach zu nutzende Webseite bereit wie die oben genannten - es kann aber als
Backend dafür dienen.</p>
<p>Vom Autor selbst sind die folgenden zwei Projekte anvisiert:</p>
<blockquote>
<div><ul>
<li><p class="first"><strong>moosecat</strong></p>
<p>Implementierung als Plugin für <em>Intelligente Playlisten</em>.</p>
</li>
<li><p class="first"><strong>mopidy</strong> <a class="reference internal" href="rst/index.html#w5" id="id16">[Link-13]</a></p>
<div class="admonition-kurzer-exkurs-zu-mopidy admonition">
<p class="first admonition-title"><em>Kurzer Exkurs zu mopidy:</em></p>
<p class="last">Mopidy ist eine Alternative Implementierung zum <em>MusicPlayerDaemon
(MPD)</em> in Python mit erweiterten Features. Sie bietet eine Anbindung
zu Music-Streaming-Plattformen wie <em>Spotify</em>. Dabei ist es
kompatibel mit den existierenden MPD-Clients.</p>
</div>
<p>Da die Entwickler eine Möglichkeit suchen um Dynamische Playlists zu
implementieren <a class="reference internal" href="rst/index.html#xvg" id="id17">[Link-14]</a> wäre dies ein guter Anlaufpunkt.</p>
</li>
</ul>
</div></blockquote>
<p>Für Shellskripte wäre auch ein Kommandozeilenprogramm denkbar, welches eine
beliebige Musiksammlung einlesen kann.</p>
</div>
</div>
<span id="document-rst/III/index"></span><div class="section" id="design">
<h2>3 Design<a class="headerlink" href="#design" title="Permalink to this headline">¶</a></h2>
<blockquote class="epigraph">
<div><div class="line-block">
<div class="line"><em>,,If the implementation is hard to explain, it's a bad idea.</em></div>
<div class="line"><em>If the implementation is easy to explain, it</em> may <em>be a good idea.''</em></div>
</div>
<p class="attribution">&mdash;<em>Zen of Python</em>, <tt class="docutils literal"><span class="pre">import</span> <span class="pre">this</span></tt></p>
</div></blockquote>
<div class="section" id="algorithmik">
<h3>3.1 Algorithmik<a class="headerlink" href="#algorithmik" title="Permalink to this headline">¶</a></h3>
<p>Die genaue Beschreibung der Algorithmik wird in der Bachelorarbeit
detailliert besprochen. Hier nur ein kurzer Überblick, was mit welchem Ziel
implementiert wird.</p>
<p><em>Ein kurzer Leitfaden für dieses Kapitel:</em></p>
<ul class="simple">
<li>Es wird erst ein grober Überblick über die verwendeten <em>Datenstrukturen und der
Algorithmik</em> gegeben (dem <em>Kern</em> von <em>libmunin</em>)</li>
<li>Danach wird die <em>Umwelt</em> betrachtet und wie die Daten aussehen, die in unsere
Datenstrukturen eingepflegt werden müssen.</li>
<li>Im Anschluss daran wird überlegt wie die <em>Schnittstelle</em> aussehen muss, um die
Daten von der Außenseite zu importieren.</li>
<li>Letztlich wird ein möglicher <em>Softwareentwurf</em> vorgestellt und detailliert
besprochen.</li>
</ul>
<div class="section" id="grunduberlegungen">
<h4>3.1.1 Grundüberlegungen<a class="headerlink" href="#grunduberlegungen" title="Permalink to this headline">¶</a></h4>
<p>Die <em>Entfernung</em> von je einem <a class="reference internal" href="rst/index.html#term-song"><em class="xref std std-term">Song</em></a> <em>A</em> und <em>B</em> lässt sich durch eine
<a class="reference internal" href="rst/index.html#term-distanz"><em class="xref std std-term">Distanz</em></a> definieren.</p>
<p>Um die Distanzen zu speichern wird bei vielen Datamining-Projekten eine
Distanzmatrix genutzt - also eine quadratische Dreiecksmatrix in der
die Distanzen von jedem Dokument zu jedem anderen gespeichert werden.</p>
<p>Da das System auch für eine sehr hohe Anzahl von Songs funktionieren soll,
schließt sich die Benutzung einer Distanzmatrix allerdings von alleine aus.
Nehmen wir an ein Benutzer möchte seine Musiksammlung mit 40.000 Liedern
importieren, so bräuchten wir soviele Felder in der Matrix:</p>
<div class="math">
\[\frac{(40.000^2 - 40.0000)}{2} = 799.980.000\]</div>
<p>Nimmt man für jedes Feld einen günstig geschätzten Speicherverbrauch von 4 Byte
an, so bräuchte man allein für die Distanzmatrix hier aufgerundet 3 Gigabyte
Hauptspeicher - was selbst für diesen günstig geschätzten Fall unakzeptabel
wäre. Auch eine Sparsematrix wäre hier kaum sinnvoll, da in allen Fällen ja
etwas weniger als die Hälfte aller Felder befüllt ist.</p>
<p>Man muss also versuchen nur eine bestimmte Anzahl von Distanzen für einen Song
zu speichern - vorzugsweise eine Menge von Songs mit der kleinsten
<a class="reference internal" href="rst/index.html#term-distanz"><em class="xref std std-term">Distanz</em></a>. Als geeignete Datenstruktur erscheint hier ein Graph - die
Knoten desselben sind die Songs und die Kanten dazwischen die Distanzen.</p>
<p>Zur besseren optischen Vorstellung, ist unter  ein
Graphen-Plot (erstellt mit <tt class="docutils literal"><span class="pre">igraph</span></tt> <a class="reference internal" href="rst/index.html#igr" id="id1">[Link-15]</a>) gezeigt.</p>
<div class="figure align-center" id="fig-graph-example">
<a class="reference internal image-reference" href="../../_images/graph_example.png"><img alt="Beispielgraph aus generierten Testdaten" src="../../_images/graph_example.png" style="width: 85%;" /></a>
<p class="caption">Beispielgraph mit 100 Knoten, aus generierten Testdaten. Die Farbe der
Knoten zeigt grob die ,,Zentralität'' des Knoten an. Pro Knoten wurde ein
Integer zwischen 1-100 errechnet, diese wurden mit einer primitiven
Distanzfunktion verglichen.</p>
</div>
</div>
<div class="section" id="graphenoperationen">
<h4>3.1.2 Graphenoperationen<a class="headerlink" href="#graphenoperationen" title="Permalink to this headline">¶</a></h4>
<p>Angenommen jeder <a class="reference internal" href="rst/index.html#term-song"><em class="xref std std-term">Song</em></a> ist ein <em>Mapping</em> von Attributen zu Werten, so
können wir für jedes Attribut eine <a class="reference internal" href="rst/index.html#term-distanzfunktion"><em class="xref std std-term">Distanzfunktion</em></a> definieren. Nach
einer bestimmten Gewichtung können wir dann die einzelnen Distanzen
zusammenrechnen und zu einer gemeinsamen <a class="reference internal" href="rst/index.html#term-distanz"><em class="xref std std-term">Distanz</em></a> zusammenschmelzen.</p>
<p>Um mit unseren Graphen arbeiten zu können müssen wir einige Operationen auf ihm
definieren:</p>
<div class="section" id="rebuild">
<h5>3.1.2.1 rebuild<a class="headerlink" href="#rebuild" title="Permalink to this headline">¶</a></h5>
<p>Bevor der Graph benutzt werden kann, muss er natürlich erstmal aufgebaut werden.
Der naive Ansatz wäre dabei für jeden Song die Distanzen zu jedem anderen Song
zu berechnen - dies hätte einen Aufwand von <span class="math">\(O(n^2)\)</span> zur Folge. Dies ist
aus oben genannten Gründen ebenfalls kaum wünschenswert.</p>
<p>Deshalb kann die <tt class="docutils literal"><span class="pre">rebuild</span></tt> Operation keinen <em>perfekten</em> Graph erzeugen, sondern
muss für hinreichend große Datenmengen auf eine Approximation zurückgreifen.</p>
<p>Nach dem Aufbau sollte ein ungerichteter Graph dabei herauskommen, im dem
idealerweise jeder Knoten vom jedem anderen Knoten erreichbar ist - es sollten
also keine <em>Inseln</em> dabei entstehen. Es gibt keine maximale Anzahl von Nachbarn,
die ein Song haben darf - lediglich einen <em>Richtwert</em>.</p>
</div>
<div class="section" id="rebuild-stupid">
<h5>3.1.2.2 rebuild_stupid<a class="headerlink" href="#rebuild-stupid" title="Permalink to this headline">¶</a></h5>
<p>Wie <tt class="docutils literal"><span class="pre">rebuild</span></tt>, nutzt aber quadratischen Aufwand indem es jeden Song mit jedem
anderen vergleicht. Dies ist für kleine Mengen (<span class="math">\(\le 400\)</span>) von Songs
verträglich und für <em>sehr</em> kleine Mengen sogar schneller - tatsächlich fällt die
normale <tt class="docutils literal"><span class="pre">rebuild</span></tt>-Operation tatsächlich auf diese zurück, falls die Menge an
Songs <span class="math">\(\le 200\)</span>.</p>
<p>Hauptsächlich für Debuggingzwecke, um Fehler beim herkömmlichen <tt class="docutils literal"><span class="pre">rebuild</span></tt>
aufzudecken.</p>
</div>
<div class="section" id="add">
<h5>3.1.2.3 add<a class="headerlink" href="#add" title="Permalink to this headline">¶</a></h5>
<p>Füge einen einzelnen Song zu dem Graphen hinzu, verbinde ihn aber noch nicht.
Dies ist die bevorzugte Operation um viele Songs dem Graphen hinzuzufügen -
beispielsweise beim <em>Kaltstart</em> - da das Verbinden später in einem
<tt class="docutils literal"><span class="pre">rebuild</span></tt>-Schritt erledigt werden kann.</p>
</div>
<div class="section" id="insert">
<h5>3.1.2.4 insert<a class="headerlink" href="#insert" title="Permalink to this headline">¶</a></h5>
<p>Füge einen einzelnen Song zu dem Graphen hinzu und verbinde ihn. Suche dazu
erst eine passende Stelle in der er eingepasst wird.</p>
</div>
<div class="section" id="remove">
<h5>3.1.2.5 remove<a class="headerlink" href="#remove" title="Permalink to this headline">¶</a></h5>
<p>Entferne einen einzelnen Song aus dem Graphen und versuche das entstandene
<em>Loch</em> zu flicken indem die Nachbarn des entfernten Songs untereinander
verkuppelt werden.</p>
</div>
<div class="section" id="modify">
<h5>3.1.2.6 modify<a class="headerlink" href="#modify" title="Permalink to this headline">¶</a></h5>
<p>Manchmal ist es nötig das Attribut eines einzelnen Songs - wie beispielsweise
das stark vom Benutzer abhängige <strong>Rating</strong> - zu ändern. Dabei wird der Song
erst mittels <tt class="docutils literal"><span class="pre">remove</span></tt> entfernt, die Attribute werden angepasst und er wird
mittels <tt class="docutils literal"><span class="pre">insert</span></tt> wieder eingefügt.</p>
</div>
<div class="section" id="fixing">
<h5>3.1.2.7 fixing<a class="headerlink" href="#fixing" title="Permalink to this headline">¶</a></h5>
<p>Durch das Löschen und Hinzufügen von Songs können <em>Einbahnstraßen</em> im Graphen
entstehen. Durch dem nach gelagerten <em>fixing</em> Schritt werden diese, nach
bestimmten Regeln, entweder entfernt oder in bidirektionale Verbindungen
umgebaut.</p>
</div>
</div>
<div class="section" id="ausstellen-von-empfehlungen">
<span id="recom-out"></span><h4>3.1.3 Ausstellen von Empfehlungen<a class="headerlink" href="#ausstellen-von-empfehlungen" title="Permalink to this headline">¶</a></h4>
<p>Das Ausstellen von Empfehlungen wird durch das Traversieren des Graphen
mittels einer Breitensuche erledigt. Dabei wird der Ursprung durch ein
sogenannten <a class="reference internal" href="rst/index.html#term-seedsong"><em class="xref std std-term">Seedsong</em></a> bestimmt. Anschaulich wäre der Seedsong bei einer
Anfrage wie ,,10 ähnliche Songs zu <em>The Beatles - Yellow Submarine</em> `` eben
<em>,,Yellow Submarine''</em>.</p>
<p>Aus der funktionalen Programmierung wurde dabei das Konzept der <em>Infinite
Iterators</em> übernommen: Anstatt eine bestimmte Anzahl von Empfehlungen als Liste
wird ein Versprechen herausgegeben die Empfehlungen genau dann zu berechnen wenn
sie gebraucht werden (<em>Lazy Evaluation</em>). Dadurch ist auch die Zahl der
zu gebenden Empfehlungen variabel - was sehr nützlich beim Erstellen einer
dynamischen Playlist ist.</p>
<p>Es können auch mehrere Seedsongs verwendet werden - dann werden die einzelnen
<em>Iteratoren</em> im Reißschlußverfahren verwebt.</p>
<p>Basierend auf dieser Idee ist es möglich bestimmte Strategien zu implementieren,
die beispielsweise Songs mit dem höchsten Playcount, dem besten Rating oder
einen bestimmten Attribut wie <em>genre=rock</em> als Seedsongs auswählt.</p>
</div>
<div class="section" id="filtern-von-empfehlungen">
<span id="recom-filter"></span><h4>3.1.4 Filtern von Empfehlungen<a class="headerlink" href="#filtern-von-empfehlungen" title="Permalink to this headline">¶</a></h4>
<p>Oft ist es nötig die gegebenen Empfehlungen noch zusätzlich zu filtern. Das hat
den simplen Grund das im Graphen die meisten Alben einzelne <em>Cluster</em> bilden -
die Lieder auf einem Album sind unter sich sehr ähnlich. Da man aber vermeiden
möchte, dass zu einem <a class="reference internal" href="rst/index.html#term-seedsong"><em class="xref std std-term">Seedsong</em></a> ein Lied vom selben Album oder gar selben
Künstler empfohlen wird, müssen diese beim Iterieren über den Graphen ausgesiebt
werden.</p>
<p>Dazu werden die zuletzt gegebenen Empfehlungen betrachtet - ist in
den letzten 5 Empfehlungen der gleiche Artist bereits vorhanden so wird die
Empfehlung ausgesiebt.</p>
</div>
<div class="section" id="lernen-durch-die-history">
<h4>3.1.5 Lernen durch die History<a class="headerlink" href="#lernen-durch-die-history" title="Permalink to this headline">¶</a></h4>
<p>Nur eine bestimmte Anzahl von Regeln wird gespeichert - zuviele Regeln würden
<em>historische Altlasten</em> immer weiter mitschleppen und der aktuelle Geschmack des
Benutzers würde nicht widergespiegelt werden.</p>
</div>
</div>
<div class="section" id="integration-von-libmunin-in-die-umwelt">
<h3>3.2 Integration von <em>libmunin</em> in die Umwelt<a class="headerlink" href="#integration-von-libmunin-in-die-umwelt" title="Permalink to this headline">¶</a></h3>
<div class="section" id="allgemeiner-ablauf">
<h4>3.2.1 Allgemeiner Ablauf<a class="headerlink" href="#allgemeiner-ablauf" title="Permalink to this headline">¶</a></h4>
<p>Eine gut definierte Datenstruktur nützt nichts wenn man nicht weiß wie die
Daten, die aus der <em>Umwelt</em> hereinkommen aussehen. Diese müssen schließlich
erstmal in die Form eines Graphen gebracht werden bevor man Empfehlungen
aussprechen kann. Dieser <em>Prozess</em> (siehe Abbildung )
beinhaltet vier Schritte:</p>
<ul class="simple">
<li><strong>Kaltstart:</strong> Im Kaltstart müssen mittels <em>Information Retrieval</em> Techniken
fehlende Daten, wie beispielsweise die Songtexte oder die die Audiodaten, aus
lokalen oder entfernten Quellen besorgt werden. Dies ist Aufgabe des Nutzers -
<em>libmunin</em> bietet hier nur Hilfsfunktionen an.
Der <em>Kaltstart</em> ist nur bei der ersten Benutzung einer Musikdatenbank nötig.</li>
<li><strong>Analyse:</strong> Bei der <em>Analyse</em> werden die nun vorhandenen Daten untersucht und
durch sogenannte <a class="reference internal" href="rst/index.html#term-provider"><em class="xref std std-term">Provider</em></a> normalisiert. Die Normalisierung ist nötig
um im nächsten Schritt eine einfache und effiziente Vergleichbarkeit der Daten
zu gewährleisten.</li>
<li><strong>Rebuild:</strong> Dies entspricht der <tt class="docutils literal"><span class="pre">rebuild</span></tt>-Operation.
In diesem Schritt werden die normalisierten Daten untereinander mittels einer
passenden <a class="reference internal" href="rst/index.html#term-distanzfunktion"><em class="xref std std-term">Distanzfunktion</em></a> untersucht um mithilfe der dabei
entstehenden <a class="reference internal" href="rst/index.html#term-distanz"><em class="xref std std-term">Distanz</em></a> der Graph aufgebaut.</li>
<li><strong>Einsatz:</strong> Durch Traversierung des Graphen können jetzt Ergebnisse abgeleitet
werden.</li>
</ul>
<div class="figure align-center" id="fig-startup">
<a class="reference internal image-reference" href="../../_images/munin_startup.svg"><img alt="Allgemeine Benutzung" src="../../_images/munin_startup.svg" width="75%" /></a>
<p class="caption">Allgemeine Benutzungs-Prozess von libmunin.</p>
</div>
</div>
<div class="section" id="die-umgebung">
<span id="environement"></span><h4>3.2.2 Die Umgebung<a class="headerlink" href="#die-umgebung" title="Permalink to this headline">¶</a></h4>
<p>In  ist eine Übersicht gegeben in welcher Umgebung
<em>libmunin</em> eingesetzt wird. Eine Frage die sich dabei stellt ist: <em>Wie</em> stellen
die Nutzer der Bibliothek ihre Musikdatenbank bereit? Und <em>wie</em> geben sie diese
in das System ein?</p>
<p>Dazu bedarf es einer weiteren Eingabe vom Nutzer: Einer Beschreibung wie seine
Musikdatenbank aufgebaut ist, welche <em>Tags</em> sie enthält und wie mit diesen Daten
verfahren werden soll.</p>
<p>Da diese Daten also sehr unterschiedlich aufgebaut sind, muss <em>libmunin</em> sehr
generisch aufgebaut sein. Der Ansatz ist dabei, zusätzlich vom Nutzer eine
<a class="reference internal" href="rst/index.html#term-maske"><em class="xref std std-term">Maske</em></a> zu verlangen die beschreibt welche möglichen <em>Tags</em> (oder
<a class="reference internal" href="rst/index.html#term-attribut"><em class="xref std std-term">Attribut</em></a>) ein einzelner Song besitzt Für jedes <a class="reference internal" href="rst/index.html#term-attribut"><em class="xref std std-term">Attribut</em></a> kann
dann, nach Baukastenprinzip, ein <a class="reference internal" href="rst/index.html#term-provider"><em class="xref std std-term">Provider</em></a>, eine <a class="reference internal" href="rst/index.html#term-distanzfunktion"><em class="xref std std-term">Distanzfunktion</em></a>
und eine Gewichtung ausgewählt werden. Letzere beschreibt wie <em>wichtig</em> diese
Attribut aus Sicht des Nutzers in Bezug auf die Ähnlichkeit ist. Der
<a class="reference internal" href="rst/index.html#term-provider"><em class="xref std std-term">Provider</em></a> normalisiert die Werte von einem <a class="reference internal" href="rst/index.html#term-attribut"><em class="xref std std-term">Attribut</em></a> auf bestimmte
Art und Weise, während die <a class="reference internal" href="rst/index.html#term-distanzfunktion"><em class="xref std std-term">Distanzfunktion</em></a> sich um das Vergleichen der
normalisierten Werte nach bestimmten, je auf Art des Attributs spezialisierten
Weise, kümmert.</p>
<p>Nachdem das Format, in Form der <a class="reference internal" href="rst/index.html#term-maske"><em class="xref std std-term">Maske</em></a>, geklärt ist, kann der Nutzer
jeden Song mittels der <tt class="docutils literal"><span class="pre">add</span></tt>-Operation hinzufügen und im Anschluss eine
<tt class="docutils literal"><span class="pre">rebuild</span></tt>-Operation triggern.</p>
<div class="figure align-center" id="fig-integration">
<a class="reference internal image-reference" href="../../_images/integration.svg"><img alt="Integrationsübersicht" src="../../_images/integration.svg" width="100%" /></a>
<p class="caption">Wie fügt sich libmunin in seine Umgebung ein?</p>
</div>
<p>Wir wissen nun wie unsere interne Datenstruktur auszusehen hat. Wir wissen auch
wie die Daten aussehen die von der Umwelt hereinkommen. Der nächste Schritt
darin, sich Gedanken über den <em>Layer</em> zu machen welcher zwischen beiden
vermittelt.</p>
<p>Tatsächlich besteht ein großer Teil von <em>libmunin</em> aus diesem <em>Layer</em> der Daten
aus der Umwelt nimmt und in die interne Graphendarstellung transferiert.</p>
<p>In Abbildung  findet sich eine Darstellung von <em>libmunin</em> als
,,Whitebox'' - sprich, als Box mit allen Ein- und Ausgängen, sowie der groben
Verarbeitung dazwischen. Dies ist als Zusammenfassung des oben gesagten zu
werten.</p>
<div class="figure align-center" id="fig-arch">
<a class="reference internal image-reference" href="../../_images/arch.svg"><img alt="Architekturübersicht." src="../../_images/arch.svg" width="100%" /></a>
<p class="caption">Betrachtung von libmunin als ,,Whitebox'' - Alle Ein- und Ausgaben in einem
Bild. In der Box selbst ist die grobe Verarbeitung der Daten skizziert.</p>
</div>
</div>
</div>
<div class="section" id="entwurf-der-software">
<h3>3.3 Entwurf der Software<a class="headerlink" href="#entwurf-der-software" title="Permalink to this headline">¶</a></h3>
<p>Da wir jetzt grob wissen aus welchen Komponenten unsere Software besteht können
wir uns Gedanken darüber machen wie diese einzelnen Teile konkret aussehen.  Im
folgenden werden die <em>,,Hauptakteure''</em> der Software vorgestellt:</p>
<div class="section" id="ubersicht">
<h4>3.3.1 Übersicht<a class="headerlink" href="#ubersicht" title="Permalink to this headline">¶</a></h4>
<p>Unter  findet sich eine grobe Übersicht der wichtigsten
Klassen.</p>
<div class="figure align-center" id="fig-class-overview">
<a class="reference internal image-reference" href="../../_images/class.svg"><img alt="Klassenübersicht" src="../../_images/class.svg" width="100%" /></a>
<p class="caption">Jeder Node ist eine Klasse in den jeweiligen Teilbereichen der Software.
Provider und DistanceFunction Unterklassen nur beispielhaft gezeigt.</p>
</div>
</div>
<div class="section" id="grobe-unterteilung">
<h4>3.3.2 Grobe Unterteilung<a class="headerlink" href="#grobe-unterteilung" title="Permalink to this headline">¶</a></h4>
<p>Wir schauen uns zuerst die einzelnen <em>Regionen</em> der Software an, danach
widmen wir uns den einzelnen Komponenten.</p>
<p>Grob ist die Software in fünf unterschiedliche <em>Regionen</em> aufgeteilt.</p>
<div class="section" id="api">
<h5>3.3.2.1 1. API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h5>
<p>Die API ist die Schnittstelle zum Benutzer hin. Der Nutzer kann mittels einer
<tt class="docutils literal"><span class="pre">Session</span></tt> auf alle Funktionen von <em>libmunin</em> zugreifen. Dazu muss er beim
Instanzieren derselben eine <tt class="docutils literal"><span class="pre">Maske</span></tt> angeben die die Musikdatenbank beschreibt.
Alternativ kann die <tt class="docutils literal"><span class="pre">EasySession</span></tt> genutzt werden die eine vordefinierte
<tt class="docutils literal"><span class="pre">Maske</span></tt> bereitstellt, die für viele Anwendungsfälle ausreichend ist.</p>
</div>
<div class="section" id="provider-pool">
<h5>3.3.2.2 2. <tt class="docutils literal"><span class="pre">Provider</span></tt> Pool<a class="headerlink" href="#provider-pool" title="Permalink to this headline">¶</a></h5>
<p>Implementiert eine große Menge vordefinierter Menge von Providern, die die
gängigsten Eingabedaten (wie Artist, Album, Lyrics, Genre, ...) abdecken.
Manche <tt class="docutils literal"><span class="pre">Provider</span></tt> dienen auch zum <em>Information Retrieval</em> und ziehen
beispielsweise Songtexte aus dem Internet.</p>
<p>Eine volle Liste von verfügbaren Providern wird unter <a class="reference internal" href="rst/index.html#provider-list">4.4.1</a>
gegeben.</p>
<p>In der Übersicht  wurde aus Übersichtlichkeitsgründen
exemplarisch nur drei <a class="reference internal" href="rst/index.html#term-provider"><em class="xref std std-term">Provider</em></a> gezeigt</p>
</div>
<div class="section" id="distancefunction-pool">
<h5>3.3.2.3 3. <tt class="docutils literal"><span class="pre">DistanceFunction</span></tt> Pool<a class="headerlink" href="#distancefunction-pool" title="Permalink to this headline">¶</a></h5>
<p>Implementiert eine Menge vordefinierter Distanzfunktionen, welche die Werte der
obigen <tt class="docutils literal"><span class="pre">Provider</span></tt> vergleichen. Dabei kommen zwar viele Provider und
Distanzfunktion als Paare daher (wie beispielsweise der <tt class="docutils literal"><span class="pre">GenreTree</span></tt> Provider
und die <tt class="docutils literal"><span class="pre">GenreTree</span></tt> Distanzfunktion), was aber keine Notwendigkeit darstellt -
verschiedene Provider können beispielsweise dieselbe Distanzfunktion nutzen.</p>
<p>Eine volle Liste von verfügbaren Distanzfuktionen wird unter
<a class="reference internal" href="rst/index.html#distance-function-list">4.4.2</a> gegeben.</p>
<p>In der Übersicht  wurde aus Übersichtlichkeitsgründen
exemplarisch nur drei <a class="reference internal" href="rst/index.html#term-provider"><em class="xref std std-term">Provider</em></a> gezeigt</p>
<p>Bibliotheksnutzer können eigene <tt class="docutils literal"><span class="pre">Provider</span></tt> oder <tt class="docutils literal"><span class="pre">DistanceFunctions</span></tt>
implementieren indem sie von den jeweiligen Oberklassen ableiten.</p>
</div>
<div class="section" id="songverwaltung">
<h5>3.3.2.4 4. Songverwaltung<a class="headerlink" href="#songverwaltung" title="Permalink to this headline">¶</a></h5>
<p>Hier geschieht alles was mit dem Speichern und Vergleichen einzelner Songs zu
tun hat. Dies umfasst das Speichern der <tt class="docutils literal"><span class="pre">Songs</span></tt> in der <tt class="docutils literal"><span class="pre">Database</span></tt> sowie das
Verwalten der Nachbarschafts-<tt class="docutils literal"><span class="pre">Songs</span></tt> für jeden <tt class="docutils literal"><span class="pre">Song</span></tt> mit den dazugehörigen
<tt class="docutils literal"><span class="pre">Distance</span></tt>.</p>
<p>Der oben erwähnte Graph entsteht durch die Verknüpfungen der Songs untereinander
und bildet keine eigenständige Klasse.</p>
</div>
<div class="section" id="regeln-und-history">
<h5>3.3.2.5 5. Regeln und History<a class="headerlink" href="#regeln-und-history" title="Permalink to this headline">¶</a></h5>
<p>Dieser Teil von <em>libmunin</em> ist für das Aufzeichnen des Benutzerverhaltens und dem
Ableiten von Assoziationsregeln daraus zuständig.</p>
</div>
</div>
<div class="section" id="einzelne-komponenten">
<h4>3.3.3 Einzelne Komponenten<a class="headerlink" href="#einzelne-komponenten" title="Permalink to this headline">¶</a></h4>
<p>Da UML-Diagramme sich oft in unwichtige Details und akribische
Methodenauflistungen versteigen, wird im folgenden textuell eine Auflistung
aller Klassen und ihrer Aufgabe gegeben. Nur in Einzelfällen werden
Methodennamen gekennzeichnet.</p>
<div class="section" id="session">
<h5>3.3.3.1 Session<a class="headerlink" href="#session" title="Permalink to this headline">¶</a></h5>
<p>Die Session ist das zentrale Objekt für den Nutzer der Bibliothek.
Es bietet über Proxymethoden Zugriff auf alle Funktionalitäten von <em>libmunin</em>
und kann zudem persistent abgespeichert werden. Dies wird durch das Python-Modul
<tt class="docutils literal"><span class="pre">pickle</span></tt> realisiert - es speichert rekursiv alle Member einer
<tt class="docutils literal"><span class="pre">Session</span></tt>-Instanz in einem Python-spezifischen Binärformat - Voraussetzung
hierfür ist, dass alle Objekte direkt oder indirekt an die <tt class="docutils literal"><span class="pre">Session</span></tt>-Instanz
gebunden sind.</p>
<p>Der Speicherort entspricht dem XDG Standard, daher wird jede Session als <tt class="docutils literal"><span class="pre">gzip</span></tt>
gepackt unter <tt class="docutils literal"><span class="pre">$HOME/.cache/libmunin/&lt;name&gt;.gz</span></tt> gespeichert.
Der <tt class="docutils literal"><span class="pre">&lt;name&gt;</span></tt> lässt sich der Session beim Instanzieren übergeben.</p>
<p>Die weitere Hauptzuständigkeit einer <tt class="docutils literal"><span class="pre">Session</span></tt> ist die Implementierung der
Recommendation-Strategien, die den Graphen traversieren.</p>
</div>
<div class="section" id="mask">
<h5>3.3.3.2 Mask<a class="headerlink" href="#mask" title="Permalink to this headline">¶</a></h5>
<p>Ein Hashtable-ähnliches Objekt, dass die Namen der einzelnen <a class="reference internal" href="rst/index.html#term-attribut"><em class="xref std std-term">Attribut</em></a>
festlegt. Da dies bereits in <a class="reference internal" href="rst/index.html#environement">3.2.2</a> erklärt wurde, wird hier
nochmal ein kurzes praktisches Beispiel gezeigt:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">m</span> <span class="o">=</span> <span class="n">Mask</span><span class="p">({</span>                              <span class="c"># Mask erwartet als Übergabe ein Dictionary</span>
     <span class="s">&#39;genre&#39;</span><span class="p">:</span> <span class="n">pairup</span><span class="p">(</span>                   <span class="c"># Verknüpfe Distanzfunktion mit Provider</span>
         <span class="n">GenreTreeProvider</span><span class="p">(),</span>           <span class="c"># Instanziere einen Provider</span>
         <span class="n">GenreTreeAvgLinkDistance</span><span class="p">(),</span>    <span class="c"># Instanziere eine Distanzfunktion</span>
         <span class="mi">4</span>                              <span class="c"># Gewichtung</span>
     <span class="p">),</span>  <span class="c"># ...</span>
<span class="p">})</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">Session</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>                    <span class="c"># Instanziere eine Session mit dieser Maske</span>
</pre></div>
</div>
<p>Wie man sieht wird als ,,Key'' der Name des Attributes festgelegt, und als
,,Value'' ein Tupel aus einer <tt class="docutils literal"><span class="pre">Provider</span></tt>-Instanz, aus einer
<tt class="docutils literal"><span class="pre">DistanceFunction</span></tt>-Instanz und der Gewichtung dieses Attributes als <tt class="docutils literal"><span class="pre">float</span></tt>.</p>
<p>Wird statt einer <tt class="docutils literal"><span class="pre">Provider</span></tt> oder ein <tt class="docutils literal"><span class="pre">DistanceFunction</span></tt> Instanz etwas
anderes übergeben, so wird ein <tt class="docutils literal"><span class="pre">DefaultProvider</span></tt> (reicht die Werte unverändert
weiter), bzw. eine <tt class="docutils literal"><span class="pre">DefaultDistanceFunction</span></tt> (vergleicht Werte mit dem
<tt class="docutils literal"><span class="pre">==</span></tt>-Operator).</p>
<p>Der Nutzer hat meist selber wenig mit der <tt class="docutils literal"><span class="pre">Mask</span></tt>-Instanz zu tun. Er übergibt
der <tt class="docutils literal"><span class="pre">Session</span></tt> eine Hashtable die implizit eine <tt class="docutils literal"><span class="pre">Mask</span></tt>-Instanz erzeugt.</p>
</div>
<div class="section" id="easysession">
<h5>3.3.3.3 EasySession<a class="headerlink" href="#easysession" title="Permalink to this headline">¶</a></h5>
<p>Wie die normale <tt class="docutils literal"><span class="pre">Session</span></tt>, bietet aber eine bereits fertigkonfigurierte
<a class="reference internal" href="rst/index.html#term-maske"><em class="xref std std-term">Maske</em></a> an, die für viele Anwendungsfälle ausreicht. In Tabelle
 ist eine Auflistung gegeben wie diese im Detail
konfiguriert ist.</p>
<div class="figure align-center" id="fig-easy-session">
<center><table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="18%" />
<col width="18%" />
<col width="27%" />
<col width="7%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="headalign-center">Attribut</th>
<th class="headalign-center">Provider</th>
<th class="headalign-center">Distanzfunktion</th>
<th class="headalign-center">Eingabe</th>
<th class="headalign-center">Weight</th>
<th class="headalign-center">&nbsp;Kompression?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td class="align-center"><tt class="docutils literal"><span class="pre">artist</span></tt></td>
<td class="align-center"><tt class="docutils literal"><span class="pre">ArtistNormalize</span></tt></td>
<td class="align-center">Default</td>
<td class="align-center">Artistname</td>
<td class="align-center">1x</td>
<td class="align-center"><span class="math">\(\surd\)</span></td>
</tr>
<tr class="row-odd"><td class="align-center"><tt class="docutils literal"><span class="pre">album</span></tt></td>
<td class="align-center"><tt class="docutils literal"><span class="pre">AlbumNormalize</span></tt></td>
<td class="align-center">Default</td>
<td class="align-center">Albumtitel</td>
<td class="align-center">1x</td>
<td class="align-center"><span class="math">\(\surd\)</span></td>
</tr>
<tr class="row-even"><td class="align-center"><tt class="docutils literal"><span class="pre">title</span></tt></td>
<td class="align-center"><tt class="docutils literal"><span class="pre">TitleNormalize</span></tt></td>
<td class="align-center">Default</td>
<td class="align-center">Tracktitel</td>
<td class="align-center">2x</td>
<td class="align-center"><span class="math">\(\Box\)</span></td>
</tr>
<tr class="row-odd"><td class="align-center"><tt class="docutils literal"><span class="pre">date</span></tt></td>
<td class="align-center"><tt class="docutils literal"><span class="pre">Date</span></tt></td>
<td class="align-center"><tt class="docutils literal"><span class="pre">Date</span></tt></td>
<td class="align-center">Datums-String</td>
<td class="align-center">4x</td>
<td class="align-center"><span class="math">\(\Box\)</span></td>
</tr>
<tr class="row-even"><td class="align-center"><tt class="docutils literal"><span class="pre">bpm</span></tt></td>
<td class="align-center"><tt class="docutils literal"><span class="pre">BPMCached</span></tt></td>
<td class="align-center"><tt class="docutils literal"><span class="pre">BPM</span></tt></td>
<td class="align-center">Audiofile-Pfad</td>
<td class="align-center">6x</td>
<td class="align-center"><span class="math">\(\Box\)</span></td>
</tr>
<tr class="row-odd"><td class="align-center"><tt class="docutils literal"><span class="pre">lyrics</span></tt></td>
<td class="align-center"><tt class="docutils literal"><span class="pre">Keywords</span></tt></td>
<td class="align-center"><tt class="docutils literal"><span class="pre">Keywords</span></tt></td>
<td class="align-center">Songtext</td>
<td class="align-center">6x</td>
<td class="align-center"><span class="math">\(\Box\)</span></td>
</tr>
<tr class="row-even"><td class="align-center"><tt class="docutils literal"><span class="pre">rating</span></tt></td>
<td class="align-center">Default</td>
<td class="align-center"><tt class="docutils literal"><span class="pre">Rating</span></tt></td>
<td class="align-center">Integer (<span class="math">\(0 \le x \le 5\)</span>)</td>
<td class="align-center">4x</td>
<td class="align-center"><span class="math">\(\Box\)</span></td>
</tr>
<tr class="row-odd"><td class="align-center"><tt class="docutils literal"><span class="pre">genre</span></tt></td>
<td class="align-center"><tt class="docutils literal"><span class="pre">GenreTree</span></tt></td>
<td class="align-center"><tt class="docutils literal"><span class="pre">GenreTree</span></tt></td>
<td class="align-center">Genre-String</td>
<td class="align-center">8x</td>
<td class="align-center"><span class="math">\(\Box\)</span></td>
</tr>
<tr class="row-even"><td class="align-center"><tt class="docutils literal"><span class="pre">moodbar</span></tt></td>
<td class="align-center"><tt class="docutils literal"><span class="pre">MoodbarAudioFile</span></tt></td>
<td class="align-center"><tt class="docutils literal"><span class="pre">Moodbar</span></tt></td>
<td class="align-center">Audiofile-Pfad</td>
<td class="align-center">9x</td>
<td class="align-center"><span class="math">\(\Box\)</span></td>
</tr>
</tbody>
</table>
<p class="caption">Default-Konfiguration der ,,EasySession''.</p>
</center></div></div>
<div class="section" id="song">
<h5>3.3.3.4 Song<a class="headerlink" href="#song" title="Permalink to this headline">¶</a></h5>
<p>Speichert fur jedes <a class="reference internal" href="rst/index.html#term-attribut"><em class="xref std std-term">Attribut</em></a> einen Wert, oder einen leeren Wert falls
das <a class="reference internal" href="rst/index.html#term-attribut"><em class="xref std std-term">Attribut</em></a> nicht gesetzt wurde. Dies ähnelt einer Hashtable,
allerdings werden nur die Werte gespeichert, die ,,Keys'' der Hashtable werden
in der <tt class="docutils literal"><span class="pre">Maske</span></tt> gespeichert und werden nur referenziert. Der Grund dieser
Optimierung liegt in verminderten Speicherverbrauch.</p>
<p>Eine weitere Kompetenz dieser Klasse ist das Verwalten der Distanzen zu seinen
Nachbarsongs. Er muss Methoden bieten um eine <a class="reference internal" href="rst/index.html#term-distanz"><em class="xref std std-term">Distanz</em></a> zu einem Nachbarn
hinzuzufügen oder zu entfernen, Methoden um über alle Nachbarn zu iterieren oder
die <a class="reference internal" href="rst/index.html#term-distanz"><em class="xref std std-term">Distanz</em></a> zu einen bestimmten Nachbarn abzufragen
und eine <tt class="docutils literal"><span class="pre">disconnect()</span></tt> Methode um den <tt class="docutils literal"><span class="pre">Song</span></tt> zu entfernt ohne dabei ein
,,Loch'' zu hinterlassen.</p>
<p>Tatsächlich gibt es kein eigene <tt class="docutils literal"><span class="pre">Graph</span></tt>-Klasse - der <a class="reference internal" href="rst/index.html#term-graph"><em class="xref std std-term">Graph</em></a> an sich
wird durch die Verknüpfung der einzelnen Songs in der <tt class="docutils literal"><span class="pre">Database</span></tt> gebildet -
jede <tt class="docutils literal"><span class="pre">Song</span></tt> Instanz bildet dabei einen Knoten.</p>
<p>Da eine Veränderung von Attributen im Song auch eine Veränderung im Graphen zur
Folge haben kann sind Instanzen der <tt class="docutils literal"><span class="pre">Song</span></tt> Klasse <em>Immutable</em>, sprich nach
ihrer Erstellung kann ihr Inhalt nicht mehr verändern werden. Ist dies trotzdem
vonnöten kann die <tt class="docutils literal"><span class="pre">modify</span></tt>-Operation eingesetzt werden.</p>
</div>
<div class="section" id="distance">
<h5>3.3.3.5 Distance<a class="headerlink" href="#distance" title="Permalink to this headline">¶</a></h5>
<p>Wie die <tt class="docutils literal"><span class="pre">Song</span></tt> Klasse, speichert aber statt den Werten von bestimmten
Attributen die <a class="reference internal" href="rst/index.html#term-distanz"><em class="xref std std-term">Distanz</em></a> zwischen zwei Attributen. Zusätzlich wird die
gewichtete Gesamtdistanz gespeichert. Diese Klasse ist ebenfalls <em>Immutable</em>.
Anschaulich ist das in  dargestellt.</p>
<div class="figure align-center" id="fig-distance-table">
<center><table border="1" class="docutils">
<colgroup>
<col width="65%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="headalign-center"><em>Attribut</em></th>
<th class="headalign-center"><em>Distanz</em></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td class="align-center"><tt class="docutils literal"><span class="pre">lyrics</span></tt></td>
<td class="align-center">0.9</td>
</tr>
<tr class="row-odd"><td class="align-center"><tt class="docutils literal"><span class="pre">genre</span></tt></td>
<td class="align-center">0.05</td>
</tr>
<tr class="row-even"><td class="align-center">...</td>
<td class="align-center">...</td>
</tr>
<tr class="row-odd"><td class="align-center">Gewichtete Distanz</td>
<td class="align-center">0.1</td>
</tr>
</tbody>
</table>
<p class="caption">Anschauliche Darstellung der Daten die in einer ``Distance``
Instanz gespeichert werden</p>
</center></div><p>Unterdistanzen die nicht berechnet wurden konnten, weil beispielsweise ein oder
beide Attribut in den Quellsongs nicht gesetzt war, werden auch nicht
gespeichert. Sie fließen aber dennoch in die gewichtete Gesamtdistanz mit ein.</p>
<p>Man hätte auch einen einzelnen <tt class="docutils literal"><span class="pre">float</span></tt> als <tt class="docutils literal"><span class="pre">Distanz</span></tt> nehmen könne, da aber
die einzelnen Unterdistanzen für jedes :term:<tt class="docutils literal"><span class="pre">Attribut</span></tt> bekannt sind kann
später eine Empfehlung ,,erklärt'' werden - beispielsweise kann man dadurch
feststellen dass das <tt class="docutils literal"><span class="pre">lyrics</span></tt>-Attribut fast komplett unähnlich war, da das
<tt class="docutils literal"><span class="pre">genre</span></tt>-Attribut aber eine Distanz von <span class="math">\(0.05\)</span> hat wurde dieser Song
vorgeschlagen.</p>
<p>Zudem kann diese Information in späteren Implementierungen dazu eingesetzt
werden, während der Laufzeit bestimmte Attribute stärker oder schwächer zu
gewichten.</p>
</div>
<div class="section" id="database">
<h5>3.3.3.6 Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h5>
<p>Die <tt class="docutils literal"><span class="pre">Database</span></tt> Klasse ist eine logische Abtrennung der <tt class="docutils literal"><span class="pre">Session</span></tt> um eine
einzige, allmächtige ,,Superklasse'' zu verhindern.</p>
<p>Sie hat folgende Aufgaben:</p>
<ul class="simple">
<li>Implementierung der einzelnen, oben besprochenen Graphenoperationen.</li>
<li>Zu diesen Zweck hält sie eine Liste von <tt class="docutils literal"><span class="pre">Songs</span></tt>.</li>
<li>ID-Vergabe für jeden <tt class="docutils literal"><span class="pre">Song</span></tt>.</li>
<li>Verwaltung der <em>Playcounts</em>, also wie oft jeder <tt class="docutils literal"><span class="pre">Song</span></tt> gespielt wurde.</li>
<li>Verwaltung der <tt class="docutils literal"><span class="pre">ListenHistory</span></tt> (siehe <a class="reference internal" href="rst/index.html#listen-history">3.3.3.9</a>)</li>
<li>Finden von Songs mit bestimmten Attributen.</li>
</ul>
</div>
<div class="section" id="history">
<h5>3.3.3.7 History<a class="headerlink" href="#history" title="Permalink to this headline">¶</a></h5>
<p>Oberklasse für <tt class="docutils literal"><span class="pre">RecommendationHistory</span></tt> und <tt class="docutils literal"><span class="pre">ListenHistory</span></tt>. Implementiert
die gemeinsame Funktionalität Songs die zeitlich hintereinander zur <tt class="docutils literal"><span class="pre">History</span></tt>
hinzugefügt werden in <em>Gruppen</em> einzuteilen. Gruppen beinhalten maximal eine
bestimmte Anzahl von Songs, ist eine <em>Gruppe</em> voll so wird eine neue angefangen.
Vergeht aber eine zu lange Zeit seit dem letzten Hinzufügen wird ebenfalls
eine neue <em>Gruppe</em> begonnen. Jede abgeschlossene <em>Gruppe</em> wird in der
<tt class="docutils literal"><span class="pre">History</span></tt> abgespeichert.</p>
<p>Das Ziel der zeitlichen Gruppierung ist eine Abbildung des Nutzerverhaltens.
Die Annahme ist hierbei dass große zeitliche Lücken zwischen zwei Liedern auf
wenig zusammenhängende Songs hindeuten. Zudem bilden die einzelnen <em>Gruppen</em> eine
Art ,,Warenkorb'' der dann bei der Ableitung von Regeln genutzt werden kann.</p>
</div>
<div class="section" id="recommendationhistory">
<h5>3.3.3.8 RecommendationHistory<a class="headerlink" href="#recommendationhistory" title="Permalink to this headline">¶</a></h5>
<p>Implementiert den unter <a class="reference internal" href="rst/index.html#recom-filter">3.1.4</a> erwähnten Mechanismus zum Filtern
von Empfehlungen.</p>
</div>
<div class="section" id="listenhistory">
<span id="listen-history"></span><h5>3.3.3.9 ListenHistory<a class="headerlink" href="#listenhistory" title="Permalink to this headline">¶</a></h5>
<p>Unterklasse von <tt class="docutils literal"><span class="pre">History</span></tt>.</p>
<p>Speichert die chronologische Reihenfolge von gehörten Songs.</p>
<p>Es ist die Aufgabe des Nutzers der Bibliothek einzelne Songs über die
hinzugefügt wird, sollte auf Basis der tatsächlich gehörten Länge des Stücks
entschieden werden. Songs die der Endnutzer einfach ,,skippt'' und die er zu
nahe <span class="math">\(0\%\)</span> angehört hat sollten auch nicht als Lerneingabe genutzt werden.</p>
</div>
<div class="section" id="rulegenerator">
<h5>3.3.3.10 RuleGenerator<a class="headerlink" href="#rulegenerator" title="Permalink to this headline">¶</a></h5>
<p>Analysiert die Gruppen innerhalb einer <tt class="docutils literal"><span class="pre">History</span></tt> und leitet daraus mittels
einer Warenkorbanalyse Assoziationsregeln ab. Diese werden danach im
<tt class="docutils literal"><span class="pre">RuleIndex</span></tt> gespeichert.</p>
</div>
<div class="section" id="ruleindex">
<h5>3.3.3.11 RuleIndex<a class="headerlink" href="#ruleindex" title="Permalink to this headline">¶</a></h5>
<p>Speichert und indiziert die vom <tt class="docutils literal"><span class="pre">RuleGenerator</span></tt> erzeugten Assoziationsregeln.
Da es später möglich sein muss jede <a class="reference internal" href="rst/index.html#term-assoziationsregel"><em class="xref std std-term">Assoziationsregel</em></a> abzufragen die
einen bestimmten Song betrifft ist es vonnöten eine zusätzliche Hashtable von
Songs auf Assoziationsregeln zu halten die als Index dient.</p>
<p>Zudem <em>,,vergisst''</em> der Index Regeln die Songs betreffen die nicht mehr in der
<tt class="docutils literal"><span class="pre">ListenHistory</span></tt> vorhanden sind.</p>
</div>
<div class="section" id="provider">
<h5>3.3.3.12 Provider<a class="headerlink" href="#provider" title="Permalink to this headline">¶</a></h5>
<p>Die Oberklasse von der jeder konkreter <tt class="docutils literal"><span class="pre">Provider</span></tt> ableitet:
Jeder Provider bietet eine <tt class="docutils literal"><span class="pre">do_process()</span></tt> Methode die von den Unterklassen
überschrieben wird. Zudem bieten viele Provider als <em>,,Convinience''</em> eine
<tt class="docutils literal"><span class="pre">do_reverse()</span></tt> Methode um für Debuggingzwecke den Originalwert vor der
Verarbeitung durch den Provider anzuzeigen.</p>
<p>Provider können zudem mittels des ,,|'' Operators in einer Kette
zusammengeschaltet werden. Intern wird ein <tt class="docutils literal"><span class="pre">CompositeProvider</span></tt> erzeugt - siehe
dazu auch <a class="reference internal" href="rst/index.html#composite-provider">4.4.1.6</a>.</p>
<p>Oft kommt es vor dass die Eingabe für einen <a class="reference internal" href="rst/index.html#term-provider"><em class="xref std std-term">Provider</em></a> viele Dupletten
enthält - beispielsweise wird derselbe Artist-Name für viele Songs eingepflegt.
Diese redundant zu speichern wäre bei großen Sammlungen unpraktisch daher bietet
jeder Provider die Möglichkeit einer primitiven Kompression: Statt den Wert
abzuspeichern wird eine bidirektionale Hashtable mit den Werten als Schlüssel
und einer Integer-ID auf der Gegenseite. Dadurch wird jeder Wert nur einmal
gespeichert und statt dem eigentlichen Wert wird eine ID herausgegeben.</p>
</div>
<div class="section" id="distancefuntion">
<h5>3.3.3.13 DistanceFuntion<a class="headerlink" href="#distancefuntion" title="Permalink to this headline">¶</a></h5>
<p>Die Oberklasse von der jede konkrete <tt class="docutils literal"><span class="pre">DistanceFunction</span></tt> ableitet:
Jede Distanzfunktion bietet eine <tt class="docutils literal"><span class="pre">do_compute()</span></tt> Methode die von den
Unterklassen überschrieben wird.</p>
<p>Um die bei den Providern mögliche <em>Kompression</em> wieder rückgängig zu machen muss
die Distanzfunktion den <a class="reference internal" href="rst/index.html#term-provider"><em class="xref std std-term">Provider</em></a> kennen.</p>
</div>
</div>
</div>
</div>
<span id="document-rst/IV/index"></span><div class="section" id="implementierung">
<h2>4 Implementierung<a class="headerlink" href="#implementierung" title="Permalink to this headline">¶</a></h2>
<blockquote class="epigraph">
<div><p><em>,,Programmieren Sie immer so, als wäre der Typ, der den Code pflegen muss, ein
gewaltbereiter Psychopath, der weiß, wo Sie wohnen.''</em></p>
<p class="attribution">&mdash;<em>Peter Stöhr</em></p>
</div></blockquote>
<div class="section" id="anwendungsbeispiel">
<h3>4.1 Anwendungsbeispiel<a class="headerlink" href="#anwendungsbeispiel" title="Permalink to this headline">¶</a></h3>
<p>Beispiele sind oft ein guter Weg um ein Gefühl für eine Bibliothek
zu bekommen. Das folgende minimale Beispiel liest <em>Songs</em> aus einer
Pseudodatenbank und erstellt für den ersten zwei Empfehlungen:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span class="hll"><span class="kn">from</span> <span class="nn">munin.easy</span> <span class="kn">import</span> <span class="n">EasySession</span>
</span>
<span class="hll"><span class="n">MY_DATABASE</span> <span class="o">=</span> <span class="p">[</span>
</span>    <span class="c"># Artist:           Album:               Title:             Genre:</span>
    <span class="p">(</span><span class="s">&#39;Akrea&#39;</span>          <span class="p">,</span> <span class="s">&#39;Lebenslinie&#39;</span>      <span class="p">,</span> <span class="s">&#39;Trugbild&#39;</span>       <span class="p">,</span> <span class="s">&#39;death metal&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;Vogelfrey&#39;</span>      <span class="p">,</span> <span class="s">&#39;Wiegenfest&#39;</span>       <span class="p">,</span> <span class="s">&#39;Heldentod&#39;</span>      <span class="p">,</span> <span class="s">&#39;folk metal&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;Letzte Instanz&#39;</span> <span class="p">,</span> <span class="s">&#39;Götter auf Abruf&#39;</span> <span class="p">,</span> <span class="s">&#39;Salve te&#39;</span>       <span class="p">,</span> <span class="s">&#39;folk rock&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;Debauchery&#39;</span>     <span class="p">,</span> <span class="s">&#39;Continue to Kill&#39;</span> <span class="p">,</span> <span class="s">&#39;Apostle of War&#39;</span> <span class="p">,</span> <span class="s">&#39;brutal death&#39;</span><span class="p">)</span>
<span class="p">]</span>

<span class="hll"><span class="n">session</span> <span class="o">=</span> <span class="n">EasySession</span><span class="p">()</span>
</span><span class="hll"><span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">transaction</span><span class="p">():</span>
</span>    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="p">(</span><span class="n">artist</span><span class="p">,</span> <span class="n">album</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">genre</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">MY_DATABASE</span><span class="p">):</span>
<span class="hll">         <span class="n">session</span><span class="o">.</span><span class="n">mapping</span><span class="p">[</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">({</span>
</span>             <span class="s">&#39;artist&#39;</span><span class="p">:</span> <span class="n">artist</span><span class="p">,</span>
             <span class="s">&#39;album&#39;</span><span class="p">:</span> <span class="n">album</span><span class="p">,</span>
             <span class="s">&#39;title&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span>
             <span class="s">&#39;genre&#39;</span><span class="p">:</span> <span class="n">genre</span>
         <span class="p">})]</span> <span class="o">=</span> <span class="n">idx</span>

<span class="hll"><span class="k">for</span> <span class="n">munin_song</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">recommend_from_seed</span><span class="p">(</span><span class="n">session</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">2</span><span class="p">):</span>
</span>    <span class="k">print</span><span class="p">(</span><span class="n">MY_DATABASE</span><span class="p">[</span><span class="n">munin_song</span><span class="o">.</span><span class="n">uid</span><span class="p">])</span>
</pre></div>
</td></tr></table></div>
<p>Ist <em>libmunin</em> korrekt installiert, so lässt sich dieses Skript als
<tt class="docutils literal"><span class="pre">minimal.py</span></tt> ablegen und ausführen:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python minimal.py
<span class="o">(</span><span class="s1">&#39;Debauchery&#39;</span> , <span class="s1">&#39;Continue to Kill&#39;</span> , <span class="s1">&#39;Apostle of War&#39;</span> , <span class="s1">&#39;brutal death&#39;</span><span class="o">)</span>
<span class="o">(</span><span class="s1">&#39;Vogelfrey&#39;</span>  , <span class="s1">&#39;Wiegenfest&#39;</span>       , <span class="s1">&#39;Heldentod&#39;</span>      , <span class="s1">&#39;folk metal&#39;</span><span class="o">)</span>,
</pre></div>
</div>
<div class="section" id="kurze-erlauterung-des-beispiels">
<h4>4.1.1 Kurze Erläuterung des Beispiels<a class="headerlink" href="#kurze-erlauterung-des-beispiels" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first"><strong>Zeile 1:</strong></p>
<p>Der Einstiegspunkt von <em>libmunin's</em> API ist immer eine <em>Session</em>.
Da die Konfiguration einer solchen (Auswahl von Provider, Distanzfunktionen
und Weighting) mitunter recht anstrengend werden kann greifen wir auf eine
Session mit vorgefertigter <a class="reference internal" href="rst/index.html#term-maske"><em class="xref std std-term">Maske</em></a> zurück - die sogenannte
<tt class="docutils literal"><span class="pre">EasySession</span></tt>.</p>
</li>
<li><p class="first"><strong>Zeile 3:</strong></p>
<p>Hier erstellen wir uns eine Pseudodatenbank aus vier Liedern mit vier
einzelnen Attributen jeweils.</p>
</li>
<li><p class="first"><strong>Zeile 11:</strong></p>
<p>Hier wird die oben erwähnte <tt class="docutils literal"><span class="pre">EasySession</span></tt> instanziert. Sie dient uns jetzt
als <em>Sitzung</em> - alle relevanten Methoden von <em>libmunin</em> können auf der
<em>Session</em> aufgerufen werden.</p>
</li>
<li><p class="first"><strong>Zeile 12:</strong></p>
<p>Bein initialen Importieren der Datenbank werden alle Songs über die <tt class="docutils literal"><span class="pre">add</span></tt>
Operation hinzugefügt. Da <tt class="docutils literal"><span class="pre">add</span></tt> noch keine Verbindungen zwischen den
einzelnen Songs herstellt stellen wir mit dieser Zeile sicher nach dem
Importieren ein <tt class="docutils literal"><span class="pre">rebuild</span></tt> ausgeführt wird.</p>
</li>
<li><p class="first"><strong>Zeile 14:</strong></p>
<p>Wir iterieren (<strong>Zeile 13</strong>) über alle Songs in unserer Pseudodatenbank und
fügen diese der <em>Session</em> hinzu (über die <tt class="docutils literal"><span class="pre">add</span></tt> Operation). zu beachten ist
dabei: Es wird eine Hashtable übergeben in denen bestimmte Schlüssel (wie
<tt class="docutils literal"><span class="pre">artist</span></tt>) von der <tt class="docutils literal"><span class="pre">EasySession</span></tt> vorgegeben sind - erstellt man eine eigene
Session kann man diese nach Belieben Konfigurieren.</p>
<p>Ein Problem dass man bei der Benutzung der Bibliothek hat ist: <em>libmunin</em> und der
Nutzer halten zwei verschiedene Datenbanken im Speicher. Der Benutzer
verwaltet die Originaldaten mit denen er arbeitet während <em>libmunin</em> nur
normalisierte Daten speichert. Das Problem dabei: Wie soll der Benutzer wissen
welche Empfehlung zu welchen Song in seinen Originaldaten gehört?</p>
<p>Dazu ist ein Mapping erforderlich das
Zu diesem Zwecke geben die Operationen <tt class="docutils literal"><span class="pre">add</span></tt>, <tt class="docutils literal"><span class="pre">insert</span></tt>, <tt class="docutils literal"><span class="pre">modify</span></tt> und
<tt class="docutils literal"><span class="pre">remove</span></tt> eine eindeutige <em>ID</em> zurück die einen von <em>libmunin's</em> Songs
referenziert. Der Benutzer kann diese nutzen um auf eine <em>ID</em> innerhalb <em>seiner</em>
Datenbank zu referenzieren.</p>
<p>Im obigen Beispiel wird die von <tt class="docutils literal"><span class="pre">add</span></tt> zurückgebene <em>ID</em> auf die <em>ID</em> innerhalb
von <em>MY_DATABASE</em> gemappt.</p>
</li>
<li><p class="first"><strong>Zeile 21:</strong></p>
<p>In dieser Zeile geben wir die ersten Empfehlung aus. Wir lassen uns von der
<tt class="docutils literal"><span class="pre">EasySession</span></tt> über die Methode <tt class="docutils literal"><span class="pre">recommend_from_seed</span></tt> zwei Empfehlungen zum ersten
Song der über <tt class="docutils literal"><span class="pre">add</span></tt> hinzugefügt wurde geben. Die Empfehlung selbst wird als
<tt class="docutils literal"><span class="pre">Song</span></tt> Objekt ausgegeben - dieses hat unter anderen eine <em>ID</em> gespeichert mit
der wir die ursprünglichen Daten finden können.</p>
</li>
</ul>
<p>Dieses und weitere Beispiele finden sich auf der API-Dokumentation im Web
<a class="reference internal" href="rst/index.html#lx" id="id1">[Link-16]</a>.</p>
</div>
<div class="section" id="kurze-erlauterung-der-ausgabe">
<h4>4.1.2 Kurze Erläuterung der Ausgabe<a class="headerlink" href="#kurze-erlauterung-der-ausgabe" title="Permalink to this headline">¶</a></h4>
<p>Die Ausgabe ist bei näherer Betrachtung nicht weiter überraschend: Da sich nur
das Genre effektiv vergleichen lässt und wir uns von dem ersten Song (,,
<em>Trugbild</em> '') zwei Empfehlungen geben ließen werden die zwei Songs mit dem
ähnlichsten Genre ausgegeben.</p>
<p>In Abbildung  ist dies nochmal zu sehen: Der <em>Seedsong</em> (0)
ist direkt mit den Songs 1 (<em>Vogelfrey</em>) und 3 (<em>Debauchery</em>) benachbart.
Da die beiden Genres <em>folk rock</em> und <em>death metal</em> keine gemeinsame Schnittmenge
haben ist dieser auch kein Nachbar - Valide Nachbarn müssen stets eine Distanz
<span class="math">\(\le 1.0\)</span> besitzen.</p>
<p>Ein komplizierteres Beispiel das die meisten Aspekte von libmunin abdeckt
findet sich in <a class="reference internal" href="rst/index.html#complex-example"><em>Ausführliches Beispiel</em></a>.</p>
<div class="figure align-center" id="fig-minigraph">
<a class="reference internal image-reference" href="../../_images/minigraph.png"><img alt="Minimaler Beispielgraph" src="../../_images/minigraph.png" style="width: 42%;" /></a>
<p class="caption">Minimaler Beispielgraph der hinter dem obigen Beispiel steht. Die Dicke der
Kanten indiziert die Distanz. Dünne Kanten implizieren eine kleine Distanz.
Die Farbe der Knoten ist hier nicht relevant.</p>
</div>
</div>
</div>
<div class="section" id="kurze-implementierungshistorie">
<h3>4.2 Kurze Implementierungshistorie<a class="headerlink" href="#kurze-implementierungshistorie" title="Permalink to this headline">¶</a></h3>
<p>Am 11. Oktober 2013 wurde mit der Implementierung begonnen.</p>
<p>Anfangs war, wie im Exposé vorgesehen, noch eine Distanzmatrix zur Speicherung
der Distanzen und das Berechnen jeder einzelnen Song-Kombination vorgesehen -
aus den bereits erwähnten Gründen hat sich das zu einer Approximation geändert.
Hierbei eine vernünftige Herangehensweise zu finden hat letztlich ca. 1
<span class="math">\(^1/_2\)</span> Monate beansprucht.</p>
<p>Die zwischenzeitlich aufgekommene Idee Audiodaten mittels Audiofingerprints wie
<em>Chromaprint</em> zu vergleichen wurde wieder aufgegeben - damit ließen sich
wirklich nur fast gleiche Stücke ermitteln. Selbst <em>Live</em> und <em>Studio</em> Versionen
ließen sich manchmal nicht differenzieren.</p>
<p>Parallel zur Implementierung wurde ein ,,Tagebuch'' <a class="reference internal" href="rst/index.html#thv" id="id2">[Link-17]</a> verfasst das
dazu dienen sollte Ideen und Geschehnisse festzuhalten - allerdings weniger als
Information für Dritte, mehr als persönliche Erinnerung.</p>
<p>Nach gut drei Monaten wurde am 15. Januar 2014 der erste Prototyp fertiggestellt.
Die letzten 3 <span class="math">\(^1/_2\)</span> Wochen dieser Zeit wurden für die
Implementierung einer Demonanwendung aufgewendet.</p>
</div>
<div class="section" id="liste-verfugbarer-empfehlungs-strategien">
<span id="list-of-recom-strategies"></span><h3>4.3 Liste verfügbarer Empfehlungs-Strategien<a class="headerlink" href="#liste-verfugbarer-empfehlungs-strategien" title="Permalink to this headline">¶</a></h3>
<div class="section" id="basierend-auf-einem-seedsong">
<h4>4.3.1 Basierend auf einem Seedsong<a class="headerlink" href="#basierend-auf-einem-seedsong" title="Permalink to this headline">¶</a></h4>
<p>Basierend auf einem vom Endnutzer ausgewählten Song
wird ein Iterator zurückgegeben der gemäß <a class="reference internal" href="rst/index.html#recom-out">3.1.3</a> eine Breitensuche von
diesem <a class="reference internal" href="rst/index.html#term-seedsong"><em class="xref std std-term">Seedsong</em></a> aus ausführt. Optional wird  der <em>Iterator</em> gemäß
<a class="reference internal" href="rst/index.html#recom-filter">3.1.4</a> gefiltert.</p>
</div>
<div class="section" id="basierend-auf-einer-heuristik">
<h4>4.3.2 Basierend auf einer Heuristik<a class="headerlink" href="#basierend-auf-einer-heuristik" title="Permalink to this headline">¶</a></h4>
<p><em>libmunin</em> kann auch automatisch einen oder mehrere geeignete Seedsongs
auswählen. Dabei wird der Reihe nach das folgende probiert:</p>
<ul class="simple">
<li>Wähle die Regel mit der besten Bewertung aus und nehme alle darin erwähnten
Songs als Seedsongs an.</li>
<li>Wähle den Song mit der höchsten Abspielanzahl als <a class="reference internal" href="rst/index.html#term-seedsong"><em class="xref std std-term">Seedsong</em></a>.</li>
<li>Schlägt beides schief weil keine Regeln vorhanden sind oder noch nichts
abgespielt wurde, so wird ein zufälliger <a class="reference internal" href="rst/index.html#term-seedsong"><em class="xref std std-term">Seedsong</em></a> gezogen.</li>
</ul>
<p>Optional wird  der entstehende Iterator gemäß <a class="reference internal" href="rst/index.html#recom-filter">3.1.4</a> gefiltert.</p>
</div>
<div class="section" id="basierend-auf-einer-attributsuche">
<h4>4.3.3 Basierend auf einer Attributsuche<a class="headerlink" href="#basierend-auf-einer-attributsuche" title="Permalink to this headline">¶</a></h4>
<p>Es kann nach einen oder mehreren Songs gesucht werden die gewisse
Attribut-Werte-Paare aufweisen. Als Beispiel kann ein Song gesucht werden der
die Merkmale ,,Genre: Rock'' und ,,Date: 2012'' aufweist.</p>
<p>Alle passenden Songs, aber maximal 20, werden dann als Seedsongs angenommen.
Optional wird  der entstehende Iterator gemäß <a class="reference internal" href="rst/index.html#recom-filter">3.1.4</a> gefiltert.</p>
</div>
</div>
<div class="section" id="liste-verfugbarer-provider-und-distanzfunktionen">
<h3>4.4 Liste verfügbarer Provider und Distanzfunktionen<a class="headerlink" href="#liste-verfugbarer-provider-und-distanzfunktionen" title="Permalink to this headline">¶</a></h3>
<p>Insgesamt wurden 13 unterschiedliche Provider implementiert - davon variieren
einige allerdings nur in Details. Dazu gesellen sich 9 Distanzfunktionen - auch
manche davon unterscheiden sich nur in ihrer Fusionierungsmethode.</p>
<div class="section" id="liste-der-provider">
<span id="provider-list"></span><h4>4.4.1 Liste der Provider<a class="headerlink" href="#liste-der-provider" title="Permalink to this headline">¶</a></h4>
<p>Die genaue Funtkionsweise der Provider wird in der Bachelorarbeitet betrachtet.
Im folgenden wird nur eine Auflistung verfügbarer Provider gegeben und welche
Eingabe sie erwarten sowie welche Ausgabe sie produzieren.</p>
<div class="section" id="date">
<h5>4.4.1.1 Date<a class="headerlink" href="#date" title="Permalink to this headline">¶</a></h5>
<p>Wandelt und normalisiert ein Datum dass als String übergeben wird zu einer
Jahreszahl (<em>1975</em> beispielsweise). Dabei werden die häufigsten
Datumformatierungen automatisch erkannt. Dies ist nötig da je nach Region ganz
unterschiedliche Datumsangaben in den Audiofiles getaggt sind.</p>
</div>
<div class="section" id="moodbar">
<h5>4.4.1.2 Moodbar<a class="headerlink" href="#moodbar" title="Permalink to this headline">¶</a></h5>
<p>Berechnet mit dem <tt class="docutils literal"><span class="pre">moodbar</span></tt> (vgl. <a class="reference internal" href="rst/index.html#wood2005techniques" id="id3">[9]</a>) Programm aus
einen beliebigen Audio File einen Vektor mit 1000 RGB-Farbwerten (siehe
). Jeder dieser Farbwerte repräsentiert den Anteil
niedriger Frequenzen (rot), mittlerer (grün) und hoher Frequenzen (blau) in
einem Tausendstel des Audiostücks.</p>
<p>Obwohl man aus dem Namen dieses Verfahren schließen könnte dass hier die
<em>Stimmung</em> im Lied angedeutet wird, kann man aus diesen Informationen
lediglich herauslesen wie ,,energetisch'' ein Lied zu einem bestimmten
Zeitpunkt ist - mit etwas Glück kann man auch Instrumente erkennen - so ist
die Kombination von E-Gitarre und Drums oft ein helles Türkis.</p>
<p>Aus diesem RGB-Vektoren werden die prägnantesten Merkmale abgeleitet - die
dominanten Farben, der Stilleanteil (<em>schwarz</em>) und einige weitere Merkmale.</p>
<p>Dieser Provider kommt in drei verschiedenen Ausführungen daher die sich in dem
Typ ihrer Eingabe unterscheiden:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Moodbar</span></tt>: Nimmt eine Liste von 1000 RGB-Werten.</li>
<li><tt class="docutils literal"><span class="pre">MoodbarFile</span></tt>: Nimmt ein Pfad zu einem von der <tt class="docutils literal"><span class="pre">moodbar</span></tt> erstellten Datei
entgegen die einen Vektor aus 1000 RGB-Werten binär beinhaltet.</li>
<li><tt class="docutils literal"><span class="pre">MoodbarAudioFile</span></tt>: Nimmt ein Pfad zu einer beliebigen Audiodatei entgegen
und führt das <tt class="docutils literal"><span class="pre">moodbar</span></tt>-Utility darauf aus falls noch keine weiter Datei mit
demselben Pfad plus der zusätzlichen Endung <tt class="docutils literal"><span class="pre">.mood</span></tt> vorhanden ist.</li>
</ul>
<div class="figure align-center" id="fig-moodbar-suidakra">
<a class="reference internal image-reference" href="../../_images/moodbar_suidakra.svg"><img alt="Moodbar Beispielsvisualisierung" src="../../_images/moodbar_suidakra.svg" width="100%" /></a>
<p class="caption">Anzeige des RGB-Vektors samt Histogram und Verlauf für das Lied ,,Over Nine
Waves'' der Band ,,Suidakra''. Der grüne Teil am Anfang ist ein
Dudelsack-Intro. Später setzen relativ plötzlich harte E-Gitarren und Drums
ein.</p>
</div>
</div>
<div class="section" id="wordlist">
<h5>4.4.1.3 Wordlist<a class="headerlink" href="#wordlist" title="Permalink to this headline">¶</a></h5>
<p>Bricht einen String in eine Liste von Wörter auf.</p>
</div>
<div class="section" id="bpm">
<h5>4.4.1.4 BPM<a class="headerlink" href="#bpm" title="Permalink to this headline">¶</a></h5>
<p>Berechnet die ,,Beats-Per-Minute'' eines Lieds, also einem Maß für die
Schnelligkeit  - dies funktioniert nicht nur für stark beatlastige
Musikrichtungen wie Techno sondern auch für normale Musikrichtungen.</p>
<p>Die Funktionalität wird momentan, eher primitiv, durch den Aufurf eines externen
Tools realisiert <a class="reference internal" href="rst/index.html#yz" id="id4">[Link-18]</a>.</p>
</div>
<div class="section" id="normalize-artistnormalize-albumnormalize-titlenormalize">
<h5>4.4.1.5 Normalize, <tt class="docutils literal"><span class="pre">ArtistNormalize</span></tt>, <tt class="docutils literal"><span class="pre">AlbumNormalize</span></tt>, <cite>TitleNormalize</cite><a class="headerlink" href="#normalize-artistnormalize-albumnormalize-titlenormalize" title="Permalink to this headline">¶</a></h5>
<p>Diese Provider normalisieren die häufig unsauberen Tags einer Musiksammlung auf
verschiedene Art und Weise:</p>
<div class="section" id="normalize">
<h6>4.4.1.5.1 Normalize:<a class="headerlink" href="#normalize" title="Permalink to this headline">¶</a></h6>
<p>Normalisiert einen String mittels <em>NKFC Unicode Normalization</em>.
Bei Unicode gibt es oft mehrere Arten einen <em>Glyph</em> zu schreiben. So kann
ein ,,ä'' als einzelner Glyph (<em>Codepoint U+e4</em>) oder als <em>Composite
Glyph</em> geschrieben werden: ,,&quot; + a'' (<em>U+30B + U+61</em>). Dieser Provider macht
daraus stets den ersten Fall.</p>
</div>
<div class="section" id="artistnormalize">
<h6>4.4.1.5.2 ArtistNormalize:<a class="headerlink" href="#artistnormalize" title="Permalink to this headline">¶</a></h6>
<p>Entfernt zusätzlich <em>Unrat</em> der bei Artistnamen vorhanden
ist. Beispielsweise wird aus <em>,,The Beatles''</em> der String <em>,,beatles''</em></p>
</div>
<div class="section" id="albumnormalize">
<h6>4.4.1.5.3 AlbumNormalize:<a class="headerlink" href="#albumnormalize" title="Permalink to this headline">¶</a></h6>
<p>Entfernt analog zu <tt class="docutils literal"><span class="pre">ArtistNormalize</span></tt> Unrat aus Album-Namen wie <em>(live 2012)</em></p>
</div>
<div class="section" id="titlenormalize">
<h6>4.4.1.5.4 TitleNormalize:<a class="headerlink" href="#titlenormalize" title="Permalink to this headline">¶</a></h6>
<p>Momentan ein Synonym für <tt class="docutils literal"><span class="pre">AlbumNormalize</span></tt>.</p>
</div>
</div>
<div class="section" id="composite">
<span id="composite-provider"></span><h5>4.4.1.6 Composite<a class="headerlink" href="#composite" title="Permalink to this headline">¶</a></h5>
<p>Erlaubt das Verketten von Providern. Der erste Eingabewert wird dem ersten
Provider in der Kette gegeben und die Ausgabe, ähnliche wie bei einer Unix-Pipe,
wird an den nächsten Provider in der Kette als Eingabe weitergegeben.</p>
<p>Ein Anwendungsbeispiel wäre das Zusammenschalten mehrerer Provider nach
Baukastenprinzip:</p>
<p class="graphviz">
<img src="../../_images/graphviz-f8c4c9bd14f84046e08d58110698391cf9eb7476.png" alt="digraph foo {
size=5;

node [shape=record];

subgraph {
    rank = same; PlyrLyrics; Keywords; Stem
}

&quot;Eingabe: Artist, Album&quot; -&gt;  PlyrLyrics [label=&quot; Sucht im Web &quot;]
PlyrLyrics -&gt; Keywords [label=&quot;liefert Songtext&quot;]
Keywords -&gt; Stem [label=&quot;extrahiert Keywords&quot;]
Stem -&gt; &quot;Ausgabe: Stemmed Keywords&quot; [label=&quot; Wortstamm-Keywords &quot;]
}" />
</p>
</div>
<div class="section" id="stem">
<h5>4.4.1.7 Stem<a class="headerlink" href="#stem" title="Permalink to this headline">¶</a></h5>
<p>Bringt mithilfe des Porter-Stemmer-Algorithmus es einzelne Wörter oder eine
Liste von Wörtern auf ihren Wortstamm zurück. Aus den Wörtern <em>Fisher</em>, <em>Fish</em>,
<em>fishing</em> wird beispielsweise stets <em>fish</em>. Dies ist natürlich abhängig von der
Eingabesprache - momentan wird aber stets Englisch angenommen.</p>
</div>
<div class="section" id="genretree">
<span id="genre-provider"></span><h5>4.4.1.8 GenreTree<a class="headerlink" href="#genretree" title="Permalink to this headline">¶</a></h5>
<p>Der wohl komplizierteste <a class="reference internal" href="rst/index.html#term-provider"><em class="xref std std-term">Provider</em></a>.</p>
<p>Ein beliebiges Eingabegenre wird in einzelne Untergenres aufgeteilt und normalisiert.
Beispielsweise wird die Genrebeschreibung <em>Rock, Reggae / Alternative Rock</em>
mittels einer Regular Expression in die Unterbestandteile aufgebrochen:</p>
<ul class="simple">
<li><em>Rock</em></li>
<li><em>Reggae</em></li>
<li><em>Alternative Rock</em></li>
</ul>
<p>Danach wird jedes so entstandene Untergenre in einzelne Wörter aufgebrochen und
in einem <em>Baum</em> bekannter Genres (momentan 1876 einzelne Genres) eingepasst:</p>
<p class="graphviz">
<img src="../../_images/graphviz-47db664b9c86f43c03ba9eecac40c5be943d6098.png" alt="digraph foo {
size=4;
node [shape=record];

&quot;music (#0)&quot;  -&gt; &quot;rock (#771)&quot;
&quot;music (#0)&quot;  -&gt; &quot;alternative (#14)&quot;
&quot;music (#0)&quot;  -&gt; &quot;reggae (#753)&quot;
&quot;rock (#771)&quot; -&gt; &quot;alternative (#3)&quot;
}" />
</p>
<p>Hier werden aus Platzgründen nur die Untergenres im obigen Beispiel gezeigt.
Jeder Knoten hat zudem einen Indexwert der in Klammern angegeben ist.</p>
<p>Das finale Resultat dieses Providers mit der obigen Eingabe ist dann in
Python-Listen Notation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[[</span><span class="mi">14</span><span class="p">],</span> <span class="p">[</span><span class="mi">771</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">753</span><span class="p">],</span> <span class="p">[</span><span class="mi">771</span><span class="p">]]</span>
</pre></div>
</div>
<p>Das Resultat ist also eine Liste mit einzelnen <em>Pfaden</em> durch den Genrebaum.
Jeder Pfad ist dabei eine Liste von mindestens einen Indexwert.
Da der Root-Knoten (<em>music</em>) immer den Index <em>0</em> hat wird dieser weggelassen.
Löst man diese wieder auf, so erhält man die ursprünglichen Genres:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[[</span><span class="s">&#39;alternative&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;alternative&#39;</span><span class="p">,</span> <span class="s">&#39;rock&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;reggae&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;rock&#39;</span><span class="p">]]</span>
</pre></div>
</div>
<p>Da die einzelnen Pfade allerdings weniger Speicher verbrauchen und sich bei
weitem leichter auflösen und vergleichen lassen werden diese vom Provider
zurückgegeben.</p>
</div>
<div class="section" id="keywords">
<span id="keyword-provider"></span><h5>4.4.1.9 Keywords<a class="headerlink" href="#keywords" title="Permalink to this headline">¶</a></h5>
<p>Extrahiert aus einem Text als Eingabe alle <em>relevanten</em> Stichwörter.
Ein Beispiel dieser <em>Keywords</em> wird in  gezeigt.
Zudem wird die Sprache des Eingabetextes erkannt und mit abgespeichert.</p>
<div class="figure align-center" id="fig-yellow-keywords">
<center><table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="headalign-center">Rating</th>
<th class="headalign-center">Keywords</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td class="align-center">22.558</td>
<td class="align-center">'yellow', 'submarin'</td>
</tr>
<tr class="row-odd"><td class="align-center">20.835</td>
<td class="align-center">'full', 'speed', 'ahead', 'mr'</td>
</tr>
<tr class="row-even"><td class="align-center">8.343</td>
<td class="align-center">'live', 'beneath'</td>
</tr>
<tr class="row-odd"><td class="align-center">5.247</td>
<td class="align-center">'band', 'begin'</td>
</tr>
<tr class="row-even"><td class="align-center">3.297</td>
<td class="align-center">'sea'</td>
</tr>
<tr class="row-odd"><td class="align-center">3.227</td>
<td class="align-center">'green'</td>
</tr>
<tr class="row-even"><td class="align-center">2.797</td>
<td class="align-center">'captain'</td>
</tr>
<tr class="row-odd"><td class="align-center">...</td>
<td class="align-center">...</td>
</tr>
</tbody>
</table>
<p class="caption">Die extrahierten Keywords aus ,,Yellow Submarine'', samt deren
Rating.</p>
</center></div></div>
<div class="section" id="plyrlyrics">
<h5>4.4.1.10 PlyrLyrics<a class="headerlink" href="#plyrlyrics" title="Permalink to this headline">¶</a></h5>
<p>Besorgt mittels <em>libglyr</em> Liedtexte aus dem Internet. Bereits gesuchte Liedtexte
werden dabei zwischengespeichert. Dieser <a class="reference internal" href="rst/index.html#term-provider"><em class="xref std std-term">Provider</em></a> eignet sich besonders im
Zusammenhang mit dem <em>Keywords</em> zusammen als <em>Composite</em> Provider.</p>
</div>
<div class="section" id="discogsgenre">
<span id="discogs-genre-provider"></span><h5>4.4.1.11 DiscogsGenre<a class="headerlink" href="#discogsgenre" title="Permalink to this headline">¶</a></h5>
<p>Besorgt von dem Online-Musikmarktplatz <em>Discogs</em> Genre Informationen. Dies ist
nötig da Musiksammlungen für gewöhnlich mittels einer Online-Musikdatenbank
getaggt werden - die meisten bieten allerdings keine Genreinformationen.</p>
</div>
</div>
<div class="section" id="liste-der-distanzfunktionen">
<span id="distance-function-list"></span><h4>4.4.2 Liste der Distanzfunktionen<a class="headerlink" href="#liste-der-distanzfunktionen" title="Permalink to this headline">¶</a></h4>
<p>Die genaue Funktionsweise der einzelnen Distanzfunktionen wird in der
Bachelorarbeit genauer betrachtet. Im Folgenden wird aber eine kurze Auflistung
jeder vorhandenen <a class="reference internal" href="rst/index.html#term-distanzfunktion"><em class="xref std std-term">Distanzfunktion</em></a> und der Annahme auf der sie basiert
gegeben.</p>
<div class="section" id="id5">
<h5>4.4.2.1 Date<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h5>
<p>Vergleicht zwei Jahreszahlen. Eine hohe Differenz führt dabei zu einer hohen
Distanz. Also ,,erstes'' Jahr wird das Jahr 1950 angenommen.</p>
<div class="section" id="annahme">
<h6>4.4.2.1.1 Annahme:<a class="headerlink" href="#annahme" title="Permalink to this headline">¶</a></h6>
<p>Lieder mit einer großen zeitlichen Differenz zueinander werden selten zusammen
gehört.</p>
</div>
</div>
<div class="section" id="id6">
<h5>4.4.2.2 Moodbar<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h5>
<p>Vergleicht die <tt class="docutils literal"><span class="pre">moodbar</span></tt> zweier unterschiedlicher Lieder.</p>
<div class="section" id="id7">
<h6>4.4.2.2.1 Annahme:<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h6>
<p>Ähnliche Moodbars implizeren auch ähnliche Lieder. Da man oft
gewissen Instrumente anhand deren Farbe erkennen kann werden unter anderen die
dominanten Farben und der Stilleanteil verglichen.</p>
</div>
</div>
<div class="section" id="rating">
<h5>4.4.2.3 Rating<a class="headerlink" href="#rating" title="Permalink to this headline">¶</a></h5>
<p>Vergleicht ein vom Benutzer vergebenes Rating. Dabei wird zwischen
nichtgesetzten <em>(z.B. 0)</em> und gesetzten Rating unterschieden <em>(z.B. 1-5)</em> die
sich unterschiedlich auf die finale Distanz auswirken.</p>
<p>Die Werte für das Minima, Maxima und den Nullwert können beim Erstellen der
Session konfiguriert werden.</p>
<div class="section" id="id8">
<h6>4.4.2.3.1 Annahme:<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h6>
<p>Zeichnet der Benutzer ein Lied mit einem hohen Rating aus so möchte er
vermutlich Empfehlungen zu ebenfalls hoch ausgezeichneten Liedern haben.  Dies
bietet dem Nutzer eine Möglichkeit direkte <em>Hinweise</em> an das System zu geben.</p>
</div>
</div>
<div class="section" id="id9">
<h5>4.4.2.4 BPM<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h5>
<p>Vergleicht den ,,Beats-per-Minute`` Wert zweier Lieder.
Als Minimalwert wird 50 und als Maximalwert 250 angenommen.</p>
<div class="section" id="id10">
<h6>4.4.2.4.1 Annahme:<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h6>
<p>Ähnlich schnelle Lieder werden oft zusammen gespielt.</p>
</div>
</div>
<div class="section" id="wordlist-levenshtein-keywords">
<h5>4.4.2.5 Wordlist, <tt class="docutils literal"><span class="pre">Levenshtein</span></tt>, <tt class="docutils literal"><span class="pre">Keywords</span></tt><a class="headerlink" href="#wordlist-levenshtein-keywords" title="Permalink to this headline">¶</a></h5>
<p>Diese Distanzen vergleiche alle, auf unterschiedliche Art und Weise, zwei Menge
von Wörtern miteinander.</p>
<div class="section" id="id11">
<h6>4.4.2.5.1 Wordlist:<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h6>
<p>Vergleicht eine Menge von Wörtern auf Identität. Sind die Mengen identisch so
kommt eine Distanz von <span class="math">\(0.0\)</span> dabei heraus.</p>
</div>
<div class="section" id="id12">
<h6>4.4.2.5.2 Annahme:<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h6>
<p>Diese <a class="reference internal" href="rst/index.html#term-distanzfunktion"><em class="xref std std-term">Distanzfunktion</em></a> ist beispielsweise beim Vergleich von Titeln
nützlich. Ähnliche Wörter in Titeln deuten oft auf ähnliche Themen hin.
Als Beispiel kann man die Titel <em>,,Hey Staat'' (Hans Söllner)</em> und <em>,,Lieber
Staat'' (Farin Urlaub)</em> nennen.</p>
</div>
<div class="section" id="levenshtein">
<h6>4.4.2.5.3 Levenshtein:<a class="headerlink" href="#levenshtein" title="Permalink to this headline">¶</a></h6>
<p>Wie <tt class="docutils literal"><span class="pre">Wordlist</span></tt>, die einzelnen Wörter werden aber mittels der Levenshtein
Distanzfunktion verglichen.  So spielen kleine Abweichung wie der Vergleich von
<tt class="docutils literal"><span class="pre">color</span></tt> und <tt class="docutils literal"><span class="pre">colour</span></tt> keine große Rolle mehr. Der große Nachteil ist der
erhöhte Rechenaufwand.</p>
</div>
<div class="section" id="id13">
<h6>4.4.2.5.4 Annahme:<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h6>
<p>Ähnlich wie bei <tt class="docutils literal"><span class="pre">Wordlist</span></tt>, aber eben auch für Daten bei denen man kleine
Unterschiede in der Schreibweise erwartet. Beispielsweise bei Artist-Namen wie
<tt class="docutils literal"><span class="pre">ZZ-Top</span></tt> und <tt class="docutils literal"><span class="pre">zz</span> <span class="pre">Top</span></tt>.</p>
<p>Ähnlich wie</p>
</div>
<div class="section" id="id14">
<h6>4.4.2.5.5 Keywords:<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h6>
<p>Nimmt die Ergebnisse des <tt class="docutils literal"><span class="pre">Keyword</span></tt> (<a class="reference internal" href="rst/index.html#keyword-provider">4.4.1.9</a>) Providers
entgegen und bezieht die Sprache beider Keywordmengen sowie die länge der
einzelnen Keywords in die Distanz mit ein.</p>
</div>
<div class="section" id="id15">
<h6>4.4.2.5.6 Annahme:<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h6>
<p>Der Nutzer möchte Lieder mit ähnliche Themen zu einem Lied vorgeschlagen
bekommen - oder zumindest in derselben Sprache.</p>
</div>
</div>
<div class="section" id="genretreeavglink-genretree">
<h5>4.4.2.6 GenreTreeAvgLink, <tt class="docutils literal"><span class="pre">GenreTree</span></tt><a class="headerlink" href="#genretreeavglink-genretree" title="Permalink to this headline">¶</a></h5>
<p>Vergleicht die unter <a class="reference internal" href="rst/index.html#genre-provider">4.4.1.8</a> erwähnten Pfade.</p>
<div class="section" id="id16">
<h6>4.4.2.6.1 GenreTree:<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h6>
<p>Vergleicht alle Pfade in beiden Eingabemengen miteinander und nimmt die
<strong>geringste</strong> Distanz von allen.</p>
<p>Diese Distanzfunktion sollte gewählt werden wenn die Genre-Tags eher kurz
gefasst sind - beispielsweise wenn nur <em>Rock</em> darin steht.</p>
</div>
<div class="section" id="genretreeavglink">
<h6>4.4.2.6.2 GenreTreeAvgLink:<a class="headerlink" href="#genretreeavglink" title="Permalink to this headline">¶</a></h6>
<p>Vergleicht alle Pfade in beiden Eingabemengen miteinander und nimmt die
<strong>durchschnittliche</strong> Distanz von allen.</p>
<p>Diese Distanzfunktion sollte gewählt werden wenn ausführliche Genre-Tags
vorhanden - wie sie beispielsweise vom <tt class="docutils literal"><span class="pre">DiscogsGenre</span></tt> Provider geliefert
werden <a class="reference internal" href="rst/index.html#discogs-genre-provider">4.4.1.11</a> - sind.</p>
</div>
<div class="section" id="id17">
<h6>4.4.2.6.3 Annahme:<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h6>
<p>Ähnliche Genres deuten auf ähnliche Musikstile hin.</p>
</div>
</div>
</div>
</div>
<div class="section" id="modul-und-paketubersicht">
<h3>4.5 Modul- und Paketübersicht<a class="headerlink" href="#modul-und-paketubersicht" title="Permalink to this headline">¶</a></h3>
<p>In der Programmiersprache <em>Python</em> entspricht jede einzelne <tt class="docutils literal"><span class="pre">.py</span></tt> Datei einem
<em>Modul</em>. Die Auflistung unter  soll eine Übersicht darüber
geben welche Funktionen in welchem Modul implementiert worden.</p>
<div class="figure align-center" id="fig-module-tree">
<center><table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="18%" />
<col width="16%" />
<col width="7%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="headalign-center"><strong>Verzeichnisse</strong></th>
<th class="headalign-center">(gekürzt)</th>
<th class="headalign-center">&nbsp;</th>
<th class="headalign-center">&nbsp;</th>
<th class="headalign-center"><strong>Beschreibung</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td class="align-center"><strong>munin/</strong></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Quelltextverzeichnis</td>
</tr>
<tr class="row-odd"><td class="align-center">&nbsp;</td>
<td class="align-center"><em>__init__.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Versionierungs Info</td>
</tr>
<tr class="row-even"><td class="align-center">&nbsp;</td>
<td class="align-center"><em>__main__.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Beispielprogramm</td>
</tr>
<tr class="row-odd"><td class="align-center">&nbsp;</td>
<td class="align-center"><em>database.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Implementierung von <tt class="docutils literal"><span class="pre">Database</span></tt></td>
</tr>
<tr class="row-even"><td class="align-center">&nbsp;</td>
<td class="align-center"><em>dbus_service.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Unfertiger DBus Service.</td>
</tr>
<tr class="row-odd"><td class="align-center">&nbsp;</td>
<td class="align-center"><em>dbus_client</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Unfertiger DBus Beispielclient.</td>
</tr>
<tr class="row-even"><td class="align-center">&nbsp;</td>
<td class="align-center"><strong>distance/</strong></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Unterverzeichnis für Distanzfunktionen</td>
</tr>
<tr class="row-odd"><td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center"><em>__init__.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Implementierung von <tt class="docutils literal"><span class="pre">DistanceFunction</span></tt></td>
</tr>
<tr class="row-even"><td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center"><em>bpm.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Implementierung von <tt class="docutils literal"><span class="pre">BPMDistance</span></tt></td>
</tr>
<tr class="row-odd"><td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center"><em>date.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Implementierung von <tt class="docutils literal"><span class="pre">DateDistance</span></tt></td>
</tr>
<tr class="row-even"><td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center"><em>...</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Weitere Subklassen von <tt class="docutils literal"><span class="pre">DistanceFunction</span></tt></td>
</tr>
<tr class="row-odd"><td class="align-center">&nbsp;</td>
<td class="align-center"><em>session.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Implementierung der <tt class="docutils literal"><span class="pre">Session</span></tt> (API)</td>
</tr>
<tr class="row-even"><td class="align-center">&nbsp;</td>
<td class="align-center"><em>easy.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Implementierung der <tt class="docutils literal"><span class="pre">EasySession</span></tt></td>
</tr>
<tr class="row-odd"><td class="align-center">&nbsp;</td>
<td class="align-center"><em>graph.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Implementierung der Graphenoperationen</td>
</tr>
<tr class="row-even"><td class="align-center">&nbsp;</td>
<td class="align-center"><em>helper.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Gesammelte, oftgenutzte Funktionen</td>
</tr>
<tr class="row-odd"><td class="align-center">&nbsp;</td>
<td class="align-center"><em>history.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Implementierung der <tt class="docutils literal"><span class="pre">History</span></tt> u. Regeln</td>
</tr>
<tr class="row-even"><td class="align-center">&nbsp;</td>
<td class="align-center"><em>plot.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Visualisierungsfunktionen für Graphen</td>
</tr>
<tr class="row-odd"><td class="align-center">&nbsp;</td>
<td class="align-center"><strong>provider/</strong></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Unterverzeichnis für Provider</td>
</tr>
<tr class="row-even"><td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center"><em>__init__.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Implementierung von <tt class="docutils literal"><span class="pre">Provider</span></tt></td>
</tr>
<tr class="row-odd"><td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center"><em>bpm.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Implementierung von <tt class="docutils literal"><span class="pre">BPMProvider</span></tt></td>
</tr>
<tr class="row-even"><td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center"><em>composite.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Implementierung des <tt class="docutils literal"><span class="pre">CompositeProvider</span></tt></td>
</tr>
<tr class="row-odd"><td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center"><em>...</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Weitere Subklassen von <tt class="docutils literal"><span class="pre">Provider</span></tt></td>
</tr>
<tr class="row-even"><td class="align-center">&nbsp;</td>
<td class="align-center"><em>rake.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Implementierung des RAKE-Algorightmus</td>
</tr>
<tr class="row-odd"><td class="align-center">&nbsp;</td>
<td class="align-center"><strong>scripts/</strong></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Unterverzeichnis für ,,Test Scripts''</td>
</tr>
<tr class="row-even"><td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center"><em>visualizer.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Zeichnet ein mood-file mittels <tt class="docutils literal"><span class="pre">cairo</span></tt></td>
</tr>
<tr class="row-odd"><td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center"><em>walk.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Berechnet vieles mood-files parallel</td>
</tr>
<tr class="row-even"><td class="align-center">&nbsp;</td>
<td class="align-center"><em>song.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Implementierung von <tt class="docutils literal"><span class="pre">Song</span></tt></td>
</tr>
<tr class="row-odd"><td class="align-center">&nbsp;</td>
<td class="align-center"><strong>stopwords/</strong></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Stoppwortimplementierung:</td>
</tr>
<tr class="row-even"><td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center"><em>__init__.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Implementierung des StopwordsLoader</td>
</tr>
<tr class="row-odd"><td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center"><strong>data/</strong></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Unterverzeichnis für die Stoppwortlisten</td>
</tr>
<tr class="row-even"><td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center"><em>de</em></td>
<td class="align-center">Gemäß ISO 638-1 benannte Dateien;</td>
</tr>
<tr class="row-odd"><td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center"><em>en</em></td>
<td class="align-center">Pro Zeile ist ein Stoppwort gelistet;</td>
</tr>
<tr class="row-even"><td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center"><em>es</em></td>
<td class="align-center">Insgesamt 17 verschiedene Listen.</td>
</tr>
<tr class="row-odd"><td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center"><em>...</em></td>
<td class="align-center">&nbsp;</td>
</tr>
<tr class="row-even"><td class="align-center">&nbsp;</td>
<td class="align-center"><em>testing.py</em></td>
<td class="align-center">&nbsp;</td>
<td class="align-center">&nbsp;</td>
<td class="align-center">Fixtures und Helper für unittests</td>
</tr>
</tbody>
</table>
<p class="caption">Verzeichnisbaum mit den einzelnen Modulen von libmunin's
Implementierung</p>
</center></div></div>
<div class="section" id="trivia">
<h3>4.6 Trivia<a class="headerlink" href="#trivia" title="Permalink to this headline">¶</a></h3>
<div class="section" id="entwicklungsumgebung">
<h4>4.6.1 Entwicklungsumgebung<a class="headerlink" href="#entwicklungsumgebung" title="Permalink to this headline">¶</a></h4>
<p>Als Programmiersprache wurde <em>Python</em> aus folgenden Gründen ausgewählt:</p>
<ul class="simple">
<li>Exzellenter Support für <em>Rapid Prototyping</em> - eine wichtige Eigenschaft bei
nur knapp 3 Monaten Implementierungszeit.</li>
<li>Große Zahl an nützlichen Bibliotheken, besonders für den wissenschaftlichen
Einsatz.</li>
<li>Bei Performanceproblemen ist eine Auslagerung von Code nach
<span class="math">\(\mathrm{C/C{\scriptstyle\overset{\!++}{\vphantom{\_}}}}\)</span> mittels <em>Cython</em> sehr
einfach möglich.</li>
<li>Der Autor hat gute Kenntnisse in Python.</li>
</ul>
<p>Alle Quellen die während dieses Projektes entstanden sind, finden sich auf der
sozialen Code-Hosting Plattform <em>GitHub</em> <a class="reference internal" href="rst/index.html#y41" id="id18">[Link-19]</a> - zur Versionierung wird
dann entsprechend das <em>Distributed Version Control System</em> <tt class="docutils literal"><span class="pre">git</span></tt> genutzt.</p>
<p>Der Vorteil dieser Plattform besteht darin, dass sie von sehr vielen Entwicklern
besucht wird, die die Software ausprobieren und möglicherweise verbessern oder
zumindest die Seite für spätere Projekte merken.</p>
<p>Die dazugehörige Dokumentation wird bei jedem <em>Commit</em> automatisch aus den
Quellen, mittels des freien Dokumentations-Generators Sphinx, auf der
Dokumentations-Hosting Plattform <em>ReadTheDocs</em> gebaut und dort verfügbar
gemacht <a class="reference internal" href="rst/index.html#lx" id="id19">[Link-16]</a>.</p>
<p>Zudem werden pro Commit Unittests auf der Continious-Integration Plattform
<em>TravisCI</em> <a class="reference internal" href="rst/index.html#jiu" id="id20">[Link-20]</a> für verschiedene Python-Versionen durchgeführt. Dies hat
den Vorteil, dass fehlerhafte Versionen aufgedeckt werden, selbst wenn man
vergessen hat die unittests lokal durchzuführen.</p>
<p>Schlägt der <em>Build</em> fehl so färben sich kleine Buttons in den oben genannten
Diensten rot und man wird per Mail benachrichtigt. (Siehe )</p>
<div class="figure align-center" id="fig-travis-badge">
<img alt="Screenshot der Statusbuttons auf der Github-Seite." src="../../_images/travis_badge.png" />
<p class="caption">Screenshot der Statusbuttons auf der Github-Seite.</p>
</div>
<p>Versionen die als stabil eingestuft werden, werden auf <em>PyPi (Python Package Index)</em>
veröffentlicht <a class="reference internal" href="rst/index.html#o6q" id="id21">[Link-21]</a>, wo sie mithilfe des folgenden Befehles samt
Python-Abhängigkeiten installiert werden können (Setzt Python <span class="math">\(\ge 3.2\)</span>
vorraus):</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo pip install libmunin
</pre></div>
</div>
<p>Auf lokaler Seite wird jede Änderungen versioniert, um die Fehlersuche zu
vereinfachen - im Notfall kann man stets auf funktionierende Versionen
zurückgehen.</p>
<p>Der Quelltext selber wird in <em>gVim</em> geschrieben - dass sich der Python-Quelltext
dabei an die gängigen Konventionen hält wird durch die Zusatzprogramme <em>PEP8</em>
und <em>flake8</em> überprüft.</p>
<p>Auch dieses Dokument wurde mit dem 
        <style type="text/css">
            .tex sub, .latex sub, .latex sup {
                text-transform: uppercase;
            }

            .tex sub, .latex sub {
                vertical-align: -0.5ex;
                margin-left: -0.1667em;
                margin-right: -0.125em;
            }

            .tex, .latex, .tex sub, .latex sub {
                font-size: 1em;
            }

            .latex sup {
                font-size: 0.85em;
                vertical-align: 0.15em;
                margin-left: -0.36em;
                margin-right: -0.15em;
            }
        </style>
        <span class="latex">L<sup>a</sup>T<sub>e</sub>X</span>
    -Backend einer
modifizierten Sphinxversion erstellt. Der Vorteil ist dabei, dass die Arbeit in
<em>reStructuredText</em> geschrieben werden kann und einerseits als PDF und als HTML
Variante <a class="reference internal" href="rst/index.html#md" id="id22">[Link-22]</a> erstellt wird - letztere ist sogar für mobile Endgeräte
ausgelegt.</p>
</div>
<div class="section" id="unittests">
<h4>4.6.2 Unittests<a class="headerlink" href="#unittests" title="Permalink to this headline">¶</a></h4>
<p>Die meisten Module sind mit <tt class="docutils literal"><span class="pre">unittests</span></tt> ausgestattet, die sich, für Python
typisch, am Ende von jeder <tt class="docutils literal"><span class="pre">.py</span></tt>-Datei befinden:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Implementierung:</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">42</span>

<span class="c"># Tests werden nur ausgeführt wenn das script direkt ausgeführt wird.</span>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">unittest</span>

    <span class="c"># Ein Unittest:</span>
    <span class="k">class</span> <span class="nc">TestFunc</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">test_func</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">func</span><span class="p">(),</span> <span class="mi">42</span><span class="p">)</span>

    <span class="c"># Führe tests aus:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>Auf einer detaillierten Erklärung der im einzelnen getesteten Funktionalitäten
wird verzichtet-  diese würden den Rahmen der Projektarbeit ohne erkenntlichen
Mehrwert sprengen.</p>
</div>
<div class="section" id="lines-of-code-loc">
<h4>4.6.3 Lines of Code (<em>LoC</em>)<a class="headerlink" href="#lines-of-code-loc" title="Permalink to this headline">¶</a></h4>
<p>Was die <em>Lines of Code</em> betrifft so verteilen sich insgesamt 4867 Zeilen
Quelltext auf 46 einzelne Dateien. Die im nächsten Kapitel vorgestellte
Demo-Anwendung ist dabei mit eingerechnet. Dazu gesellen sich 2169 Zeilen
Kommentare, die zum größten Teil zur Generation der Online-Dokumentation
genutzt werden.</p>
<p>Dazu kommen einige weitere Zeilen von <em>reStructuredText</em> (einer einfachen
Markup-Sprache) die das Gerüst der Onlinedokumentation bilden:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>wc -l <span class="k">$(</span>find . -iname <span class="s1">&#39;*.rst&#39;</span><span class="k">)</span>
2231 insgesamt
</pre></div>
</div>
<p>Die Onlinedokumentation wird aus den Kommentaren im Quelltext
extrahiert - das entspricht dem vom <em>Donald Knuth</em> vorgeschlagenem
Ansatz des <em>Literate Programming</em>.</p>
</div>
<div class="section" id="sonstige-statistiken">
<h4>4.6.4 Sonstige Statistiken<a class="headerlink" href="#sonstige-statistiken" title="Permalink to this headline">¶</a></h4>
<p>Zudem lassen sich einige Statistiken präsentieren die automatisch aus den
<tt class="docutils literal"><span class="pre">git</span> <span class="pre">log</span></tt> entstanden sind:</p>
<div class="section" id="github-visualisierungen">
<h5>4.6.4.1 GitHub Visualisierungen<a class="headerlink" href="#github-visualisierungen" title="Permalink to this headline">¶</a></h5>
<p><em>GitHub</em> stellt einige optisch ansprechende und interaktive Statistiken bereit
die beispielsweise viel über den eigenen Arbeitszyklus verraten:</p>
<blockquote>
<div><a class="reference internal" href="rst/index.html#ibl" id="id23">[Link-23]</a></div></blockquote>
</div>
<div class="section" id="gitstats-visualisierungen">
<h5>4.6.4.2 gitstats Visualisierungen<a class="headerlink" href="#gitstats-visualisierungen" title="Permalink to this headline">¶</a></h5>
<p>Das kleine Programm <tt class="docutils literal"><span class="pre">gitstats</span></tt> baut aus dem <tt class="docutils literal"><span class="pre">git</span> <span class="pre">log</span></tt> eine HTML-Seite mit
einigen interessanten Statistiken - wie beispielsweise der absoluten Anzahl von
geschriebenen (und wieder gelöschten) Zeilen:</p>
<blockquote>
<div><a class="reference internal" href="rst/index.html#md" id="id24">[Link-22]</a></div></blockquote>
</div>
<div class="section" id="gource-commit-graph-visualisierungsvideo">
<h5>4.6.4.3 gource Commit-Graph Visualisierungsvideo<a class="headerlink" href="#gource-commit-graph-visualisierungsvideo" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">gource</span></tt> ist ein Programm das in einem optisch ansprechenden Video zeigt wie
sich das <tt class="docutils literal"><span class="pre">git</span></tt>-Repository mit der Zeit aufbaut. Unter <a class="reference internal" href="rst/index.html#mc" id="id25">[Link-24]</a> findet sich
ein ein-minütiges Video dass entsprechend die Entwicklung von <em>libmunin</em> zeigt.</p>
</div>
</div>
</div>
</div>
<span id="document-rst/V/index"></span><div class="section" id="demonstrationsanwendung">
<h2>5 Demonstrationsanwendung<a class="headerlink" href="#demonstrationsanwendung" title="Permalink to this headline">¶</a></h2>
<blockquote class="epigraph">
<div><p><em>,,These plus Antithese gleich Hysterese''</em></p>
<p class="attribution">&mdash;<em>Einfach Göttlich, Terry Pratchett</em></p>
</div></blockquote>
<div class="section" id="intro">
<h3>5.1 Intro<a class="headerlink" href="#intro" title="Permalink to this headline">¶</a></h3>
<p>Abseits der Bibliothek wurde eine, auf dem freien
Oberflächen-Framework <span class="math">\(\text{GTK+-}3.0\)</span> basierende, GUI-Anwendung entwickelt.
Entsprechend <a class="reference internal" href="rst/index.html#anf-demo">2.5.8</a> dient diese nicht nur zum <em>Showoff</em>, sondern auch
zur gezielten Fehlersuche.</p>
<p>Die Anwendung, die den ebenfalls nordischen Namen <em>Naglfar</em> erhielt, stellt
einen MPD-Client bereit. Im Hintergrund werkelt dabei <em>Moosecat</em>.</p>
<p>Vor der ersten Benutzung muss gemäß  eine Session aufgebaut
werden - dies erledigt das Skript <tt class="docutils literal"><span class="pre">coldstart.py</span></tt> (siehe
<a class="reference internal" href="rst/index.html#coldstart-example"><em>coldstart.py</em></a> im <em>Angang C</em>) - dies kann durch das Ziehen der
Songtexte und der Audioanalyse beim ersten Lauf sehr lange dauern - bis zu 2
Stunden. Danach sind allerdings die Songtext zwischengelagert und der zweite
Lauf dauert dann nur noch wenige Minuten.</p>
<p>Nach dem <tt class="docutils literal"><span class="pre">coldstart.py</span></tt> die <em>Session</em> auf die Platte geschrieben hat, kann die
eigentliche Anwendung gestartet werden. Diese verbindet sich zuallererst mit
einem MPD-Server der auf <em>localhost</em> unter Port <em>6601</em> lauscht und besorgt sich
dort alle Metadaten um die <em>Playlist</em> und <em>Database</em>-Ansicht zu befüllen. Danach
wird besagte <em>Session</em> geladen. Nach der Initialisierung der <em>GUI</em> ist die
Anwendung nun bereit benutzt zu werden.</p>
<p>Damit zwischen den von <em>libmunin</em> herausgegebenen Empfehlungen und den internen
Songs unterschieden werden kann, speichert <tt class="docutils literal"><span class="pre">coldstart.py</span></tt> ein Mapping ab
zwischen den <em>ID</em> von <em>libmunin's</em> Songs zu den Dateipfaden innerhalb der
Musikdatenbank.</p>
</div>
<div class="section" id="anwendungsubersicht">
<h3>5.2 Anwendungsübersicht<a class="headerlink" href="#anwendungsubersicht" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center" id="fig-demo-overview">
<a class="reference internal image-reference" href="../../_images/demo_overview.svg"><img alt="Übersicht über die Demoanwendung" src="../../_images/demo_overview.svg" width="100%" /></a>
<p class="caption">Übersicht über die Demonanwendung.</p>
</div>
<p>In  wird eine Übersicht über die GUI der Anwendung
gegeben. Detailliertere Ansichten werden am Ende des Kapitels gezeigt.</p>
<p>Im Folgenden wird nun eine Übersicht über die <em>Features</em> der Anwendung gegeben.</p>
<div class="section" id="ansichten">
<h4>5.2.1 (1) Ansichten<a class="headerlink" href="#ansichten" title="Permalink to this headline">¶</a></h4>
<div class="section" id="database">
<h5>5.2.1.1 Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h5>
<p>Siehe Abbildung .</p>
<p>Anzeige der gesamten Musikdatenbank durch die Spalten <tt class="docutils literal"><span class="pre">Artist</span></tt>, <tt class="docutils literal"><span class="pre">Album</span></tt>,
<tt class="docutils literal"><span class="pre">Titel</span></tt>, <tt class="docutils literal"><span class="pre">Datum</span></tt> und <tt class="docutils literal"><span class="pre">Genre</span></tt>. Jede Zeile entspricht dabei einem Song.</p>
<p>Ein Rechtsklickmenü auf einen beliebigen Song fördert ein Kontextmenü zu Tage
(siehe Abbildung ), dass mehrere Möglichkeiten
bietet um die Playlist mit Empfehlungen zu befüllen (entsprechend
<a class="reference internal" href="rst/index.html#list-of-recom-strategies">4.3</a>).  Im folgenden ist <span class="math">\(\lambda\)</span> die Anzahl
der gewünschten Empfehlungen, die im Empfehlungszähler (siehe
<a class="reference internal" href="rst/index.html#empfehlungs-zaehler">5.2.5</a>) eingestellt ist.</p>
<div class="section" id="ausgewahlter-song-als-seedsong">
<h6>5.2.1.1.1 Ausgewählter Song als <a class="reference internal" href="rst/index.html#term-seedsong"><em class="xref std std-term">Seedsong</em></a>:<a class="headerlink" href="#ausgewahlter-song-als-seedsong" title="Permalink to this headline">¶</a></h6>
<p>Erstellt <span class="math">\(\lambda\)</span> Empfehlungen basierend auf dem selektierten Song
und reiht sie in die Playlist ein.</p>
</div>
<div class="section" id="playlist-saubern-und-ausgewahlter-song-als-seedsong">
<h6>5.2.1.1.2 Playlist säubern und ausgewählter Song als <a class="reference internal" href="rst/index.html#term-seedsong"><em class="xref std std-term">Seedsong</em></a>:<a class="headerlink" href="#playlist-saubern-und-ausgewahlter-song-als-seedsong" title="Permalink to this headline">¶</a></h6>
<p>Wie oben, leert aber vor dem Einreihen die Playlist.</p>
</div>
<div class="section" id="suche-einen-seedsong-mit-einem-bestimmten-attribut">
<span id="attribute-search"></span><h6>5.2.1.1.3 Suche einen <a class="reference internal" href="rst/index.html#term-seedsong"><em class="xref std std-term">Seedsong</em></a> mit einem bestimmten Attribut:<a class="headerlink" href="#suche-einen-seedsong-mit-einem-bestimmten-attribut" title="Permalink to this headline">¶</a></h6>
<p>Sucht einen <a class="reference internal" href="rst/index.html#term-seedsong"><em class="xref std std-term">Seedsong</em></a> nach bestimmten Kriterien, die der Nutzer im
Eingabefeld oben rechts angeben kann. Dort kann ein <em>Suchbegriff</em> in der
folgenden Form angegeben werden:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;attribut&gt;: &lt;wert&gt;[, &lt;attribut&gt;: &lt;value&gt;, ...]
</pre></div>
</div>
<p>Folgendes Beispiel findet alle Songs mit dem Artist <em>,,Billy Talent''</em> <strong>und</strong>
dem Genre <em>,,Rock''</em></p>
<div class="highlight-python"><div class="highlight"><pre>genre: rock, artist: Billy Talent
</pre></div>
</div>
<p>Werden mehrere Suchergebnisse gefunden so werden alle als Seedsongs genutzt um
in die Playlist <span class="math">\(\lambda\)</span> neue Songs einzureihen.</p>
<p>Diese Funktionalität ist momentan relativ eingeschränkt da nur exakte Treffer
funktioneren. Ist das <em>Genre</em> also als <em>,,rock / pop''</em> getaggt, so wird die
Sucher erfolglos verlaufen.</p>
</div>
<div class="section" id="lasse-libmunin-einen-seedsong-auswahlen">
<h6>5.2.1.1.4 Lasse <em>libmunin</em> einen <a class="reference internal" href="rst/index.html#term-seedsong"><em class="xref std std-term">Seedsong</em></a> auswählen:<a class="headerlink" href="#lasse-libmunin-einen-seedsong-auswahlen" title="Permalink to this headline">¶</a></h6>
<p><em>libmunin</em> wählt automatisch einen <a class="reference internal" href="rst/index.html#term-seedsong"><em class="xref std std-term">Seedsong</em></a> nach folgenden Kriterien:</p>
<ul class="simple">
<li>Nutze die Seedsongs, die in der am besten bewertesten Regel vorkommen.</li>
<li>Falls keine Regel vorhanden, nutze den meist abgespielten <a class="reference internal" href="rst/index.html#term-song"><em class="xref std std-term">Song</em></a> als
<a class="reference internal" href="rst/index.html#term-seedsong"><em class="xref std std-term">Seedsong</em></a>.</li>
<li>Schlägt auch das fehl wird ein zufälliger <a class="reference internal" href="rst/index.html#term-song"><em class="xref std std-term">Song</em></a> ausgewählt.</li>
</ul>
<p>In allen Fällen werden dann <span class="math">\(\lambda\)</span> Empfehlungen in die Playlist
eingereiht.</p>
</div>
<div class="section" id="erstelle-eine-komplett-zufallige-playlist">
<h6>5.2.1.1.5 Erstelle eine komplett zufällige Playlist:<a class="headerlink" href="#erstelle-eine-komplett-zufallige-playlist" title="Permalink to this headline">¶</a></h6>
<p>Reiht <span class="math">\(\lambda\)</span> neue, komplett zufällig aus der Datenbank gewählte, Songs in
die Playlist ein.</p>
<p>Nützlich um die komplett zufällige Playlist mit einer von <em>libmunin</em> erstellten
Playlist zu vergleichen. Der Seed für die <tt class="docutils literal"><span class="pre">random()</span></tt>-Funktion ist dabei immer
gleich, daher erstellt dies nach einem Neustart stets dieselbe Liste.</p>
<div class="figure align-center" id="fig-demo-context-menu">
<a class="reference internal image-reference" href="../../_images/demo_context_menu.png"><img alt="Das Kontextmenu in der Playlist und Database Ansicht" src="../../_images/demo_context_menu.png" style="width: 30%;" /></a>
<p class="caption">Die Einträge des Kontextmenüs in der Playlist und Database Ansicht</p>
</div>
</div>
</div>
<div class="section" id="playlist">
<span id="playlist-view"></span><h5>5.2.1.2 Playlist<a class="headerlink" href="#playlist" title="Permalink to this headline">¶</a></h5>
<p>Siehe Abbildung .</p>
<p>Wie die <em>Database-Ansicht</em>, zeigt aber lediglich die Songs an die empfohlen
wurden. Sonst ist diese Ansicht funktionsidentisch mit der <em>Database-Ansicht</em>.</p>
</div>
<div class="section" id="graph">
<h5>5.2.1.3 Graph<a class="headerlink" href="#graph" title="Permalink to this headline">¶</a></h5>
<p>Siehe Abbildung .</p>
<p>Im <em>Graphen-Ansicht</em> kann ein Plot von <em>libmunin's</em> Graphen begutachtet
werden. Dies ist oft nützlich um nachvollziehen welche Empfehlungen warum
gegeben wurden.</p>
</div>
<div class="section" id="rules">
<h5>5.2.1.4 Rules<a class="headerlink" href="#rules" title="Permalink to this headline">¶</a></h5>
<p>Siehe Abbildung .</p>
<p>In einer Liste werden alle bekannten <a class="reference internal" href="rst/index.html#term-assoziationsregel"><em class="xref std std-term">Assoziationsregel</em></a>
angezeigt. Dabei wird neben beiden Seiten der Regel auch der Supportcount
und das Rating der Regel angezeigt.</p>
</div>
<div class="section" id="examine">
<h5>5.2.1.5 Examine<a class="headerlink" href="#examine" title="Permalink to this headline">¶</a></h5>
<p>Siehe Abbildung .</p>
<p>Hier werden alle Attribute des momentan spielenden Songs angezeigt.
Es wird die von <em>libmunin</em> normalisierte Form angezeigt, also auch, falls
verfügbar, der Originalwert.</p>
<p>Zudem wird die <tt class="docutils literal"><span class="pre">moodbar</span></tt> (falls vorhanden) oben im Fenster geplottet.</p>
</div>
<div class="section" id="history">
<h5>5.2.1.6 History<a class="headerlink" href="#history" title="Permalink to this headline">¶</a></h5>
<p>Siehe Abbildung .</p>
<p>Neben einer chronologischen Auflistung aller Songs die in letzter Zeit
gehört wurden (Begrenzung auf 1000 Stück) werden hier auch die zuletzt
ausgestellten Empfehlungen (Begrenzung auf 10 Stück) angezeigt.</p>
<p>Letzteres ist für das Debugging der Filterfunktion nützlich.</p>
</div>
</div>
<div class="section" id="seedsong">
<h4>5.2.2 (2) Seedsong<a class="headerlink" href="#seedsong" title="Permalink to this headline">¶</a></h4>
<p>Zeigt mit einem roten Kreis den zuletzt ausgewählten <a class="reference internal" href="rst/index.html#term-seedsong"><em class="xref std std-term">Seedsong</em></a> an.
Falls es mehrere Seedsongs gab, wird nur der erste markiert.</p>
</div>
<div class="section" id="current-song">
<h4>5.2.3 (3) Current Song<a class="headerlink" href="#current-song" title="Permalink to this headline">¶</a></h4>
<p>Ein dreieckiges Icon das den aktuell spielenden (oder pausierten) Song anzeigt.</p>
</div>
<div class="section" id="id1">
<h4>5.2.4 (4) Playlist<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>Die Playlistview. Siehe <a class="reference internal" href="rst/index.html#playlist-view">5.2.1.2</a>.</p>
</div>
<div class="section" id="empfehlungszahler">
<span id="empfehlungs-zaehler"></span><h4>5.2.5 (5) Empfehlungszähler<a class="headerlink" href="#empfehlungszahler" title="Permalink to this headline">¶</a></h4>
<p>Die Anzahl an Empfehlungen die ein Klick im Kontextmenü liefert.</p>
</div>
<div class="section" id="filter">
<h4>5.2.6 (6) Filter<a class="headerlink" href="#filter" title="Permalink to this headline">¶</a></h4>
<p>Togglebutton (,,durchgestrichenes <em>a</em>'' als Icon) der anzeigt ob der Filtermodus
aktiviert ist.  Ist er aktiv so darf sich in einer dynamisch erstellten Playlist
der Artist nur alle 3 Stücke wiederholen, der selbe Artist <em>und</em> das selbe Album
nur alle 5 Stücke.</p>
</div>
<div class="section" id="mininmaler-horanteil">
<h4>5.2.7 (7) Mininmaler Höranteil<a class="headerlink" href="#mininmaler-horanteil" title="Permalink to this headline">¶</a></h4>
<p>Ein Klick auf den Button fördert einen Slider zu Tage auf dem man eine
Prozentzahl einstellt. Diese legt fest welcher Anteil eines Liedes (in Prozent)
<em>mindestens</em> angehört werden muss damit er zur Historie hinzugefügt wird.</p>
<p>Um diese Funktionalität zu realisieren musste <em>Moosecat</em> um diese Funktionalität
erweitert werden.</p>
</div>
<div class="section" id="attributsuche">
<h4>5.2.8 (8) Attributsuche<a class="headerlink" href="#attributsuche" title="Permalink to this headline">¶</a></h4>
<p>Eingabe einer Folge von Attribut-Werte Paaren die ein <a class="reference internal" href="rst/index.html#term-seedsong"><em class="xref std std-term">Seedsong</em></a>
bei der Attributsuche (<a class="reference internal" href="rst/index.html#attribute-search">5.2.1.1.3</a>) haben sollte.</p>
</div>
<div class="section" id="rating">
<h4>5.2.9 (9) Rating<a class="headerlink" href="#rating" title="Permalink to this headline">¶</a></h4>
<p>Spezielles Widget auf den man das <em>Rating</em> des aktuell spielenden Songs zu
setzen. Beim erstellen der <em>Session</em> durch <tt class="docutils literal"><span class="pre">analyse.py</span></tt> wird ein <em>Rating</em> von
<span class="math">\(0\)</span> angenommen - also <em>ungesetzt</em>.</p>
<p>Zum Setzen klickt man einfach ins Feld, die Seite links vom Cursor wird dann
eingefärbt.  Es ist möglich etwas links vom ersten Stern zu klicken um das
Rating auf ,,0'' (und damit <em>ungesetzt</em>) zurückzusetzen.</p>
<p>Ein Ändern des Ratings hat ein Neuzeichnen des Graphen in der Graphen-Ansicht
zufolge.</p>
</div>
<div class="section" id="playcount">
<h4>5.2.10 (10) Playcount<a class="headerlink" href="#playcount" title="Permalink to this headline">¶</a></h4>
<p>Zeigt an wie oft ein Lied bereits gehört wurde. Ein Lied gilt als nicht gehört
wenn prozentuell nur ein kleiner Teil als der gesetzte minimale Höranteil
angehört wurde.</p>
<p>Zur optischen Vorhebung ist es mit einer Fortschrittsanzeige hinterlegt - sobald
man 100x mal ein Lied hört, zeigt diese vollen Füllstand an.</p>
</div>
<div class="section" id="volumebar">
<h4>5.2.11 (11) Volumebar<a class="headerlink" href="#volumebar" title="Permalink to this headline">¶</a></h4>
<p>Regler für die Lautstärke.</p>
</div>
<div class="section" id="title-label">
<h4>5.2.12 (12) Title Label<a class="headerlink" href="#title-label" title="Permalink to this headline">¶</a></h4>
<p>Zeit das aktuell spielende Lied mit Titel, Album und Artist an.</p>
</div>
<div class="section" id="modebuttons">
<h4>5.2.13 (13) Modebuttons<a class="headerlink" href="#modebuttons" title="Permalink to this headline">¶</a></h4>
<p>Umschalten zwischen <em>Random</em> (nächstes Lied ist zufällig), <em>Single</em> (höre nach
diesem Lied auf zu spielen), <em>Repeat</em> (spring zum Anfang der Playlist nach dem
letzten Lied) und <em>Consume</em> (Lösche das Lied aus der Playlist nach dem
Abspielen).</p>
</div>
<div class="section" id="seekbar">
<h4>5.2.14 (14) Seekbar<a class="headerlink" href="#seekbar" title="Permalink to this headline">¶</a></h4>
<p>Ermöglicht das wahlfreie Hin- und Herspringen innerhalb des aktuellen Liedes.
Übersprunge Parts eines Liedes fließen nicht die <em>Höranteil</em> ein,
doppelt gehörte Parts schon - daher sind Werte <span class="math">\(\ge 100\%\)</span> möglich.</p>
</div>
<div class="section" id="playbuttons">
<h4>5.2.15 (15) Playbuttons<a class="headerlink" href="#playbuttons" title="Permalink to this headline">¶</a></h4>
<p>Die ,,üblichen'' Kontrollen eines Musicplayers zum <em>Pausieren/Abspielen</em> (an
momentaner Stelle anhalten/weiterspielen), <em>Stoppen</em> (Anhalt und zum Anfang der
Playlist springen), <em>Nächstes</em> und <em>Vorheriges</em> Lied .</p>
</div>
<div class="section" id="suche">
<h4>5.2.16 (16) Suche<a class="headerlink" href="#suche" title="Permalink to this headline">¶</a></h4>
<p>Erlaubt das Filtern der Playlist oder Datenbank.</p>
<p>Suchbegriffe können einfacher Natur wie <em>,,beat''</em> (Findet alles das <em>,,beat''</em>
im Artist, Album oder Titel beeinhaltet) bis hin zu sehr komplizierten
Suchbegriffen wie <em>,,(genre:rock + y:2001..2003) | artist:Beat</em>'' (Findet
alles das <em>,,rock''</em> im Genre hat und in den Jahren <em>2001</em> bis einschließlich
<em>2003</em> released wurde, oder dessen Artist ein Wort enthält, dass mit ,,Beat''
beginnt).</p>
<p><em>Anmerkung:</em> Die ,,Such-Engine'' dahinter ist in <em>Moosecat</em> implementiert.</p>
<p>Die Suche kann mit <tt class="kbd docutils literal"><span class="pre">Strg-f</span></tt> oder <tt class="kbd docutils literal"><span class="pre">/</span></tt> <em>(Slash)</em> aktiviert und mit
<tt class="kbd docutils literal"><span class="pre">Esc</span></tt> wieder versteckt werden.</p>
<div class="figure align-center" id="fig-demo-database">
<a class="reference internal image-reference" href="../../_images/demo_database.png"><img alt="Die Datenbank Ansicht" src="../../_images/demo_database.png" style="width: 100%;" /></a>
<p class="caption">Die Datenbank Ansicht - Anzeige aller Songs.</p>
</div>
<div class="figure align-center" id="fig-demo-playlist">
<a class="reference internal image-reference" href="../../_images/demo_playlist.png"><img alt="Die aktuelle Playlist" src="../../_images/demo_playlist.png" style="width: 100%;" /></a>
<p class="caption">Die aktuelle Playlist, bestehend aus den Empfehlungen.</p>
</div>
<div class="figure align-center" id="fig-demo-rules">
<a class="reference internal image-reference" href="../../_images/demo_rules.png"><img alt="Die Regelansicht" src="../../_images/demo_rules.png" style="width: 100%;" /></a>
<p class="caption">Die momentan bekannten Regeln</p>
</div>
<div class="figure align-center" id="fig-demo-graph">
<a class="reference internal image-reference" href="../../_images/demo_graph.png"><img alt="Die Graphenansicht" src="../../_images/demo_graph.png" style="width: 100%;" /></a>
<p class="caption">Der Graph der hinter den Empfehlungen steckt wird hier geplottet.</p>
</div>
<div class="figure align-center" id="fig-demo-history">
<a class="reference internal image-reference" href="../../_images/demo_history.png"><img alt="Die Ansicht der History" src="../../_images/demo_history.png" style="width: 100%;" /></a>
<p class="caption">History-Ansicht, die zuletzt gehörten und empfohlenen Songs.</p>
</div>
<div class="figure align-center" id="fig-demo-examine">
<a class="reference internal image-reference" href="../../_images/demo_examine.png"><img alt="Die Ansicht der Examine-Page" src="../../_images/demo_examine.png" style="width: 100%;" /></a>
<p class="caption">Die ,,Examine'' Page - Die Attribute des aktuellen Songs werden angezeigt.</p>
</div>
</div>
</div>
</div>
<span id="document-rst/VI/index"></span><div class="section" id="zusammenfassung">
<h2>6 Zusammenfassung<a class="headerlink" href="#zusammenfassung" title="Permalink to this headline">¶</a></h2>
<blockquote class="epigraph">
<div><p><em>,,Human beings, who are almost unique in having the ability to learn from the
experience of others, are also remarkable for their apparent disinclination
to do so.''</em></p>
<p class="attribution">&mdash;<em>Douglas Adams, ,,Last Chance to See''</em></p>
</div></blockquote>
<div class="section" id="was-wurde-erreicht">
<h3>6.1 Was wurde erreicht?<a class="headerlink" href="#was-wurde-erreicht" title="Permalink to this headline">¶</a></h3>
<p>Es wurde eine Softwarebibliothek in Python implementiert, die ein
Musikempfehlungssystem auf Graphen-Basis mit einer flexiblen Schnittstelle
bietet. Das System lernt dabei vom Nutzer mittels expliziten (Vergeben von
Ratings) und impliziten (Beobachtung des Endnutzers und Ableitung von
Assoziationsregeln) Methoden.</p>
<p>Es wurde eine große Anzahl von sogenannten <em>Providern</em> zum Normalisieren der
Eingabedaten, sowie eine entsprechend hohe Anzahl von <em>Distanzfunktionen</em>
implementiert welche diese Daten vergleichen können.
Im Vergleich zu bestehenden Systemen ist man nicht von Audiodaten abhängig.
Durch die freie Lizenz ist ein weitläufiger Einsatz möglich.</p>
</div>
<div class="section" id="was-hatte-das-mit-data-mining-zu-tun">
<h3>6.2 Was hatte das mit Data-Mining zu tun?<a class="headerlink" href="#was-hatte-das-mit-data-mining-zu-tun" title="Permalink to this headline">¶</a></h3>
<p><em>Data-Mining</em> meint landläufig das automatisierte <em>Abbauen</em> von unerwarteten
Wissen aus einem großen <em>Datenberg</em>. So gesehen ist <em>libmunin</em> die <em>Spitzhacke</em>
für <em>Musikdatenbanken</em>.</p>
<p>Insgesamt wurden hauptsächlich folgende Techniken aus diesem Gebiet genutzt:</p>
<ul class="simple">
<li><em>Warenkorbanalyse</em> um <em>Assoziationsregeln</em> abzuleiten.</li>
<li>Verschiedene <em>Distanzfunktionen</em> und <em>Fusionierungsverfahren</em>.</li>
<li><em>Spracherkennung</em> und <em>Keyword-Extrahierung</em>.</li>
<li>Verschiedenste <em>Normalisierung</em> von Eingabedaten.</li>
</ul>
</div>
<div class="section" id="welche-anforderungen-wurden-nicht-oder-unvollstandig-erfullt">
<h3>6.3 Welche Anforderungen wurden nicht oder unvollständig erfüllt?<a class="headerlink" href="#welche-anforderungen-wurden-nicht-oder-unvollstandig-erfullt" title="Permalink to this headline">¶</a></h3>
<div class="section" id="unabhangigkeit-von-der-programmiersprache">
<h4>6.3.1 Unabhängigkeit von der Programmiersprache<a class="headerlink" href="#unabhangigkeit-von-der-programmiersprache" title="Permalink to this headline">¶</a></h4>
<p>Momentan ist <em>libmunin</em> nur von <em>Python</em> aus zu benutzen. Dies ist zum Teil dem
Format geschuldet in dem die internen Daten abgespeichert werden: Dem
Python-spezifischen <tt class="docutils literal"><span class="pre">pickle</span></tt> Format, welches beliebige Python-Objekte
serialisieren kann, macht es natürlich schwierig Software zu schreiben die
eine serialisierte <em>Session</em> einlesen kann ohne dabei auf <em>libmunin</em> oder
<em>Python</em> zurückzugreifen.</p>
<p>Davon unabhängig ist <em>libmunin</em> momentan durch die Implementierung in Python auf
diese Sprache eingeschränkt. Für solche Probleme gibt es zwei populäre
Lösungsansätze. Der erste ist das Schreiben von <em>Languagebindings</em> für die
Zielsprache - das würde erheblichen Aufwand involvieren wenn mehr als einige
wenige Sprachen unterstützt werden sollen. Die zweite Möglichkeit ist eine
Aufteilung in <em>Server</em> (der dann in Python geschrieben wäre) und <em>Client</em> (der
in einer beliebigen Programmiersprache geschrieben ist).
Der <em>Client</em> könnte dann über ein definiertes Protokoll auf die Funktionen des
Servers zurückgreifen - das ist beispielsweise die Herangehensweise von MPD.</p>
<p>Ein konkrete Umsetzung dieser Idee könnte relativ einfach mit <em>D-Bus</em> <a class="footnote-reference" href="#f1" id="id1"><sup>1</sup></a>
erreicht werden. Der Server würde dabei die API von <em>libmunin</em> als
<em>D-Bus Service</em> implementieren. Der Client könnte eine der in zahlreichen
Programmiersprachen verfügbaren <em>DBus-Libraries</em> nutzen, um im Server Methoden
aufzurufen. Darüber ließe sich auch ein anderes Randproblem lösen: Falls mehrere
Programme die gleiche Session nutzen wollen - momentan ist das aus Gründen der
Nebenläufigkeit noch nicht möglich.</p>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Ein unter Unix sehr weit verbreitetes IPC-Framework und Messagebroker,
bei dem Services in einem <em>Bus</em> bereitgestellt werden. Clients können
dann, ähnlich wie bei RPC, Methoden auf den Services aufrufen.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="einfaches-information-retrieval">
<h4>6.3.2 Einfaches Information Retrieval<a class="headerlink" href="#einfaches-information-retrieval" title="Permalink to this headline">¶</a></h4>
<p>Die Ergebnisse die <em>libmunin</em> liefern kann, können nur so gut sein wie die
Eingabedaten. Sind diese falsch oder unzureichend (durch schlechtes Tagging
etwa), wird auch eine gute <a class="reference internal" href="rst/index.html#term-distanzfunktion"><em class="xref std std-term">Distanzfunktion</em></a> nur mittelmäßig genaue
Ergebnisse erzielen.</p>
<p>Momentan bietet <em>libmunin</em> bereits dem Nutzer Möglichkeiten an um fehlende
Songtexte und Genre-Tags aus dem Internet zu besorgen. In der Einleitung dieser
Arbeit wurden aber schon freie Musikmetadatenbanken wie <em>MusicBrainz</em> erwähnt
die mittels eines Audiofingerprints die Metadaten eines Stückes nachschlagen
können.</p>
<p>Glücklicherweise steht mit <em>beets</em> <a class="reference internal" href="rst/index.html#xaj" id="id2">[Link-25]</a> bereits ein entsprechendes,
praktischerweise in Python geschriebenes Tool bereit - gewissermaßen das
<em>libhugin</em> für Musik.  In Zukunft könnte <em>beets</em> zusammen mit <em>libglyr also den
*Information Retrieval</em> Teil übernehmen, ohne dass <em>libmunin</em> das Rad dafür neu
erfinden muss.</p>
</div>
</div>
<div class="section" id="implementierungsdefizite">
<h3>6.4 Implementierungsdefizite<a class="headerlink" href="#implementierungsdefizite" title="Permalink to this headline">¶</a></h3>
<div class="section" id="performance">
<h4>6.4.1 Performance<a class="headerlink" href="#performance" title="Permalink to this headline">¶</a></h4>
<div class="section" id="vermeidung-unnotiger-vergleiche">
<h5>6.4.1.1 Vermeidung unnötiger Vergleiche<a class="headerlink" href="#vermeidung-unnotiger-vergleiche" title="Permalink to this headline">¶</a></h5>
<p>Der Aufruf von einigen Distanzfunktionen macht nur dann Sinn, wenn bestimmte
Kriterien erfüllt sind. So macht es beispielsweise wahrscheinlich wenig Sinn die
<tt class="docutils literal"><span class="pre">moodbar</span></tt> zweier Songs zu vergleichen wenn sich die Stücklänge um mehr als das
doppelte unterscheidet - die Daten wären einfach zu unterschiedlich.</p>
<p>Momentan ist es allerdings noch nicht möglich für die <tt class="docutils literal"><span class="pre">moodbar</span></tt>-Distanzfunktion
die Länge des Stückes abzufragen - da sie nur die für sie relevanten Daten
bekommt, nicht die ganze <tt class="docutils literal"><span class="pre">Song</span></tt>-Instanz.</p>
</div>
<div class="section" id="beschleunigung-des-kaltstarts">
<h5>6.4.1.2 Beschleunigung des Kaltstarts<a class="headerlink" href="#beschleunigung-des-kaltstarts" title="Permalink to this headline">¶</a></h5>
<p>Alle Operationen von <em>libmunin</em> verlaufen momentan sequentiell. Dabei ließen
sich zumindest einige Teile des <em>Kaltstartes</em> optimieren indem eine gewisse
Anzahl von Songtexten (oder anderem <em>Information Retrieval</em>) parallel
heruntergeladen werden. Auch das Analysieren von Audiodaten könnte beschleunigt
werden indem ein (bei normalen Festplatten)  oder mehrere (bei SSDs) <em>Threads</em>
Audiodaten einliest und diese dann an <em>Workerthreads</em> weiterleitet, die die
eigentliche Analyse durchführen.</p>
</div>
</div>
<div class="section" id="korrektheit">
<h4>6.4.2 Korrektheit<a class="headerlink" href="#korrektheit" title="Permalink to this headline">¶</a></h4>
<div class="section" id="speicherung">
<h5>6.4.2.1 Speicherung<a class="headerlink" href="#speicherung" title="Permalink to this headline">¶</a></h5>
<p>Wie oben erwähnt erfolgt die Speicherung der <em>Session</em> mittels Python's
<tt class="docutils literal"><span class="pre">pickle</span></tt> Modul. Dieses serialisiert <em>rekursiv</em> die Objekt-Hierarchie,
ausgehend vom <em>Session</em> Objekt. Da in <em>libmunin</em> der Graph allerdings als
rekursive Datenstruktur implementiert ist ,,verläuft'' sich <tt class="docutils literal"><span class="pre">pickle</span></tt> darin -
zu hohe Rekursionstiefen entstehen bei ausreichend komplexen Graphen.</p>
<p>Python hat ein eingebautes <em>Rekursionslimit</em> welches ein wenig aussagekräftiges
<em>Segmentation Fault</em> verhindern soll - Abstürze beim Speichern der <em>Session</em>
sind die Folge. Hier ist Abhilfe nötig.</p>
</div>
<div class="section" id="korrekte-berechnung-des-bpm-wertes">
<h5>6.4.2.2 Korrekte Berechnung des <em>BPM-Wertes</em><a class="headerlink" href="#korrekte-berechnung-des-bpm-wertes" title="Permalink to this headline">¶</a></h5>
<p>Die Berechnung des <em>Beats-Per-Minute</em>-Wertes ist momentan in ein separates Tool
ausgelagert. Dieses Tool hat das Problem, dass es bei fehlerhaften Dateien oder
Formaten die es nicht versteht fehlerhafte (beispielsweise Werte <em>über</em> 300 bpm)
Werte zurückgibt.</p>
</div>
</div>
</div>
<div class="section" id="denkbare-weiterentwicklungen">
<h3>6.5 Denkbare Weiterentwicklungen<a class="headerlink" href="#denkbare-weiterentwicklungen" title="Permalink to this headline">¶</a></h3>
<p>Abgesehen von den obigen Defiziten hier noch einige Stichpunktartige Richtungen
in denen die Implementierung verbessert werden kann:</p>
<ul class="simple">
<li>Verläufe: Manchmal ist es wünschenswert dass die dynamisch erstellte Playlist
einem gewissen Verlauf folgt. Man denke an eine Party bei der erst schnelle,
fröhliche Musik gespielt wird, zum Ende hin dann langsame, ruhigere Musik.</li>
<li>Weitere Empfehlungs-Strategien, wie beispielsweise von rein Genre-basierenden
Empfehlungen.</li>
<li>Justierbarkeit der Gewichtungen während der Laufzeit - Momentan erfordert die
Justierung der Gewichtung eine <tt class="docutils literal"><span class="pre">rebuild</span></tt>-Operation.</li>
<li>,,Echte'' Audio/Mood-Analyse mittels <em>aubio</em> <a class="reference internal" href="rst/index.html#fn" id="id3">[Link-26]</a> oder <em>MARSYAS</em> <a class="reference internal" href="rst/index.html#hj7" id="id4">[Link-27]</a>.</li>
<li>Optionaler Aufsatz auf <em>libmunin</em> der <em>Social-based music recommendation</em>
ermöglicht - beispielsweise um die Ähnlichkeit von zwei Künstlern durch
Amazon-Reviews zu bestimmen. Sind diese in der Datenbank nicht vorhanden wird
die Ähnlichkeit - wie jetzt schon - automatisch bestimmt.</li>
<li>Portierbarkeit auf andere Plattformen, momentan wurde nur Linux getestet.</li>
</ul>
</div>
<div class="section" id="abschlieszendes-fazit">
<h3>6.6 Abschließendes Fazit<a class="headerlink" href="#abschlieszendes-fazit" title="Permalink to this headline">¶</a></h3>
<p><em>libmunin</em> ist ein solide Fundament für weitere Entwicklungen - und so flexibel
dass mit entsprechenden <em>Providern</em> und <em>Distanzfunktionen</em> sogar
Empfehlungs-Systeme für andere Dokumente wie Videos, Bücher oder Filmen möglich
wären.</p>
<p>Noch ist der Einsatz relativ kompliziert und erfordert, auch für kundige
Entwickler, einiges an Einarbeitungszeit - zuviel für etwas das einfach nur im
Hintergrund arbeiten sollte. Auch die erstellten Empfehlungen sind - subjektiv
gesehen - noch teilweise verbesserungswürdig. Besonders die momentane
Audioanalyse ist sehr primitiver Natur und bietet einiges an Potenzial an
Verbesserungen. Es wird momentan mehr auf <em>Masse</em> statt auf <em>Klasse</em> gesetzt und
oft ist einiges an <em>,,Kaffeesatzleserei''</em> enthalten.</p>
<p>Da das Projekt auch nach Abschluss dieser Arbeit, im Rahmen von <em>Moosecat</em>
weiter entwickelt werden soll, hofft der Autor mit der Zeit mehr Richtung
<em>Klasse</em> zu gehen - dann wäre das Projekt eine echte Alternative für viele der
in der Einleitung genannten Projekte.</p>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-rst/appendix"></span><div class="section" id="abkurzungsverzeichnis">
<h2>Abkürzungsverzeichnis<a class="headerlink" href="#abkurzungsverzeichnis" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center">
<center><table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="headalign-center align-top">Abkürzung</th>
<th class="headalign-center align-top">Bedeutung</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td class="align-center align-top"><strong>API</strong></td>
<td class="align-center align-top"><em>Application Programming Interface</em></td>
</tr>
<tr class="row-odd"><td class="align-center align-top"><strong>GUI</strong></td>
<td class="align-center align-top"><em>Graphical User Interface</em></td>
</tr>
<tr class="row-even"><td class="align-center align-top"><strong>LoC</strong></td>
<td class="align-center align-top"><em>Lines of Code</em></td>
</tr>
</tbody>
</table>
</center></div></div>
<div class="section" id="glossar">
<h2>Glossar<a class="headerlink" href="#glossar" title="Permalink to this headline">¶</a></h2>
<dl class="glossary docutils">
<dt id="term-song">Song</dt>
<dd><p class="first">Im Kontext von <em>libmunin</em> ist ein Song eine Menge von Attributen.
Jedem Attribut ist, wie in einer Hashmap, ein Wert zugeordnet.</p>
<p>Beispielsweise haben alle Songs ein Attribut <tt class="docutils literal"><span class="pre">artist</span></tt>, aber jeder
einzelner Song kennt dafür einen bestimmten Wert.</p>
<p class="last">Desweiteren wird für jeden Song die Distanz zu einer Menge ähnlicher
Songs gespeichert, sowie einen Integer der als Identifier dient.</p>
</dd>
<dt id="term-distanz">Distanz</dt>
<dd><p class="first">Eine Distanz beschreibt die Ähnlichkeit zweier Songs oder Attribute.
Eine Distanz von 0 bedeutet dabei eine maximale Ähnlichkeit (oder
minimale <em>Entfernung</em> zueinander), eine Distanz von 1.0 maximale
Unähnlichkeit (oder maximale <em>Entfernung</em>).</p>
<p class="last">Die Distanz wird durch eine <a class="reference internal" href="rst/index.html#term-distanzfunktion"><em class="xref std std-term">Distanzfunktion</em></a> berechnet.</p>
</dd>
<dt id="term-distanzfunktion">Distanzfunktion</dt>
<dd><p class="first">Eine Distanzfunktion ist im Kontext von <em>libmunin</em> eine Funktion, die
zwei Songs als Eingabe nimmt und die <a class="reference internal" href="rst/index.html#term-distanz"><em class="xref std std-term">Distanz</em></a> zwischen
diesen berechnet.</p>
<p>Dabei wird jedes <a class="reference internal" href="rst/index.html#term-attribut"><em class="xref std std-term">Attribut</em></a> betrachte welchesi n beiden Songs
vorkommt betrachtet. Für diese wird von der <a class="reference internal" href="rst/index.html#term-maske"><em class="xref std std-term">Maske</em></a> eine
spezialisierte <a class="reference internal" href="rst/index.html#term-distanzfunktion"><em class="xref std std-term">Distanzfunktion</em></a> festgelegt, die weiß wie diese
zwei bestimmten Werte sinnvoll verglichen werden können. Die so
errechneten Werte werden, gemäß der Gewichtung in der <a class="reference internal" href="rst/index.html#term-maske"><em class="xref std std-term">Maske</em></a>, zu
einem Wert verschmolzen.</p>
<p>Fehlen Attribute in einen der beiedn Songs wird für diese jeweils eine
Distanz von 1.0 angenommen und ebenfalls in die gewichtete Oberdistanz
eingerechnet.</p>
<p>Die folgenden Bedingungen müssen sowohl für die allgemeine
Distanzfunktion, als auch für die speziellen Distanzfunktionen gelten:</p>
<p><em>Uniformität:</em></p>
<div class="math">
\[0 \leq D(i, j) \leq 1 \, \forall \, i,j \in D\]</div>
<p><em>Symmetrie:</em></p>
<div class="math">
\[D(i, j) = D(j, i) \, \forall \, i,j \in D\]</div>
<p><em>Identität:</em></p>
<div class="math">
\[D(i, i) = 0.0 \, \forall \, i \in D\]</div>
<p><em>Dreiecksungleichung:</em></p>
<div class="last math">
\[D(i, j) \leq D(i, x) + (x, j)\]</div>
</dd>
<dt id="term-session">Session</dt>
<dd><p class="first">Eine <em>Session</em> ist eine Nutzung von <em>libmunin</em> über einem bestimmten
Zeitraum. Zum Erstellen einer Session werden die Daten importiert,
analysiert und ein <a class="reference internal" href="rst/index.html#term-graph"><em class="xref std std-term">Graph</em></a> wird daraus aufgebaut.</p>
<p>Zudem kann eine <em>Session</em> persistent für späteren Gebrauch gespeichert
werden.</p>
<p class="last">Für Nutzer der Bibliothek ist die <a class="reference internal" href="rst/index.html#term-session"><em class="xref std std-term">Session</em></a> auch Eintrittspunkt
für jegliche von <em>libmunin</em> bereitgestellte Funktionalität.</p>
</dd>
<dt id="term-maske">Maske</dt>
<dd><p class="first">Die <a class="reference internal" href="rst/index.html#term-session"><em class="xref std std-term">Session</em></a> benötigt eine Beschreibung der Daten die importiert
werden. So muss ich darauf geeinigt werden was beispielsweise unter dem
Schlüssel <tt class="docutils literal"><span class="pre">genre</span></tt> abgespeichert wird.</p>
<p class="last">In der <em>Maske</em> werden daher die einzelnen Attribute festgelegt, die ein
einzelner Song haben kann und wie diese anzusprechen sind. Zudem wird
pro Attribut ein <a class="reference internal" href="rst/index.html#term-provider"><em class="xref std std-term">Provider</em></a> und eine <a class="reference internal" href="rst/index.html#term-distanzfunktion"><em class="xref std std-term">Distanzfunktion</em></a>
festgelegt die bei der Verarbeitung dieses Wertes genutzt wird. Zudem
wird die Gewichtung des Attributes festgelegt - manche Attribute sind
für die Ähnlichkeit zweier Songs entscheidender als andere.</p>
</dd>
<dt id="term-attribut">Attribut</dt>
<dd>Ein Attribut ist ein <em>Schlüssel</em> in der <a class="reference internal" href="rst/index.html#term-maske"><em class="xref std std-term">Maske</em></a>. Er repräsentiert
eine Vereinbarung mit dem Nutzer unter welchem Namen das Attribut in
Zukunft angesprochen wird. Zu jedem gesetzten Attribut gehört ein Wert,
andernfalls ein spezieller leerer Wert. Ein Song besteht aus einer
Menge dieser Paare.</dd>
<dt id="term-provider">Provider</dt>
<dd><p class="first">Ein <em>Provider</em> normalisiert einen Wert anhand verschiedener
Charakteristiken. Sie dienen als vorgelagerte Verarbeitung von den Daten
die in das System geladen werden. Jeder <em>Provider</em> ist dabei einem
<a class="reference internal" href="rst/index.html#term-attribut"><em class="xref std std-term">Attribut</em></a> zugeordnet.</p>
<p class="last">Ihr Ziel ist für die <a class="reference internal" href="rst/index.html#term-distanzfunktion"><em class="xref std std-term">Distanzfunktion</em></a> einfache und effizient
vergleichbare Werte zu liefern - da die <a class="reference internal" href="rst/index.html#term-distanzfunktion"><em class="xref std std-term">Distanzfunktion</em></a> sehr
viel öfters aufgerufen wird als der <em>Provider</em>.</p>
</dd>
<dt id="term-assoziationsregel">Assoziationsregel</dt>
<dd><p class="first">Eine Assoziationsregel verbindet zwei Mengen <em>A</em> und <em>B</em> von Songs
miteinander. Wird eine der beiden Mengen miteinander gehört, ist es
wahrscheinlich dass auch die andere Menge daraufhin angehört wird.</p>
<p>Sie werden aus dem Verhalten des Nutzers abgeleitet.</p>
<p>Die Güte der Regel wird durch ein <em>Rating</em> beschrieben:</p>
<div class="math">
\[Rating(A, B) = (1.0 - Kulczynski(A, B)) \cdot ImbalanceRatio(A, B)\]</div>
<p>wobei:</p>
<div class="math">
\[Kulczynski(A, B) =  \frac{p(A \vert B) + p(B \vert A)}{2}\]</div>
<div class="math">
\[ImbalanceRatio(A, B) = \frac{\vert support(A) - support(B) \vert}{support(A) + support(B) - support(A \cup B)}\]</div>
<div class="admonition-vergleiche-dazu last admonition">
<p class="first admonition-title">Vergleiche dazu:</p>
<p class="last"><a class="reference internal" href="rst/index.html#datamining-concepts-and-techniques" id="id1">[3]</a>
Datamining Concepts and Techniques.</p>
</div>
</dd>
<dt id="term-recommendation">Recommendation</dt>
<dd><p class="first">Eine Recommendation (dt. Empfehlung) ist ein <a class="reference internal" href="rst/index.html#term-song"><em class="xref std std-term">Song</em></a> der vom System
auf Geheiß des Benutzers hin vorgeschlagen wird.</p>
<p class="last">Die Empfehlunge sollte eine geringe Distanz zum <a class="reference internal" href="rst/index.html#term-seedsong"><em class="xref std std-term">Seedsong</em></a> haben.</p>
</dd>
<dt id="term-seedsong">Seedsong</dt>
<dd>Ein Song der als Basis für Empfehlungen ausgewählt wurde.</dd>
<dt id="term-graph">Graph</dt>
<dd><p class="first">Im Kontext von <em>libmunin</em> ist der Graph eine Abbildung aller Songs (als
Knoten) und deren Distanz (als Kanten) untereinander. Im idealen Graphen
kennt jeder <a class="reference internal" href="rst/index.html#term-song"><em class="xref std std-term">Song</em></a> <em>N</em> zu ihm selbst ähnlichsten Songs als
Nachbarn.</p>
<p class="last">Da die Erstellung eines idealen Graphen sehr aufwendig ist, wird auf
eine schneller zu berechnende Approximation zurückgegriffen.</p>
</dd>
</dl>
</div>
<div class="section" id="coldstart-py">
<span id="coldstart-example"></span><h2><tt class="docutils literal"><span class="pre">coldstart.py</span></tt><a class="headerlink" href="#coldstart-py" title="Permalink to this headline">¶</a></h2>
<p>Führt die in  gezeigten Schritte <em>Kaltstart</em> bis <em>Rebuild</em>
aus. Als Eingabe wird die Datenbank des MPD-Servers verwendet, fehlende
Songtexte werden ergänzt und die Audiodaten für die <tt class="docutils literal"><span class="pre">moodbar</span></tt> und für die
Beats-per-Minute-Analyse wird lokalisiert.</p>
<p>Im Anschluss wird die Session aufgebaut und unter
<tt class="docutils literal"><span class="pre">$HOME/.cache/libmunin/EasySession.gz</span></tt> gespeichert.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>
<span class="c"># encoding: utf-8</span>
<span class="c"># Stdlib:</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="c"># Internal:</span>
<span class="kn">import</span> <span class="nn">moosecat.boot</span>
<span class="kn">from</span> <span class="nn">moosecat.boot</span> <span class="kn">import</span> <span class="n">g</span>

<span class="c"># External:</span>
<span class="kn">from</span> <span class="nn">munin.easy</span> <span class="kn">import</span> <span class="n">EasySession</span>
<span class="kn">from</span> <span class="nn">munin.provider</span> <span class="kn">import</span> <span class="n">PlyrLyricsProvider</span>

<span class="c"># Fetch missing lyrics, or load them from disk.</span>
<span class="c"># Also cache missed items for speed reasons.</span>
<span class="n">LYRICS_PROVIDER</span> <span class="o">=</span> <span class="n">PlyrLyricsProvider</span><span class="p">(</span><span class="n">cache_failures</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">make_entry</span><span class="p">(</span><span class="n">song</span><span class="p">):</span>
    <span class="c"># Hardcoded, Im sorry:</span>
    <span class="n">full_uri</span> <span class="o">=</span> <span class="s">&#39;/mnt/testdata/&#39;</span> <span class="o">+</span> <span class="n">song</span><span class="o">.</span><span class="n">uri</span>
    <span class="k">return</span> <span class="n">song</span><span class="o">.</span><span class="n">uri</span><span class="p">,</span> <span class="p">{</span>
        <span class="s">&#39;artist&#39;</span><span class="p">:</span> <span class="n">song</span><span class="o">.</span><span class="n">artist</span><span class="p">,</span>
        <span class="s">&#39;album&#39;</span><span class="p">:</span> <span class="n">song</span><span class="o">.</span><span class="n">album</span><span class="p">,</span>
        <span class="s">&#39;title&#39;</span><span class="p">:</span> <span class="n">song</span><span class="o">.</span><span class="n">title</span><span class="p">,</span>
        <span class="s">&#39;genre&#39;</span><span class="p">:</span> <span class="n">song</span><span class="o">.</span><span class="n">genre</span><span class="p">,</span>
        <span class="s">&#39;bpm&#39;</span><span class="p">:</span> <span class="n">full_uri</span><span class="p">,</span>
        <span class="s">&#39;moodbar&#39;</span><span class="p">:</span> <span class="n">full_uri</span><span class="p">,</span>
        <span class="s">&#39;rating&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
        <span class="s">&#39;date&#39;</span><span class="p">:</span> <span class="n">song</span><span class="o">.</span><span class="n">date</span><span class="p">,</span>
        <span class="s">&#39;lyrics&#39;</span><span class="p">:</span> <span class="n">LYRICS_PROVIDER</span><span class="o">.</span><span class="n">do_process</span><span class="p">((</span>
            <span class="n">song</span><span class="o">.</span><span class="n">album_artist</span> <span class="ow">or</span> <span class="n">song</span><span class="o">.</span><span class="n">artist</span><span class="p">,</span> <span class="n">song</span><span class="o">.</span><span class="n">title</span>
        <span class="p">))</span>
    <span class="p">}</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c"># Bring up moosecat</span>
    <span class="n">moosecat</span><span class="o">.</span><span class="n">boot</span><span class="o">.</span><span class="n">boot_base</span><span class="p">(</span><span class="n">verbosity</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
    <span class="n">g</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">port</span><span class="o">=</span><span class="mi">6601</span><span class="p">)</span>
    <span class="n">moosecat</span><span class="o">.</span><span class="n">boot</span><span class="o">.</span><span class="n">boot_metadata</span><span class="p">()</span>
    <span class="n">moosecat</span><span class="o">.</span><span class="n">boot</span><span class="o">.</span><span class="n">boot_store</span><span class="p">()</span>

    <span class="c"># Fetch the whole database into entries:</span>
    <span class="n">entries</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="n">g</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="n">queue_only</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="k">as</span> <span class="n">playlist</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">song</span> <span class="ow">in</span> <span class="n">playlist</span><span class="p">:</span>
            <span class="n">entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_entry</span><span class="p">(</span><span class="n">song</span><span class="p">))</span>

    <span class="c"># Instance a new EasySession and fill in the values.</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">EasySession</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">transaction</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">uri</span><span class="p">,</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">&#39;Processing:&#39;</span><span class="p">,</span> <span class="n">entry</span><span class="p">[</span><span class="s">&#39;bpm&#39;</span><span class="p">])</span>
                <span class="n">session</span><span class="o">.</span><span class="n">mapping</span><span class="p">[</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">entry</span><span class="p">)]</span> <span class="o">=</span> <span class="n">uri</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="kn">import</span> <span class="nn">traceback</span>
                <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>

    <span class="c"># Save the Session to disk (~/.cache/libmunin/EasySession.gz)</span>
    <span class="n">session</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

    <span class="c"># Plot if desired.</span>
    <span class="k">if</span> <span class="s">&#39;--plot&#39;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

    <span class="c"># Close the connection to MPD, save cached database</span>
    <span class="n">moosecat</span><span class="o">.</span><span class="n">boot</span><span class="o">.</span><span class="n">shutdown_application</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="ausfuhrliches-beispiel">
<span id="complex-example"></span><h2>Ausführliches Beispiel<a class="headerlink" href="#ausfuhrliches-beispiel" title="Permalink to this headline">¶</a></h2>
<p>Der Vollständigkeit halber soll hier noch ein ausführliches Beispiel
gezeigt werden, das auch im Vergleich zum einfachen Beispiel folgende Features
zeigt:</p>
<blockquote>
<div><ul class="simple">
<li>Das Erstellen einer eigenen Session</li>
<li>Das Speichern und Laden derselben</li>
<li>Das Füttern der History</li>
<li>Ableiten von Assoziationsregeln</li>
<li>Mehrere Möglichkeiten zur Empfehlung</li>
</ul>
</div></blockquote>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>
<span class="c"># encoding: utf-8</span>

<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">munin.helper</span> <span class="kn">import</span> <span class="n">pairup</span>
<span class="kn">from</span> <span class="nn">munin.session</span> <span class="kn">import</span> <span class="n">Session</span>
<span class="kn">from</span> <span class="nn">munin.distance</span> <span class="kn">import</span> <span class="n">GenreTreeDistance</span><span class="p">,</span> <span class="n">WordlistDistance</span>
<span class="kn">from</span> <span class="nn">munin.provider</span> <span class="kn">import</span> \
        <span class="n">ArtistNormalizeProvider</span><span class="p">,</span> \
        <span class="n">GenreTreeProvider</span><span class="p">,</span> \
        <span class="n">WordlistProvider</span><span class="p">,</span>  \
        <span class="n">StemProvider</span>


<span class="n">MY_DATABASE</span> <span class="o">=</span> <span class="p">[(</span>
        <span class="s">&#39;Devildriver&#39;</span><span class="p">,</span>                <span class="c"># Artist</span>
        <span class="s">&#39;Before the Hangmans Noose&#39;</span><span class="p">,</span>  <span class="c"># Title</span>
        <span class="s">&#39;metal&#39;</span>                       <span class="c"># Genre</span>
    <span class="p">),</span> <span class="p">(</span>
        <span class="s">&#39;Das Niveau&#39;</span><span class="p">,</span>
        <span class="s">&#39;Beim Pissen gemeuchelt&#39;</span><span class="p">,</span>
        <span class="s">&#39;folk&#39;</span>
    <span class="p">),</span> <span class="p">(</span>
        <span class="s">&#39;We Butter the Bread with Butter&#39;</span><span class="p">,</span>
        <span class="s">&#39;Extrem&#39;</span><span class="p">,</span>
        <span class="s">&#39;metal&#39;</span>
    <span class="p">),</span> <span class="p">(</span>
        <span class="s">&#39;Lady Gaga&#39;</span><span class="p">,</span>
        <span class="s">&#39;Pokerface&#39;</span><span class="p">,</span>
        <span class="s">&#39;pop&#39;</span>
<span class="p">)]</span>


<span class="k">def</span> <span class="nf">create_session</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&#39;-- No saved session found, loading new.&#39;</span><span class="p">)</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">Session</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s">&#39;demo&#39;</span><span class="p">,</span>
        <span class="n">mask</span><span class="o">=</span><span class="p">{</span>
            <span class="c"># Each entry goes like this:</span>
            <span class="s">&#39;Genre&#39;</span><span class="p">:</span> <span class="n">pairup</span><span class="p">(</span>
                <span class="c"># Pratice: Go lookup what this Providers does.</span>
                <span class="n">GenreTreeProvider</span><span class="p">(),</span>
                <span class="c"># Practice: Same for the DistanceFunction.</span>
                <span class="n">GenreTreeDistance</span><span class="p">(),</span>
                <span class="c"># This has the highest rating of the three attributes:</span>
                <span class="mi">8</span>
            <span class="p">),</span>
            <span class="s">&#39;Title&#39;</span><span class="p">:</span> <span class="n">pairup</span><span class="p">(</span>
                <span class="c"># We can also compose Provider, so that the left one</span>
                <span class="c"># gets the input value, and the right one the value</span>
                <span class="c"># the left one processed.</span>
                <span class="c"># In this case we first split the title in words,</span>
                <span class="c"># then we stem each word.</span>
                <span class="n">WordlistProvider</span><span class="p">()</span> <span class="o">|</span> <span class="n">StemProvider</span><span class="p">(),</span>
                <span class="n">WordlistDistance</span><span class="p">(),</span>
                <span class="mi">1</span>
            <span class="p">),</span>
            <span class="s">&#39;Artist&#39;</span><span class="p">:</span> <span class="n">pairup</span><span class="p">(</span>
                <span class="c"># If no Provider (None) is given the value is forwarded as-is.</span>
                <span class="c"># Here we just use the default provider, but enable</span>
                <span class="c"># compression. Values are saved once and are givean an ID.</span>
                <span class="c"># Duplicate items get the same ID always.</span>
                <span class="c"># You can trade off memory vs. speed with this.</span>
                <span class="n">ArtistNormalizeProvider</span><span class="p">(</span><span class="n">compress</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
                <span class="c"># If not DistanceFunctions is given, all values are</span>
                <span class="c"># compare with __eq__ - which might give bad results.</span>
                <span class="bp">None</span><span class="p">,</span>
                <span class="mi">1</span>
            <span class="p">)</span>
        <span class="p">}</span>
    <span class="p">)</span>

    <span class="c"># As in our first example we fill the session, but we dont insert the full</span>
    <span class="c"># database, we leave out the last song:</span>
    <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">transaction</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="p">(</span><span class="n">artist</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">genre</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">MY_DATABASE</span><span class="p">[:</span><span class="mi">3</span><span class="p">]):</span>
            <span class="c"># Notice how we use the uppercase keys like above:</span>
            <span class="n">session</span><span class="o">.</span><span class="n">mapping</span><span class="p">[</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">({</span>
                <span class="s">&#39;Genre&#39;</span><span class="p">:</span> <span class="n">genre</span><span class="p">,</span>
                <span class="s">&#39;Title&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span>
                <span class="s">&#39;Artist&#39;</span><span class="p">:</span> <span class="n">artist</span><span class="p">,</span>
            <span class="p">})]</span> <span class="o">=</span> <span class="n">idx</span>

    <span class="k">return</span> <span class="n">session</span>


<span class="k">def</span> <span class="nf">print_recommendations</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="c"># A generator that yields at max 20 songs.</span>
    <span class="n">recom_generator</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">recommend_from_heuristic</span><span class="p">(</span><span class="n">number</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
    <span class="n">seed_song</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">recom_generator</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&#39;Recommendations to #{}:&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">seed_song</span><span class="o">.</span><span class="n">uid</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">munin_song</span> <span class="ow">in</span> <span class="n">recom_generator</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;  normalized values:&#39;</span><span class="p">)</span>

        <span class="c"># Let&#39;s take</span>
        <span class="k">for</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">normalized_value</span> <span class="ow">in</span> <span class="n">munin_song</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">print</span><span class="p">(</span><span class="s">&#39;    {:&lt;7s}: {:&lt;20s}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span> <span class="n">normalized_value</span><span class="p">))</span>

        <span class="n">original_song</span> <span class="o">=</span> <span class="n">MY_DATABASE</span><span class="p">[</span><span class="n">session</span><span class="o">.</span><span class="n">mapping</span><span class="p">[</span><span class="n">munin_song</span><span class="o">.</span><span class="n">uid</span><span class="p">]]</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;  original values:&#39;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;    Artist :&#39;</span><span class="p">,</span> <span class="n">original_song</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;    Album  :&#39;</span><span class="p">,</span> <span class="n">original_song</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;    Genre  :&#39;</span><span class="p">,</span> <span class="n">original_song</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">print</span><span class="p">()</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&#39;The database:&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">song</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">MY_DATABASE</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;  #{} {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">song</span><span class="p">))</span>
    <span class="k">print</span><span class="p">()</span>

    <span class="c"># Perhaps we already had an prior session?</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">Session</span><span class="o">.</span><span class="n">from_name</span><span class="p">(</span><span class="s">&#39;demo&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">create_session</span><span class="p">(</span><span class="s">&#39;demo&#39;</span><span class="p">)</span>
    <span class="n">rules</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">session</span><span class="o">.</span><span class="n">rule_index</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rules</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;Association Rules:&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">support</span><span class="p">,</span> <span class="n">rating</span> <span class="ow">in</span> <span class="n">rules</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">&#39;  {:&gt;10s} &lt;-&gt; {:&lt;10s} [supp={:&gt;5d}, rating={:.5f}]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="nb">str</span><span class="p">([</span><span class="n">song</span><span class="o">.</span><span class="n">uid</span> <span class="k">for</span> <span class="n">song</span> <span class="ow">in</span> <span class="n">left</span><span class="p">]),</span>
                <span class="nb">str</span><span class="p">([</span><span class="n">song</span><span class="o">.</span><span class="n">uid</span> <span class="k">for</span> <span class="n">song</span> <span class="ow">in</span> <span class="n">right</span><span class="p">]),</span>
                <span class="n">support</span><span class="p">,</span> <span class="n">rating</span>
            <span class="p">))</span>
        <span class="k">print</span><span class="p">()</span>

    <span class="n">print_recommendations</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>

    <span class="c"># Let&#39;s add some history:</span>
    <span class="k">for</span> <span class="n">munin_uid</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">feed_history</span><span class="p">(</span><span class="n">munin_uid</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="s">&#39;Playcounts:&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">song</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">playcounts</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;  #{} was played {}x times&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">song</span><span class="o">.</span><span class="n">uid</span><span class="p">,</span> <span class="n">count</span><span class="p">))</span>

    <span class="c"># Let&#39;s insert a new song that will be in the graph on the next run:</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">session</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">MY_DATABASE</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">fix_graph</span><span class="p">():</span>
            <span class="n">session</span><span class="o">.</span><span class="n">mapping</span><span class="p">[</span><span class="n">session</span><span class="o">.</span><span class="n">insert</span><span class="p">({</span>
                <span class="s">&#39;Genre&#39;</span><span class="p">:</span> <span class="n">MY_DATABASE</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span>
                <span class="s">&#39;Title&#39;</span><span class="p">:</span> <span class="n">MY_DATABASE</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
                <span class="s">&#39;Artist&#39;</span><span class="p">:</span> <span class="n">MY_DATABASE</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">})]</span> <span class="o">=</span> <span class="mi">3</span>

    <span class="k">if</span> <span class="s">&#39;--plot&#39;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">:</span>
        <span class="n">session</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

    <span class="c"># Save it under ~/.cache/libmunin/demo</span>
    <span class="n">session</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="ausgabe-nach-dem-ersten-lauf">
<h3>Ausgabe nach dem ersten Lauf:<a class="headerlink" href="#ausgabe-nach-dem-ersten-lauf" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="n">The</span> <span class="n">database</span><span class="p">:</span>
  <span class="c">#0 (&#39;Devildriver&#39;, &#39;Before the Hangmans Noose&#39;, &#39;metal&#39;)</span>
  <span class="c">#1 (&#39;Das Niveau&#39;, &#39;Beim Pissen gemeuchelt&#39;, &#39;folk&#39;)</span>
  <span class="c">#2 (&#39;We Butter the Bread with Butter&#39;, &#39;Extrem&#39;, &#39;metal&#39;)</span>
  <span class="c">#3 (&#39;Lady Gaga&#39;, &#39;Pokerface&#39;, &#39;pop&#39;)</span>

<span class="o">--</span> <span class="n">No</span> <span class="n">saved</span> <span class="n">session</span> <span class="n">found</span><span class="p">,</span> <span class="n">loading</span> <span class="n">new</span><span class="o">.</span>
<span class="n">matching</span> <span class="p">[</span><span class="s">&#39;metal&#39;</span><span class="p">]</span>
<span class="n">matching</span> <span class="p">[</span><span class="s">&#39;folk&#39;</span><span class="p">]</span>
<span class="n">matching</span> <span class="p">[</span><span class="s">&#39;metal&#39;</span><span class="p">]</span>
<span class="n">Recommendations</span> <span class="n">to</span> <span class="c">#0:</span>
  <span class="n">normalized</span> <span class="n">values</span><span class="p">:</span>
    <span class="n">Artist</span> <span class="p">:</span> <span class="p">(</span><span class="mi">3</span><span class="p">,)</span>
    <span class="n">Genre</span>  <span class="p">:</span> <span class="p">((</span><span class="mi">583</span><span class="p">,),)</span>
    <span class="n">Title</span>  <span class="p">:</span> <span class="p">[</span><span class="s">&#39;Extrem&#39;</span><span class="p">]</span>
  <span class="n">original</span> <span class="n">values</span><span class="p">:</span>
    <span class="n">Artist</span> <span class="p">:</span> <span class="n">We</span> <span class="n">Butter</span> <span class="n">the</span> <span class="n">Bread</span> <span class="k">with</span> <span class="n">Butter</span>
    <span class="n">Album</span>  <span class="p">:</span> <span class="n">Extrem</span>
    <span class="n">Genre</span>  <span class="p">:</span> <span class="n">metal</span>

<span class="n">Playcounts</span><span class="p">:</span>
  <span class="c">#0 was played 3x times</span>
  <span class="c">#2 was played 2x times</span>
<span class="n">matching</span> <span class="p">[</span><span class="s">&#39;pop&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="ausgabe-nach-dem-10ten-lauf">
<h3>Ausgabe nach dem 10ten Lauf:<a class="headerlink" href="#ausgabe-nach-dem-10ten-lauf" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="n">The</span> <span class="n">database</span><span class="p">:</span>
  <span class="c">#0 (&#39;Devildriver&#39;, &#39;Before the Hangmans Noose&#39;, &#39;metal&#39;)</span>
  <span class="c">#1 (&#39;Das Niveau&#39;, &#39;Beim Pissen gemeuchelt&#39;, &#39;folk&#39;)</span>
  <span class="c">#2 (&#39;We Butter the Bread with Butter&#39;, &#39;Extrem&#39;, &#39;metal&#39;)</span>
  <span class="c">#3 (&#39;Lady Gaga&#39;, &#39;Pokerface&#39;, &#39;pop&#39;)</span>

<span class="n">Association</span> <span class="n">Rules</span><span class="p">:</span>
         <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&lt;-&gt;</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>        <span class="p">[</span><span class="n">supp</span><span class="o">=</span>    <span class="mi">8</span><span class="p">,</span> <span class="n">rating</span><span class="o">=</span><span class="mf">0.83951</span><span class="p">]</span>

<span class="n">Recommendations</span> <span class="n">to</span> <span class="c">#2:</span>
  <span class="n">normalized</span> <span class="n">values</span><span class="p">:</span>
    <span class="n">Artist</span> <span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>
    <span class="n">Genre</span>  <span class="p">:</span> <span class="p">((</span><span class="mi">583</span><span class="p">,),)</span>
    <span class="n">Title</span>  <span class="p">:</span> <span class="p">[</span><span class="s">&#39;the&#39;</span><span class="p">,</span> <span class="s">&#39;Befor&#39;</span><span class="p">,</span> <span class="s">&#39;Noos&#39;</span><span class="p">,</span> <span class="s">&#39;Hangman&#39;</span><span class="p">]</span>
  <span class="n">original</span> <span class="n">values</span><span class="p">:</span>
    <span class="n">Artist</span> <span class="p">:</span> <span class="n">Devildriver</span>
    <span class="n">Album</span>  <span class="p">:</span> <span class="n">Before</span> <span class="n">the</span> <span class="n">Hangmans</span> <span class="n">Noose</span>
    <span class="n">Genre</span>  <span class="p">:</span> <span class="n">metal</span>

<span class="n">Playcounts</span><span class="p">:</span>
  <span class="c">#0 was played 30x times</span>
  <span class="c">#2 was played 20x times</span>
</pre></div>
</div>
<span class="target" id="end-of-doc"></span></div>
</div>
<span id="document-rst/zzz_bibliography"></span><div class="section" id="bibliographie">
<h2>Bibliographie<a class="headerlink" href="#bibliographie" title="Permalink to this headline">¶</a></h2>
</div>
<p id="bibtex-bibliography-rst/zzz_bibliography-0"><table class="docutils citation" frame="void" id="celma2010music" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>Oscar Celma. <em>Music recommendation and discovery</em>. Springer, 2010.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="hayes2001smart" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td>Conor Hayes and Pádraig Cunningham. Smart radio-building music radio on the fly. In <em>Applications and Innovations in Intelligent Systems VIII</em>, pages 129–138. Springer, 2001.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="datamining-concepts-and-techniques" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[3]</td><td>Jian&nbsp;Pei Jiawei&nbsp;Han, Micheline&nbsp;Kamber. Datamining - concepts and techniques, (3rd edition). In <em>Datamining - Concepts and Techniques</em>, 268–271. 2012.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="knees2007music" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[4]</td><td>Peter Knees, Tim Pohle, Markus Schedl, and Gerhard Widmer. A music search engine built upon audio-based and web-based similarity measures. In <em>Proceedings of the 30th annual international ACM SIGIR conference on Research and development in information retrieval</em>, 447–454. ACM, 2007.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="lee2006music" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[5]</td><td>Jae&nbsp;Sik Lee and Jin&nbsp;Chun Lee. Music for my mood: a music recommendation system based on context reasoning. In <em>Smart sensing and context</em>, pages 190–203. Springer, 2006.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="vembu2005self" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[6]</td><td>Shankar Vembu and Stephan Baumann. A self-organizing map based knowledge discovery for music recommendation systems. In <em>Computer music modeling and retrieval</em>, pages 119–129. Springer, 2005.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="wiki2014empfehlungsdienst" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[7]</td><td>Wikipedia. Empfehlungsdienst — wikipedia, die freie enzyklopädie. 2013. [Online; Stand 1. Februar 2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="wiki2014hugin" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[8]</td><td>Wikipedia. Huginn and muninn — wikipedia, the free encyclopedia. 2014. [Online; accessed 1-February-2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="wood2005techniques" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[9]</td><td>Gavin Wood and Simon O'Keefe. On techniques for content-based visual annotation to aid intra-track music navigation. In <em>ISMIR</em>, 58–65. 2005.</td></tr>
</tbody>
</table>
</p>
<div class="section" id="weblink-verzeichnis">
<h2>Weblink Verzeichnis<a class="headerlink" href="#weblink-verzeichnis" title="Permalink to this headline">¶</a></h2>
</div>
<p id="bibtex-bibliography-rst/zzz_bibliography-1"><table class="docutils citation" frame="void" id="a3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-1]</td><td><span><a class="reference external" href="http://musicbrainz.org/">http://musicbrainz.org/</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="t" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-2]</td><td><span><a class="reference external" href="http://www.jamendo.com/">http://www.jamendo.com/</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="ikc" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-3]</td><td><span><a class="reference external" href="http://www.mufin.com/usecase/music-recommendation/">http://www.mufin.com/usecase/music-recommendation/</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="nt" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-4]</td><td><span><a class="reference external" href="http://www.last.fm">http://www.last.fm</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="wnn" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-5]</td><td><span><a class="reference external" href="http://www.youtube.de">http://www.youtube.de</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="xxx" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-6]</td><td><span><a class="reference external" href="http://amazon.de">http://amazon.de</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="zmf" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-7]</td><td><span><a class="reference external" href="http://musicovery.com/">http://musicovery.com/</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="ahx" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-8]</td><td><span><a class="reference external" href="http://hop.at/mirage/">http://hop.at/mirage/</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="uzb" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-9]</td><td><span><a class="reference external" href="http://www.mufin.com/products/audiogen/">http://www.mufin.com/products/audiogen/</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="jv6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-10]</td><td><span><a class="reference external" href="https://www.archlinux.org/">https://www.archlinux.org/</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="jh7" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-11]</td><td><span><a class="reference external" href="https://github.com/studentkittens/moosecat">https://github.com/studentkittens/moosecat</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="xu" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-12]</td><td><span><a class="reference external" href="https://github.com/sahib/glyr">https://github.com/sahib/glyr</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="w5" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-13]</td><td><span><a class="reference external" href="http://www.mopidy.com/">http://www.mopidy.com/</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="xvg" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-14]</td><td><span><a class="reference external" href="https://github.com/mopidy/mopidy/issues/620">https://github.com/mopidy/mopidy/issues/620</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="igr" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-15]</td><td><span><a class="reference external" href="http://igraph.sourceforge.net/">http://igraph.sourceforge.net/</a></span>. [Stand: 19.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="lx" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-16]</td><td><span><a class="reference external" href="https://libmunin.rtfd.org">https://libmunin.rtfd.org</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="thv" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-17]</td><td><span><a class="reference external" href="http://libmunin.readthedocs.org/en/latest/logbuch.html">http://libmunin.readthedocs.org/en/latest/logbuch.html</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="yz" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-18]</td><td><span><a class="reference external" href="http://www.pogo.org.uk/~mark/bpm-tools/">http://www.pogo.org.uk/&nbsp;mark/bpm-tools/</a></span>. [Stand: 19.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="y41" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-19]</td><td><span><a class="reference external" href="https://github.com/sahib/libmunin">https://github.com/sahib/libmunin</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="jiu" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-20]</td><td><span><a class="reference external" href="https://travis-ci.org/sahib/libmunin">https://travis-ci.org/sahib/libmunin</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="o6q" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-21]</td><td><span><a class="reference external" href="https://pypi.python.org/pypi/libmunin/">https://pypi.python.org/pypi/libmunin/</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="md" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-22]</td><td><span><a class="reference external" href="http://sahib.github.io/libmunin-thesis/gitstats/index.html">http://sahib.github.io/libmunin-thesis/gitstats/index.html</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="ibl" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-23]</td><td><span><a class="reference external" href="https://github.com/sahib/libmunin/graphs">https://github.com/sahib/libmunin/graphs</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="mc" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-24]</td><td><span><a class="reference external" href="https://vimeo.com/86633649">https://vimeo.com/86633649</a></span>. [Stand: 13.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="xaj" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-25]</td><td><span><a class="reference external" href="http://beets.radbox.org/">http://beets.radbox.org/</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="fn" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-26]</td><td><span><a class="reference external" href="https://github.com/piem/aubio">https://github.com/piem/aubio</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="hj7" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link-27]</td><td><span><a class="reference external" href="https://github.com/marsyas/marsyas">https://github.com/marsyas/marsyas</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
</p>
</div>
<div class="section" id="lizenz">
<h2>Lizenz<a class="headerlink" href="#lizenz" title="Permalink to this headline">¶</a></h2>
<p>Diese Arbeit ist unter den Bedingungen der <em>Creative Commons Attribution-3.0</em>
lizensiert:</p>
<blockquote>
<div><a class="reference external" href="http://creativecommons.org/licenses/by/3.0/de/">http://creativecommons.org/licenses/by/3.0/de/</a></div></blockquote>
<a class="reference internal image-reference" href="../../_images/cclogo.svg"><div align="center" class="align-center"><img alt="Creative Commons License" src="../../_images/cclogo.svg" width="50%" /></div>
</a>
</div>
</div>


          <footer>
  

  <hr/>

  <p>
      &copy; Copyright by Christopher Pahl, 2013-2014..
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>